/*! For license information please see widget-loader.min.js.LICENSE */
!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=".",n(n.s=647)}({10:function(e,t,n){"use strict";var r=n(12);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=void 0===arguments?void 0:arguments;function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var t=l(e,"string");return"symbol"===i(t)?t:String(t)}function l(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var f,d=function(e){return window.setTimeout(e,1e3/60)},p=0;function y(e,t){do{p===e?p=0:p+=1}while(Object.prototype.hasOwnProperty.call(t,p));return p}var m=function(){var e;if(window.Worker&&window.Blob&&!r.a.ieVersion)try{var t={},n=new Blob(['e={};onmessage=function(a){var t,r=a.data,s=r.name,n=r.fakeId;switch(r.hasOwnProperty("time")&&(t=r.time),s){case"setInterval":e[n]=setInterval(function(){postMessage({fakeId:n})},t);break;case"clearInterval":e.hasOwnProperty(n)&&(clearInterval(e[n]),delete e[n]);break;case"setTimeout":e[n]=setTimeout(function(){postMessage({fakeId:n}),e.hasOwnProperty(n)&&delete e[n]},t);break;case"clearTimeout":e.hasOwnProperty(n)&&(clearTimeout(e[n]),delete e[n])}}']),i=window.URL.createObjectURL(n);(f=new Worker(i)).onmessage=function(e){var n,r,i,o=e.data.fakeId;Object.prototype.hasOwnProperty.call(t,o)&&(i=(n=t[o]).callback,r=n.parameters,Object.prototype.hasOwnProperty.call(n,"isTimeout")&&n.isTimeout&&delete t[o]),"function"==typeof i&&i.apply(window,r)},f.onerror=function(e){},e={setInterval:function(e,n){var r=y(2147483647,t);return t[r]={callback:e,parameters:Array.prototype.slice.call(o,2)},f.postMessage({name:"setInterval",fakeId:r,time:n}),r},clearInterval:function(e){Object.prototype.hasOwnProperty.call(t,e)&&(delete t[e],f.postMessage({name:"clearInterval",fakeId:e}))},setTimeout:function(e,n){var r=y(2147483647,t);return t[r]={callback:e,parameters:Array.prototype.slice.call(o,2),isTimeout:!0},f.postMessage({name:"setTimeout",fakeId:r,time:n}),r},clearTimeout:function(e){Object.prototype.hasOwnProperty.call(t,e)&&(delete t[e],f.postMessage({name:"clearTimeout",fakeId:e}))}}}catch(e){}return e},v=m(),h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||d,g=function(){function e(){a(this,e)}return c(e,[{key:"requestInterval",value:function(e,t){if(v)return v.setInterval(e,t);if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setInterval(e,t);var n=(new Date).getTime();return h((function r(){(new Date).getTime()-n>=t&&(e.call(),n=(new Date).getTime()),h(r)}))}},{key:"clearRequestInterval",value:function(e){v?v.clearInterval(e):window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(e):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(e):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(e):window.clearInterval(e)}},{key:"requestTimeout",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(v)return v.setTimeout(e,t);if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setTimeout(e,t);var n=(new Date).getTime(),r=function r(){(new Date).getTime()-n>=t?e.call():h(r)};return h(r)}},{key:"clearRequestTimeout",value:function(e){v?v.clearTimeout(e):window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(e):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(e):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(e):window.clearTimeout(e)}}]),e}();t.a=new g},102:function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&p())}function p(){if(!l){var e=s(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new y(e,t)),1!==u.length||l||s(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},113:function(e,t,n){"use strict";var r=function(e){var t=!1;try{var n=window[e];n.setItem("testLS","works");var r=n.getItem("testLS");n.removeItem("testLS"),t="works"===r}catch(e){}return t};t.a={localStorage:r("localStorage"),sessionStorage:r("sessionStorage")}},12:function(e,t,n){"use strict";(function(e,r){var i=n(8);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===y(o)?o:String(o)),r)}var i,o}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){var t="function"==typeof Map?new Map:void 0;return(u=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return l(e,arguments,p(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,e)})(e)}function l(e,t,n){return(l=f()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&d(i,n.prototype),i}).apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m=function(){},v=window,h=r;var g=function(e){if(!v)return{isNode:null!==h&&"object"===y(h)&&null!==h.versions&&"object"===y(h.versions)&&void 0!==h.versions.node,ieVersion:-1,safariVersion:-1,chromeVersion:-1,isMobileSafari:!1,isAndroidTablet:!1,isAndroid:!1,isIpad:!1,isTablet:!1,iosVersion:-1,isPhone:!1,getDevice:"unknown"};var t,n,r=/.*Trident.*rv:(\d+)/,i=/Edge\/(\d+)\./,o=function(){var t,n,o=function(){var e,t=3,n=document.createElement("div");do{t+=1,n.innerHTML="\x3c!--[if gt IE ".concat(t,"]><i></i><![endif]--\x3e"),e=n.getElementsByTagName("i")}while(e[0]);return t>4?t:void 0}();return o||(v.ActiveXObject?10:((n=r.exec(e))&&(t=parseInt(n[1],10)),(n=i.exec(e))&&(t=parseInt(n[1],10)),t))}();/Safari\/([0-9.]+)/.test(e)&&/Version\/([0-9.]+)/.test(e)&&(t=RegExp.$1),/Chrome\/([0-9.]+)/.test(e)&&(n=RegExp.$1,t=void 0),o&&(document.documentElement.className+=" ie".concat(o));var a=-1!==e.indexOf("AppleWebKit")&&e.match(/(iPod|iPhone|iPad)/),s=-1!==e.indexOf("Android"),c=s&&-1===e.indexOf("Mobile"),u=e.match(/(Macintosh)/),l=a&&"iPad"===a[0]||u&&navigator.maxTouchPoints>0,f=c||l,d=(s||a)&&!f,p=e.match(/OS (\d+)_(\d+)_?(\d+)?/),m=a&&p&&p.length>1?parseInt(p[1],10):0,g=e.indexOf("Android")>=0?parseInt(e.slice(e.indexOf("Android")+8),10):0,E=function(e){return!!e};return{ieVersion:o,safariVersion:t,chromeVersion:n,isMobileSafari:E(a),isAndroidTablet:c,isAndroid:s,isIpad:E(l),isTablet:E(f),iosVersion:m,androidVersion:g,isPhone:E(d),isMac:E(u),getDevice:function(){var e="desktop";return d&&(e="phone"),f&&(e="tablet"),e}}},E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(i,e);var t,n,r=(t=i,n=f(),function(){var e,r=p(t);if(n){var i=p(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return c(this,e)});function i(e){var t;return s(this,i),(t=r.call(this)).message=e,t.name="InvalidCharacterError",t}return a(i)}(u(Error)),b=a((function t(){s(this,t),v&&function(){if(!v.location.origin){var t=v.location.port,n="";t&&"80"!==t&&"443"!==t&&(n=":".concat(t)),v.location.origin="".concat(v.location.protocol,"//").concat(v.location.hostname).concat(n)}v.console||(v.console={log:m,debug:m,warn:m,error:m}),v.onbeforeunload||(v.onbeforeunload=m),document.head||(document.head=document.getElementsByTagName("head")[0]),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var r=e.Element?"Element":"HTMLElement";if(!("dataset"in document.createElement("span"))&&r in e&&e[r].prototype&&Object.defineProperty&&Object.defineProperty(e[r].prototype,"dataset",{get:function(){for(var e=Object.create(null),t=0;t<this.attributes.length;++t){var n=this.attributes[t];n.specified&&"data-"===n.name.substring(0,5)&&function(t,n){var r=n.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}));e[r]=t.getAttribute("data-".concat(n)),Object.defineProperty(e,r,{get:function(){return t.getAttribute("data-".concat(n))},set:function(e){t.setAttribute("data-".concat(n),e)}})}(this,n.name.substring(5))}return e}}),v.NodeList&&!v.NodeList.prototype.forEach&&(v.NodeList.prototype.forEach=v.Array.prototype.forEach),"function"!=typeof v.CustomEvent){var i=function(e,t){var n=t||{bubbles:!1,cancelable:!1,detail:void 0},r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),r};i.prototype=v.Event.prototype,v.CustomEvent=i}if(!v.atob&&!v.btoa){var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";v.btoa=function(e){for(var t,n,r=String(e),i=0,a=o,s="";r.charAt(0|i)||(a="=",i%1);s+=a.charAt(63&t>>8-i%1*8)){if((n=r.charCodeAt(i+=3/4))>255)throw new E("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|n}return s},v.atob=function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new E("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,a=0,s="";r=t.charAt(a++);~r&&(n=i%4?64*n+r:r,i++%4)?s+=String.fromCharCode(255&n>>(-2*i&6)):0)r=o.indexOf(r);return s}}}(),Object(i.a)(this,g(v.navigator.userAgent))}));t.a=new b}).call(this,n(65),n(102))},13:function(e,t,n){"use strict";var r=n(24);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),r)}var o,a}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"lpad",value:function(e,t,n){var r=n||"0",i="".concat(e);return i.length>=t?i:new Array(t-i.length+1).join(r)+i}},{key:"trigger",value:function(e,t){if("createEvent"in document){var n=document.createEvent("HTMLEvents");n.initEvent(t,!1,!0),e.dispatchEvent(n)}else e.fireEvent("on".concat(t))}},{key:"openWindow",value:function(e,t,n){var i=r.a.normalizeUrl(e);window.open(i,t,n)}},{key:"isString",value:function(e){return"string"==typeof e}},{key:"isBlank",value:function(e){return!this.isString(e)||0===e.length}},{key:"arrayDeepEquals",value:function(e,t){if(!e||!t)return!1;if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}},{key:"setValueWithPath",value:function(e,t,n,r){var i=n.split(t);i.reduce((function(e,t,n){var o=e;return n<i.length-1?o[t]=o[t]||{}:o[t]=r,o[t]}),e)}},{key:"noop",value:function(){}},{key:"getObjectReference",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!e)return t;for(var n=t,r=e.split("."),i=0;i<r.length;i+=1)if(!(n=n[r[i]]))return;return n}},{key:"getFunctionReference",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{var r=e.split("."),i=r.pop(),o=this.getObjectReference(r.join("."),t),a=o[i];if("function"!=typeof a)return;return n?a.bind(o):a}catch(e){}}}])&&o(t.prototype,n),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=new a},14:function(e,t,n){"use strict";t.a={ACTIONS:{SEND:"send",SAVE:"save",CLOSE:"close"},CARD_STATE:{INVITED:"invited",OPENING:"opening",OPEN:"open",SUBMIT:"submit",CANCEL:"cancel",CLOSING:"closing",CLOSE:"close",ERROR:"error",SUBMIT_ERROR:"submit_error",SUBMIT_SUCCESS:"submit_success",EXPIRED:"expired"},CARD_TYPES:{SLIDING:"sliding",OVERLAY:"overlay",INLINE:"inline",SLIDINGPLUS:"slidingplus",CUSTOM:"custom"},CARD_ACTIONS:{ACCEPT:"accept",DECLINE:"decline",PREVIOUS:"previous",NEXT:"next",INIT:"init"},SERVICE_CHANNEL:{CHAT:"chat",MESSAGING:"messaging"},MESSENGER_TYPE:{STANDARD:"standard"},SECURE_CARD_HEADER_DELIM:";",SECURE_CARD_STORAGE_MODES:{INTERNAL:"internal",THIRD_PARTY:"third-party"},DEFAULT_PAGE_INDEX:0}},145:function(e,t,n){"use strict";var r=n(3),i=n(6),o=n(9),a=n(4),s=n(8),c=n(12),u=n(32),l=n(10),f=n(113);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===d(o)?o:String(o)),r)}var i,o}var y=["localStorage","sessionStorage"],m=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),-1===y.indexOf(t))throw new Error("WebStorage: ".concat(t," is not supported"));if(this._storeName=t,this._store=window[t],this._storageKey=n,!this.isStorageAvailable())throw new Error(i.a.ERROR_CODES.LOCALSTORAGE_UNAVAILABLE);this._storeExists()||this._initialize()}var t,n,d;return t=e,(n=[{key:"_storeExists",value:function(){return!!this._store.getItem(this._storageKey)}},{key:"_initialize",value:function(){var e={};e[i.a.LAST_UPDATED_TIME]=(new Date).getTime(),this._store.setItem(this._storageKey,u.a.encode(JSON.stringify(e)))}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.a.notEmpty(e,"WebStorage: set key");var a=this.getAll()||{};if(this._pollOldValue=a,o.a.isObject(t))a[e]||(a[e]={}),a[e]=Object(s.a)({},a[e],t);else if(o.a.isString(t)||o.a.isArray(t))a[e]=t;else{if(!o.a.isBoolean(t)&&!o.a.isNumber(t))throw new Error('WebStorage::set type-mismatch for "'.concat(t,'", expecting object, string, boolean, array or number'));a[e]=t.toString()}a[i.a.LAST_UPDATED_TIME]=(new Date).getTime(),n.tabId&&(a[i.a.SOURCE]=n.tabId),this._store.setItem(this._storageKey,u.a.encode(JSON.stringify(a)))}},{key:"getAll",value:function(){var e,t=this._store.getItem(this._storageKey);if(t)try{e=JSON.parse(u.a.decode(t))}catch(e){}return e}},{key:"get",value:function(e){return r.a.notEmpty(e,"WebStorage: key"),this.getAll()[e]}},{key:"remove",value:function(e,t){var n=this.getAll()||{};t&&t.length>0?n[e]=a.a.removeSpecificKeys(n[e],t):n[e]={},this._store.setItem(this._storageKey,u.a.encode(JSON.stringify(n)))}},{key:"addStorageListener",value:function(e){var t=this;c.a.ieVersion&&9!==c.a.isVersion?this._pollForStorage(e):window.addEventListener("storage",(function(n){if(n.key===t._storageKey)try{var r=JSON.parse(u.a.decode(n.oldValue))||{},i=JSON.parse(u.a.decode(n.newValue))||{};e({key:t._storageKey,oldValue:r,newValue:i})}catch(e){}}))}},{key:"_pollForStorage",value:function(e){var t=this;l.a.requestTimeout((function(){try{t._store.setItem("tfs-ie11","1"),t._store.removeItem("tfs-ie11"),JSON.stringify(t._pollOldValue)!==JSON.stringify(t.getAll())&&(e({newValue:t.getAll()||{},oldValue:t._pollOldValue||{},key:t._storageKey}),t._pollOldValue=t.getAll())}catch(e){}t._pollForStorage(e)}),500)}},{key:"isStorageAvailable",value:function(){return f.a[this._storeName]}}])&&p(t.prototype,n),d&&p(t,d),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=m},151:function(e,t,n){"use strict";t.a={BUCKETS:["a","b"],KEY_MAP:[{key:"chat.visitorSessionId",length:45,type:"string",short:"a",bucket:"a"},{key:"chat.stackName",length:1,type:"string",short:"b",bucket:"a"},{key:"chat.stackNodesStart",length:2,type:"number",short:"c",bucket:"a"},{key:"chat.stackNodesEnd",length:2,type:"number",short:"d",bucket:"a"},{key:"va.turnsId",length:36,type:"string",short:"e",bucket:"a"},{key:"va.noInput",short:"f",length:1,type:"boolean",bucket:"a"},{key:"va.poller",short:"g",length:1,type:"boolean",bucket:"a"},{key:"va.vaSurveyCompleted",length:1,type:"boolean",short:"h",bucket:"a"},{key:"messaging.brandUserId",length:36,type:"string",short:"i",bucket:"a"},{key:"cards.currentCardId",length:45,type:"string",short:"k",bucket:"a"},{key:"widgetLoaded",length:1,type:"boolean",short:"l",bucket:"a"},{key:"initialWorkflow",length:9,type:"string",short:"m",bucket:"a"},{key:"reload",length:1,type:"boolean",short:"n",bucket:"a"},{key:"displayMode",length:10,type:"string",short:"o",bucket:"a"},{key:"asid",length:3,type:"string",short:"p",bucket:"a"},{key:"appId",length:40,type:"string",short:"q",bucket:"a"},{key:"notificationOptIn",length:1,type:"boolean",short:"r",bucket:"a"},{key:"chat.interactionId",length:45,type:"string",short:"s",bucket:"a"},{key:"chat.authToken",length:45,type:"string",short:"t",bucket:"a"},{key:"app.context.sourceCat",length:80,type:"string",short:"u",bucket:"a"},{key:"messaging.interactionStatus",length:6,type:"string",short:"v",bucket:"a"},{key:"chat.surveyCompleted",length:1,type:"boolean",short:"w",bucket:"a"},{key:"vi",length:36,type:"string",short:"a",bucket:"b"},{key:"app.context.queue",length:80,type:"string",short:"b",bucket:"b"},{key:"app.context.accountId",length:40,type:"string",short:"c",bucket:"b"},{key:"app.context.appInteractionId",length:36,type:"string",short:"d",bucket:"b"},{key:"app.context.rc",length:40,type:"string",short:"e",bucket:"b"},{key:"app.context.sc",length:40,type:"string",short:"f",bucket:"b"},{key:"app.context.dockId",length:40,type:"string",short:"g",bucket:"b"},{key:"cards.submittedCards.0",length:45,type:"string",short:"h",bucket:"b"},{key:"cards.submittedCards.1",length:45,type:"string",short:"i",bucket:"b"}],STIMULI_KEYS:["currentCardId","submittedCards","surveyCompleted","turnsId","vaSurveyCompleted","visitorSessionId","interactionStatus","brandUserId"]}},152:function(e,t,n){e.exports=function(){"use strict";var e=Object.hasOwnProperty,t=Object.setPrototypeOf,n=Object.isFrozen,r=Object.getPrototypeOf,i=Object.getOwnPropertyDescriptor,o=Object.freeze,a=Object.seal,s=Object.create,c="undefined"!=typeof Reflect&&Reflect,u=c.apply,l=c.construct;u||(u=function(e,t,n){return e.apply(t,n)}),o||(o=function(e){return e}),a||(a=function(e){return e}),l||(l=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var f,d=_(Array.prototype.forEach),p=_(Array.prototype.pop),y=_(Array.prototype.push),m=_(String.prototype.toLowerCase),v=_(String.prototype.match),h=_(String.prototype.replace),g=_(String.prototype.indexOf),E=_(String.prototype.trim),b=_(RegExp.prototype.test),S=(f=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l(f,t)});function _(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return u(e,t,r)}}function T(e,r){t&&t(e,null);for(var i=r.length;i--;){var o=r[i];if("string"==typeof o){var a=m(o);a!==o&&(n(r)||(r[i]=a),o=a)}e[o]=!0}return e}function I(t){var n=s(null),r=void 0;for(r in t)u(e,t,[r])&&(n[r]=t[r]);return n}function O(e,t){for(;null!==e;){var n=i(e,t);if(n){if(n.get)return _(n.get);if("function"==typeof n.value)return _(n.value)}e=r(e)}return function(e){return null}}var A=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),w=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),C=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),N=o(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),R=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),k=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),D=o(["#text"]),L=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),P=o(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),M=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),j=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),x=a(/\{\{[\s\S]*|[\s\S]*\}\}/gm),F=a(/<%[\s\S]*|[\s\S]*%>/gm),U=a(/^data-[\-\w.\u00B7-\uFFFF]/),H=a(/^aria-[\-\w]+$/),B=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),G=a(/^(?:\w+script|data):/i),Y=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function W(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var K=function(){return"undefined"==typeof window?null:window},q=function(e,t){if("object"!==(void 0===e?"undefined":V(e))||"function"!=typeof e.createPolicy)return null;var n=null;t.currentScript&&t.currentScript.hasAttribute("data-tt-policy-suffix")&&(n=t.currentScript.getAttribute("data-tt-policy-suffix"));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e}})}catch(e){return null}};return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K(),n=function(t){return e(t)};if(n.version="2.3.4",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var r=t.document,i=t.document,a=t.DocumentFragment,s=t.HTMLTemplateElement,c=t.Node,u=t.Element,l=t.NodeFilter,f=t.NamedNodeMap,_=void 0===f?t.NamedNodeMap||t.MozNamedAttrMap:f,z=t.HTMLFormElement,X=t.DOMParser,Z=t.trustedTypes,J=u.prototype,Q=O(J,"cloneNode"),$=O(J,"nextSibling"),ee=O(J,"childNodes"),te=O(J,"parentNode");if("function"==typeof s){var ne=i.createElement("template");ne.content&&ne.content.ownerDocument&&(i=ne.content.ownerDocument)}var re=q(Z,r),ie=re&&je?re.createHTML(""):"",oe=i,ae=oe.implementation,se=oe.createNodeIterator,ce=oe.createDocumentFragment,ue=oe.getElementsByTagName,le=r.importNode,fe={};try{fe=I(i).documentMode?i.documentMode:{}}catch(e){}var de={};n.isSupported="function"==typeof te&&ae&&void 0!==ae.createHTMLDocument&&9!==fe;var pe=x,ye=F,me=U,ve=H,he=G,ge=Y,Ee=B,be=null,Se=T({},[].concat(W(A),W(w),W(C),W(R),W(D))),_e=null,Te=T({},[].concat(W(L),W(P),W(M),W(j))),Ie=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Oe=null,Ae=null,we=!0,Ce=!0,Ne=!1,Re=!1,ke=!1,De=!1,Le=!1,Pe=!1,Me=!1,je=!1,xe=!0,Fe=!0,Ue=!1,He={},Be=null,Ge=T({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ye=null,Ve=T({},["audio","video","img","source","image","track"]),We=null,Ke=T({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),qe="http://www.w3.org/1998/Math/MathML",ze="http://www.w3.org/2000/svg",Xe="http://www.w3.org/1999/xhtml",Ze=Xe,Je=!1,Qe=void 0,$e=["application/xhtml+xml","text/html"],et="text/html",tt=void 0,nt=null,rt=i.createElement("form"),it=function(e){return e instanceof RegExp||e instanceof Function},ot=function(e){nt&&nt===e||(e&&"object"===(void 0===e?"undefined":V(e))||(e={}),e=I(e),be="ALLOWED_TAGS"in e?T({},e.ALLOWED_TAGS):Se,_e="ALLOWED_ATTR"in e?T({},e.ALLOWED_ATTR):Te,We="ADD_URI_SAFE_ATTR"in e?T(I(Ke),e.ADD_URI_SAFE_ATTR):Ke,Ye="ADD_DATA_URI_TAGS"in e?T(I(Ve),e.ADD_DATA_URI_TAGS):Ve,Be="FORBID_CONTENTS"in e?T({},e.FORBID_CONTENTS):Ge,Oe="FORBID_TAGS"in e?T({},e.FORBID_TAGS):{},Ae="FORBID_ATTR"in e?T({},e.FORBID_ATTR):{},He="USE_PROFILES"in e&&e.USE_PROFILES,we=!1!==e.ALLOW_ARIA_ATTR,Ce=!1!==e.ALLOW_DATA_ATTR,Ne=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Re=e.SAFE_FOR_TEMPLATES||!1,ke=e.WHOLE_DOCUMENT||!1,Pe=e.RETURN_DOM||!1,Me=e.RETURN_DOM_FRAGMENT||!1,je=e.RETURN_TRUSTED_TYPE||!1,Le=e.FORCE_BODY||!1,xe=!1!==e.SANITIZE_DOM,Fe=!1!==e.KEEP_CONTENT,Ue=e.IN_PLACE||!1,Ee=e.ALLOWED_URI_REGEXP||Ee,Ze=e.NAMESPACE||Xe,e.CUSTOM_ELEMENT_HANDLING&&it(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ie.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&it(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ie.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Ie.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Qe=Qe=-1===$e.indexOf(e.PARSER_MEDIA_TYPE)?et:e.PARSER_MEDIA_TYPE,tt="application/xhtml+xml"===Qe?function(e){return e}:m,Re&&(Ce=!1),Me&&(Pe=!0),He&&(be=T({},[].concat(W(D))),_e=[],!0===He.html&&(T(be,A),T(_e,L)),!0===He.svg&&(T(be,w),T(_e,P),T(_e,j)),!0===He.svgFilters&&(T(be,C),T(_e,P),T(_e,j)),!0===He.mathMl&&(T(be,R),T(_e,M),T(_e,j))),e.ADD_TAGS&&(be===Se&&(be=I(be)),T(be,e.ADD_TAGS)),e.ADD_ATTR&&(_e===Te&&(_e=I(_e)),T(_e,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&T(We,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(Be===Ge&&(Be=I(Be)),T(Be,e.FORBID_CONTENTS)),Fe&&(be["#text"]=!0),ke&&T(be,["html","head","body"]),be.table&&(T(be,["tbody"]),delete Oe.tbody),o&&o(e),nt=e)},at=T({},["mi","mo","mn","ms","mtext"]),st=T({},["foreignobject","desc","title","annotation-xml"]),ct=T({},w);T(ct,C),T(ct,N);var ut=T({},R);T(ut,k);var lt=function(e){var t=te(e);t&&t.tagName||(t={namespaceURI:Xe,tagName:"template"});var n=m(e.tagName),r=m(t.tagName);if(e.namespaceURI===ze)return t.namespaceURI===Xe?"svg"===n:t.namespaceURI===qe?"svg"===n&&("annotation-xml"===r||at[r]):Boolean(ct[n]);if(e.namespaceURI===qe)return t.namespaceURI===Xe?"math"===n:t.namespaceURI===ze?"math"===n&&st[r]:Boolean(ut[n]);if(e.namespaceURI===Xe){if(t.namespaceURI===ze&&!st[r])return!1;if(t.namespaceURI===qe&&!at[r])return!1;var i=T({},["title","style","font","a","script"]);return!ut[n]&&(i[n]||!ct[n])}return!1},ft=function(e){y(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=ie}catch(t){e.remove()}}},dt=function(e,t){try{y(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){y(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!_e[e])if(Pe||Me)try{ft(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},pt=function(e){var t=void 0,n=void 0;if(Le)e="<remove></remove>"+e;else{var r=v(e,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===Qe&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var o=re?re.createHTML(e):e;if(Ze===Xe)try{t=(new X).parseFromString(o,Qe)}catch(e){}if(!t||!t.documentElement){t=ae.createDocument(Ze,"template",null);try{t.documentElement.innerHTML=Je?"":o}catch(e){}}var a=t.body||t.documentElement;return e&&n&&a.insertBefore(i.createTextNode(n),a.childNodes[0]||null),Ze===Xe?ue.call(t,ke?"html":"body")[0]:ke?t.documentElement:a},yt=function(e){return se.call(e.ownerDocument||e,e,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},mt=function(e){return e instanceof z&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof _)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore)},vt=function(e){return"object"===(void 0===c?"undefined":V(c))?e instanceof c:e&&"object"===(void 0===e?"undefined":V(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},ht=function(e,t,r){de[e]&&d(de[e],(function(e){e.call(n,t,r,nt)}))},gt=function(e){var t=void 0;if(ht("beforeSanitizeElements",e,null),mt(e))return ft(e),!0;if(v(e.nodeName,/[\u0080-\uFFFF]/))return ft(e),!0;var r=tt(e.nodeName);if(ht("uponSanitizeElement",e,{tagName:r,allowedTags:be}),!vt(e.firstElementChild)&&(!vt(e.content)||!vt(e.content.firstElementChild))&&b(/<[/\w]/g,e.innerHTML)&&b(/<[/\w]/g,e.textContent))return ft(e),!0;if("select"===r&&b(/<template/i,e.innerHTML))return ft(e),!0;if(!be[r]||Oe[r]){if(Fe&&!Be[r]){var i=te(e)||e.parentNode,o=ee(e)||e.childNodes;if(o&&i)for(var a=o.length-1;a>=0;--a)i.insertBefore(Q(o[a],!0),$(e))}if(!Oe[r]&&bt(r)){if(Ie.tagNameCheck instanceof RegExp&&b(Ie.tagNameCheck,r))return!1;if(Ie.tagNameCheck instanceof Function&&Ie.tagNameCheck(r))return!1}return ft(e),!0}return e instanceof u&&!lt(e)?(ft(e),!0):"noscript"!==r&&"noembed"!==r||!b(/<\/no(script|embed)/i,e.innerHTML)?(Re&&3===e.nodeType&&(t=e.textContent,t=h(t,pe," "),t=h(t,ye," "),e.textContent!==t&&(y(n.removed,{element:e.cloneNode()}),e.textContent=t)),ht("afterSanitizeElements",e,null),!1):(ft(e),!0)},Et=function(e,t,n){if(xe&&("id"===t||"name"===t)&&(n in i||n in rt))return!1;if(Ce&&!Ae[t]&&b(me,t));else if(we&&b(ve,t));else if(!_e[t]||Ae[t]){if(!(bt(e)&&(Ie.tagNameCheck instanceof RegExp&&b(Ie.tagNameCheck,e)||Ie.tagNameCheck instanceof Function&&Ie.tagNameCheck(e))&&(Ie.attributeNameCheck instanceof RegExp&&b(Ie.attributeNameCheck,t)||Ie.attributeNameCheck instanceof Function&&Ie.attributeNameCheck(t))||"is"===t&&Ie.allowCustomizedBuiltInElements&&(Ie.tagNameCheck instanceof RegExp&&b(Ie.tagNameCheck,n)||Ie.tagNameCheck instanceof Function&&Ie.tagNameCheck(n))))return!1}else if(We[t]);else if(b(Ee,h(n,ge,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==g(n,"data:")||!Ye[e])if(Ne&&!b(he,h(n,ge,"")));else if(n)return!1;return!0},bt=function(e){return e.indexOf("-")>0},St=function(e){var t=void 0,r=void 0,i=void 0,o=void 0;ht("beforeSanitizeAttributes",e,null);var a=e.attributes;if(a){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_e};for(o=a.length;o--;){var c=t=a[o],u=c.name,l=c.namespaceURI;if(r=E(t.value),i=tt(u),s.attrName=i,s.attrValue=r,s.keepAttr=!0,s.forceKeepAttr=void 0,ht("uponSanitizeAttribute",e,s),r=s.attrValue,!s.forceKeepAttr&&(dt(u,e),s.keepAttr))if(b(/\/>/i,r))dt(u,e);else{Re&&(r=h(r,pe," "),r=h(r,ye," "));var f=tt(e.nodeName);if(Et(f,i,r))try{l?e.setAttributeNS(l,u,r):e.setAttribute(u,r),p(n.removed)}catch(e){}}}ht("afterSanitizeAttributes",e,null)}},_t=function e(t){var n=void 0,r=yt(t);for(ht("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)ht("uponSanitizeShadowNode",n,null),gt(n)||(n.content instanceof a&&e(n.content),St(n));ht("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e,i){var o=void 0,s=void 0,u=void 0,l=void 0,f=void 0;if((Je=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!vt(e)){if("function"!=typeof e.toString)throw S("toString is not a function");if("string"!=typeof(e=e.toString()))throw S("dirty is not a string, aborting")}if(!n.isSupported){if("object"===V(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(vt(e))return t.toStaticHTML(e.outerHTML)}return e}if(De||ot(i),n.removed=[],"string"==typeof e&&(Ue=!1),Ue);else if(e instanceof c)1===(s=(o=pt("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?o=s:o.appendChild(s);else{if(!Pe&&!Re&&!ke&&-1===e.indexOf("<"))return re&&je?re.createHTML(e):e;if(!(o=pt(e)))return Pe?null:ie}o&&Le&&ft(o.firstChild);for(var d=yt(Ue?e:o);u=d.nextNode();)3===u.nodeType&&u===l||gt(u)||(u.content instanceof a&&_t(u.content),St(u),l=u);if(l=null,Ue)return e;if(Pe){if(Me)for(f=ce.call(o.ownerDocument);o.firstChild;)f.appendChild(o.firstChild);else f=o;return _e.shadowroot&&(f=le.call(r,f,!0)),f}var p=ke?o.outerHTML:o.innerHTML;return Re&&(p=h(p,pe," "),p=h(p,ye," ")),re&&je?re.createHTML(p):p},n.setConfig=function(e){ot(e),De=!0},n.clearConfig=function(){nt=null,De=!1},n.isValidAttribute=function(e,t,n){nt||ot({});var r=tt(e),i=tt(t);return Et(r,i,n)},n.addHook=function(e,t){"function"==typeof t&&(de[e]=de[e]||[],y(de[e],t))},n.removeHook=function(e){de[e]&&p(de[e])},n.removeHooks=function(e){de[e]&&(de[e]=[])},n.removeAllHooks=function(){de={}},n}()}()},153:function(e,t,n){"use strict";var r=n(16),i=n(3),o=n(18),a=n(4);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),r)}var i,o}var u=window,l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._chatConfig=t,this._trackingIdMap={}}var t,n,s;return t=e,(n=[{key:"check",value:function(e,t,n){this._makeServerCall(e,t,n)}},{key:"getTrackingId",value:function(e){return this._trackingIdMap[e]}},{key:"_makeServerCall",value:function(e,t,n){var r=this._getCallbackName("_tfs_"),i=this._chatConfig,s=i.overrideCaStatus,c=i.overrideQueue,l=e;c&&(l=c);var f=this._getResponseHandler(r,l,n);if(u[r]=f,a.a.isUndefinedOrNull(s))o.a.injectScript(this._getURL(r,l,t),(function(e){}),document,{id:r},3e4);else{var d={data:{caStatus:s}};!0===s&&(d.data.trackingId="DEBUG01$12345"),f(d)}}},{key:"_getCallbackName",value:function(e){return e+r.a.get(10)}},{key:"_getResponseHandler",value:function(e,t,n){var r=this;return function(i){var o,a="false";i&&i.data&&(i.data.caStatus&&(a=i.data.caStatus),(o=i.data.trackingId)&&(r._trackingIdMap[t]=o));var s=document.getElementById(e);s&&s.parentNode.removeChild(s);try{delete u[e]}catch(t){u[e]=void 0}n(a,{trackingId:o})}}},{key:"_getURL",value:function(e,t,n){i.a.notEmpty(e,"callback name"),i.a.notEmpty(t,"queue");var r=this._chatConfig,o=r.assistCAEndpoint,a=r.assistAccountId,s="".concat(o,"/rest/checkAvailability?"),c={queueId:t,accountId:a,jsonp:e};n&&(c.skillId=n);var u=this.getTrackingId(t);return u&&(c.trackingId=u),s+Object.keys(c).map((function(e){return"".concat(e,"=").concat(c[e])})).join("&")}}])&&c(t.prototype,n),s&&c(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}(),f=n(20),d=n(8),p=n(61),y=n(10),m=n(19);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===v(o)?o:String(o)),r)}var i,o}var g=f.a.STATE,E=[g.MAXIMIZED,g.MINIMIZED],b=window;function S(e,t,n,r){return e["".concat(e.device,".").concat(t,".").concat(n)]||e["".concat(t,".").concat(n)]||e["".concat(n)]||r}function _(e,t,n,r){var i=!1,o=y.a.requestInterval((function(){if(t()&&!i){var o=r-n;y.a.requestTimeout((function(){a()}),o),i=!0}e()}),n),a=function(){y.a.clearRequestInterval(o)};return{clear:a}}var T=function(){function e(t){var n=this,r=t.config,i=t.template,o=t.apis,a=t.supportHours;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._desiredState=r.state,this._inviteId=r.inviteId,this._caqueue=r.queue,this._caskill=r.skill,this._engaged=r.engaged,this._dockId=r.dockId,this._appInteractionId="",this._caTrueOnce=!1,this._caChecked=!1,this._stateChangedByAction=!1,this._caPoller=void 0,this._trackingId="",this._apis=o,this._ruleId=r.ruleId,this._appId=r.appId,this._tabVisibleOnTrigger=r.tabVisibleOnTrigger,this._trackAction(f.a.TRACK_INTERACTION.INVITE_REQUESTED),this._assistAvailability=new l(r.workflowConfig),this._invite=new i(r,(function(e,t){e.split("-").map((function(e){return n.stimulus(f.a.STIMULI_TYPE.ACTION,e,t)}))}),o.fifMessageSender),this._caMap={},Object.keys(g).map((function(e){var t=g[e];return n._caMap[t]=S(r,t,"caType",f.a.AVAILABILITY_CHECK.NONE),0})),this._supportHours=new p.a(a,this._caqueue),this._preCheckSupportHours=S(r,r.state,"preCheckSupportHours",!1),this._pollInterval=r.pollInterval,this._pollDuration=r.pollDuration,this._checkAndLogAfterHours(),this._requestStateUpdate()}var t,n,i;return t=e,(n=[{key:"_checkAndLogAfterHours",value:function(){this._supportHours.isWithinSupportHours()||this._track(f.a.EVENT.QUEUE_AFTER_HOURS,this._getInviteMetadata({}))}},{key:"_requestStateUpdate",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._caTrueOnce=!1,this._caChecked=!1,this._caType=this._caMap[this._desiredState],this._stopAvailabilityPoller(),this._pollInterval&&this._pollDuration&&(this._caPoller=_(this._invokeAvailabilityCheck.bind(this),(function(){return!e._engaged}),parseInt(this._pollInterval,10),parseInt(this._pollDuration,10))),t&&this._invokeAvailabilityCheck()}},{key:"_stopAvailabilityPoller",value:function(){this._caPoller&&this._caPoller.clear()}},{key:"_invokeAvailabilityCheck",value:function(){if(this._engaged)this.stimulus(f.a.STIMULI_TYPE.INTERACTION,!0);else if(!0!==this._preCheckSupportHours||this._supportHours.isWithinSupportHours()){switch(this._caType){case f.a.AVAILABILITY_CHECK.NONE:this.stimulus(f.a.STIMULI_TYPE.AVAILABILITY,!0,{});break;case f.a.AVAILABILITY_CHECK.REPEAT:this._checkAvailability();break;case f.a.AVAILABILITY_CHECK.ONCE:this._caChecked||this._checkAvailability();break;case f.a.AVAILABILITY_CHECK.TILL_AVAILABLE:this._caTrueOnce||this._checkAvailability()}this._caChecked=!0}else this.stimulus(f.a.STIMULI_TYPE.AVAILABILITY,!1,{})}},{key:"_trackAction",value:function(e){var t=this._state||this._desiredState;this._apis.trackInteraction({logLevel:m.a.LOG_LEVEL.INFO,message:m.a.LOG_EVENTS.USER_ACTION,logData:{action:e,inviteId:this._inviteId,appInteractionId:this._appInteractionId,state:t,tabVisibleOnTrigger:this._tabVisibleOnTrigger}},t===f.a.STATE.MAXIMIZED)}},{key:"stimulus",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="".concat(e,"_").concat(t);switch(i){case f.a.STIMULI.AGENT_AVAILABLE:if(!this._engaged){var o=!this._caTrueOnce&&!this._stateChangedByAction;this._stateChangedByAction=!1,this._setState(this._desiredState,o),this._trackingId=n.trackingId||"",this._caTrueOnce||(this._caTrueOnce=!0)}break;case f.a.STIMULI.AGENT_UNAVAILABLE:if(!this._engaged){var a=this._supportHours.isWithinSupportHours();a?(this._setState(g.BUSY),this._track(f.a.EVENT.CA_CHECK_FAIL,this._getInviteMetadata({}))):this._setState(g.OFFLINE)}break;case f.a.STIMULI.INTERACTION_STARTED:this._engaged=!0,this._setState(g.ENGAGED);break;case f.a.STIMULI.INTERACTION_ENDED:this._engaged=!1,this._requestStateUpdate();break;case f.a.STIMULI.INVITE_OFFERED:this._appInteractionId=r.a.uuid(),this._track(f.a.EVENT.INVITE_OFFERED,this._getInviteMetadata(n.event)),this._trackAction(f.a.TRACK_INTERACTION.INVITE_OFFERED);break;case f.a.STIMULI.INVITE_ACCEPTED:this._track(f.a.EVENT.INVITE_ACCEPTED,this._getInviteMetadata(n.event)),this._apis.startInteraction(this._getInviteMetadata(n.interaction)),this._trackAction(f.a.TRACK_INTERACTION.INVITE_ACCEPTED);break;case f.a.STIMULI.INVITE_DECLINED:this._track(f.a.EVENT.INVITE_DECLINED,this._getInviteMetadata(n.event)),this._trackAction(f.a.TRACK_INTERACTION.INVITE_DECLINED);break;case f.a.STIMULI.INVITE_IGNORED:this._track(f.a.EVENT.INVITE_IGNORED,this._getInviteMetadata(n.event)),this._trackAction(f.a.TRACK_INTERACTION.INVITE_IGNORED);break;case f.a.STIMULI.INVITE_REMOVED:this._apis.removeInvite(this.getInviteId());break;case f.a.STIMULI.INVITE_MINIMIZED:this._desiredState=f.a.STATE.MINIMIZED,this._state=void 0,this._engaged||(this._setState(g.MINIMIZED,!0),this._stateChangedByAction=!0),this._requestStateUpdate(!1)}}},{key:"getState",value:function(){return this._state}},{key:"getInviteId",value:function(){return this._inviteId}},{key:"_checkAvailability",value:function(){this._assistAvailability.check(this._caqueue,this._caskill,this.stimulus.bind(this,f.a.STIMULI_TYPE.AVAILABILITY)),this._apis.trackInteraction({logLevel:m.a.LOG_LEVEL.INFO,message:m.a.LOG_EVENTS.USER_ACTION,logData:{action:f.a.TRACK_INTERACTION.AVAILABILITY_CHECK}})}},{key:"_track",value:function(e,t){this._apis.logEvent({event:e,eventData:t})}},{key:"_getInviteMetadata",value:function(e){var t=Object(d.a)({},{queue:this._caqueue,ruleId:this._ruleId,state:this._state,appInteractionId:this._appInteractionId,triggerAppId:this._inviteId,inviteId:this._inviteId,trackingId:this._trackingId,appId:this._appId,dockId:this._dockId},e);return this._caskill&&!t.skill&&(t.skill=this._caskill),t}},{key:"_handleStateChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e;t.inviteId=this._inviteId;try{this._apis.onStateChange(t),b.dispatchEvent(new CustomEvent(f.a.STATE_CHANGE_EVENT,{detail:t}))}catch(e){}}},{key:"_setState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._invite&&this._state!==e){var n;try{n=this._invite.setState(e,t)}catch(t){var r=t.message||t;return void this._apis.trackInteraction({logLevel:m.a.LOG_LEVEL.INFO,message:m.a.LOG_EVENTS.SYSTEM_ERROR,logData:{action:f.a.TRACK_INTERACTION.INVITE_SET_STATE_ERROR,inviteId:this._inviteId,state:e,errorMsg:r,errorStack:t.stack}},!0)}this._state!==n&&this._handleStateChange({inviteState:n}),this._state=n}}},{key:"destructor",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!e&&E.indexOf(this._state)>=0)return!1;this._stopAvailabilityPoller();try{this._invite.destructor()}catch(e){}return this._invite=void 0,!0}}])&&h(t.prototype,n),i&&h(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),I=n(164),O=n(13),A=n(54),w=n(39);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==C(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===C(o)?o:String(o)),r)}var i,o}var R,k,D=!1,L=[];function P(e){for(var t=L,n=0;n<t.length;n+=1){var r=t[n];if(r&&r.getInviteId()===e)return{invite:r,index:n}}return{invite:void 0,index:-1}}function M(e,t){i.a.notEmpty(e,"inviteId");var n=P(e),r=n.invite,o=n.index;return i.a.assert(o>-1,"Invite doesn't exist"),!!r.destructor(t)&&(L[o]=void 0,!0)}var j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"init",value:function(e,t){D||(R=t,this._supportHours=e.supportHours,o.a.addStylesheet(f.a.LOADER_CSS_ID,f.a.LOADER_CSS),D=!0)}},{key:"triggerInvite",value:function(e,t){if(D&&t){var n=w.a.transformInvite(Object(d.a)({},t)),r=n.inviteId,i=n.state,o=P(r).invite;if(o){if(o.getState()===f.a.STATE.MAXIMIZED)return void R.trackInteraction({logLevel:m.a.LOG_LEVEL.INFO,message:m.a.LOG_EVENTS.SYSTEM_ERROR,logData:{action:f.a.TRACK_INTERACTION.INVITE_ALREADY_MAXIMIZED,inviteId:r}},!0);this.removeInvite(n)}var a,s=e.invites||[],c=w.a.transformInvite(function(e,t){var n=t.inviteId,r={},i={};r.engaged=k;for(var o=0;o<e.length;o+=1)if(e[o]&&e[o].inviteId===n){i=e[o];break}return Object(d.a)(r,i,t),r}(s,n)),u=A.a.documentHasFocus();c.queue||(c.queue=n.fallbackQueue||e.workflowConfig.assistQueue),c.appId=e.appId,c.device=R.device,c.workflowConfig=e.workflowConfig,c.tabVisibleOnTrigger=u;try{var l=I.a.getTemplate(c.template),p=e.supportHours||this._supportHours;if(R.disableBackgroundInvite&&i===f.a.STATE.MAXIMIZED&&!u)return void R.trackInteraction({logLevel:m.a.LOG_LEVEL.INFO,message:m.a.LOG_EVENTS.SYSTEM_ERROR,logData:{action:f.a.TRACK_INTERACTION.INVITE_PAGE_BACKGROUND}},!0);var y=new T({config:c,template:l,supportHours:p,apis:(a=O.a.noop,{startInteraction:R.startInteraction,removeInvite:M,logEvent:R.logEvent,fifMessageSender:R.fifMessageSender||a,onStateChange:R.onStateChange||a,trackInteraction:R.trackInteraction||a})});L.push(y)}catch(e){var v=e.message||e;R.trackInteraction({logLevel:m.a.LOG_LEVEL.INFO,message:m.a.LOG_EVENTS.SYSTEM_ERROR,logData:{action:f.a.TRACK_INTERACTION.INVITE_INITIALIZATION_ERROR,inviteId:r,state:i,errorMsg:v,errorStack:e.stack}},!0)}}}},{key:"setInteractionActive",value:function(e){var t;i.a.isBoolean(e,"setInteractionActive:active"),k=e,t=function(t){return t.stimulus(f.a.STIMULI_TYPE.INTERACTION,e)},L.forEach((function(e){return e&&t(e)}))}},{key:"removeInvite",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=w.a.transformInvite(Object(d.a)({},e)),n=t.inviteId,r=t.force;try{return M(n,r)}catch(e){return!1}}}])&&N(t.prototype,n),r&&N(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=new j},16:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===r(a)?a:String(a)),i)}var o,a}for(var o=window,a=[],s=0;s<256;s+=1)a.push((s+256).toString(16).substr(1).toLowerCase());var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"uuid",value:function(){var e=(o.crypto||o.msCrypto).getRandomValues(new Uint8Array(16));e[6]=15&e[6]|64,e[8]=63&e[8]|128;for(var t=[],n=0;n<e.length;n+=1)t[n]=a[e[n]];return"".concat(t[0]).concat(t[1]).concat(t[2]).concat(t[3],"-").concat(t[4]).concat(t[5],"-").concat(t[6]).concat(t[7],"-").concat(t[8]).concat(t[9],"-").concat(t[10]).concat(t[11]).concat(t[12]).concat(t[13]).concat(t[14]).concat(t[15])}},{key:"get",value:function(e){for(var t="abcdefghijklmnopqrstuvwxyz0123456789",n="",r=0,i=t.length;r<e;r+=1)n+=t.substr(0|Math.random()*i,1);return n}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=new c},164:function(e,t,n){"use strict";var r=n(230),i=n.n(r),o=n(152),a=n.n(o),s=n(20),c=n(30),u=n(18),l=n(10),f=n(85),d=n(8),p=n(3),y=n(9),m=n(59),v=n(13),h=n(23);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==g(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===g(o)?o:String(o)),r)}var i,o}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.touch=!1,this.action=!1,this.diffX=0,this.diffY=0,this.endX=0,this.endY=0,this.scroll=!1,this.sort=!1,this.startX=0,this.startY=0,this.swipe=!1,this._element=t,this._onEndBound=this.onEnd.bind(this),this._onMoveBound=this.onMove.bind(this),this._onKeyDownBound=this.onKeyDown.bind(this),this._onStartBound=this.onStart.bind(this),this._element.addEventListener("touchstart",this._onStartBound),this._element.addEventListener("mousedown",this._onStartBound),this._element.addEventListener("keydown",this._onKeyDownBound),this._element.addEventListener("touchmove",this._onMoveBound),this._element.addEventListener("touchend",this._onEndBound),this._element.addEventListener("touchcancel",this._onEndBound),this._onTap=v.a.noop,this._onSwipe=v.a.noop,this._onSwipeEnd=v.a.noop,this._onSort=v.a.noop,this._onSortEnd=v.a.noop,this._onSortGrab=v.a.noop}var t,n,r;return t=e,(n=[{key:"testTouch",value:function(e){if("touchstart"===e.type)this.touch=!0;else if(this.touch)return this.touch=!1,!1;return!0}},{key:"getCoord",value:function(e,t){return/touch/.test(e.type)?(e.originalEvent||e).changedTouches[0]["page".concat(t)]:e["page".concat(t)]}},{key:"onKeyDown",value:function(e){h.a.shouldHandleActivate(e)&&(e.preventDefault(),e.stopPropagation(),this._onTap())}},{key:"onStart",value:function(e){var t=this;this.testTouch(e)&&!this.action&&(this.action=!0,this.startX=this.getCoord(e,"X"),this.startY=this.getCoord(e,"Y"),this.diffX=0,this.diffY=0,this.sortTimer=l.a.requestTimeout((function(){t.sort=!0,t._onSortGrab()}),200),"mousedown"===e.type&&(document.addEventListener("mousemove",this._onMoveBound),document.addEventListener("mouseup",this._onEndBound)))}},{key:"onMove",value:function(e){this.action&&(this.endX=this.getCoord(e,"X"),this.endY=this.getCoord(e,"Y"),this.diffX=this.endX-this.startX,this.diffY=this.endY-this.startY,this.sort||this.swipe||this.scroll||(Math.abs(this.diffY)>10?this.scroll=!0:Math.abs(this.diffX)>7&&(this.swipe=!0)),this.swipe&&(e.preventDefault(),this._onSwipe({start:{x:this.startX,y:this.startY},end:{x:this.endX,y:this.endY}})),this.sort&&(e.preventDefault(),this._onSort({start:{x:this.startX,y:this.startY},end:{x:this.endX,y:this.endY}})),(Math.abs(this.diffX)>5||Math.abs(this.diffY)>5)&&l.a.clearRequestTimeout(this.sortTimer))}},{key:"onEnd",value:function(e){this.action&&(this.action=!1,this.swipe?this._onSwipeEnd():this.sort?this._onSortEnd():!this.scroll&&Math.abs(this.diffX)<5&&Math.abs(this.diffY)<5&&("touchend"===e.type&&e.preventDefault(),this._onTap()),this.swipe=!1,this.sort=!1,this.scroll=!1,l.a.clearRequestTimeout(this.sortTimer),"mouseup"===e.type&&(document.removeEventListener("mousemove",this._onMoveBound),document.removeEventListener("mouseup",this._onEndBound)))}},{key:"on",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.a.noop;switch(e){case"swipe":this._onSwipe=t;break;case"swipeend":this._onSwipeEnd=t;break;case"sort":this._onSort=t;break;case"sortend":this._onSortEnd=t;break;case"sortgrab":this._onSortGrab=t;break;case"tap":this._onTap=t}}},{key:"destroy",value:function(){this._element&&(this._element.removeEventListener("touchstart",this._onStartBound),this._element.removeEventListener("mousedown",this._onStartBound),this._element.removeEventListener("keydown",this._onKeyDownBound),this._element.removeEventListener("touchmove",this._onMoveBound),this._element.removeEventListener("touchend",this._onEndBound),this._element.removeEventListener("touchcancel",this._onEndBound))}}])&&E(t.prototype,n),r&&E(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),S=n(12);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function O(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function A(e,t,n){return(t=w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){var t=function(e,t){if("object"!==_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_(t)?t:String(t)}var C,N=document,R=/^tooltip(-(.+))?/;function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(e){if(Array.isArray(e))return e.map((function(e,n){return k(e,t,n)}));var r=N.createElement(t.tag),o="".concat(s.a.INVITE_PREFIX).concat(t.inviteId,"_");if(r.id="".concat(o).concat(t.name).concat(n),e.css&&u.a.setStyle(r,e.css,!0),e.text&&(r.innerHTML=a.a.sanitize(e.text)),e.tooltip&&R.test(e.action)){var c=e.action.match(R)[2]?e.action.match(R)[2].split("-"):["click","hover","focus"];new D(r,e.tooltip,r.id,c)}if(!0===e.autoFocus&&l.a.requestTimeout((function(){return r.focus()}),0),e.action&&t.signal&&!R.test(e.action)){var f=new b(r);f.on("tap",(function(){var n=e.action,r=e.queue,i=e.skill,o={event:{},interaction:{}};r&&(o.event.queue=r,o.interaction.queue=r),i&&(o.event.skill=i,o.interaction.skill=i),t.signal(n,o)}))}if(y.a.isObject(e.attributes)&&Object.keys(e.attributes).map((function(t){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return r.setAttribute(n,e.attributes[t]),0})),y.a.isArray(e.animate)&&e.animate.map((function(e){var t=e.property,n=e.unit,o=e.from,a=e.to,s=e.duration,c=e.easing;return i.a.animateCSS(r,t,n,parseInt(o,10),parseInt(a,10),parseInt(s,10),c),0})),y.a.isObject(e.audio)){var d=parseInt(e.audio.delay,10)||0,p=e.audio.name;m.a.register(p,e.audio),l.a.requestTimeout((function(){return m.a.play(p,!0)}),d)}return t.parent&&t.parent.appendChild(r),r}}var D=function(){function e(t,n,r,i){var o=this;T(this,e),this.element=t,this.config=n,this.inviteId=r,this.tooltipElement=void 0,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),i.forEach((function(e){switch(e){case"hover":o._handle("mouseover","mouseout");break;case"click":o._handle("click","focusout");break;case"focus":o._handle("focusin","focusout")}}))}return O(e,[{key:"_showTooltip",value:function(){if(!this.tooltipElement){var e=this.config,t=this.inviteId,n=k(e.container,{name:"tooltip_container",tag:"div",inviteId:t});k(e.before,{name:"tooltip_before",tag:"div",parent:n,inviteId:t}),k(e.content,{name:"tooltip_content",tag:"div",parent:n,inviteId:t}),k(e.after,{name:"tooltip_after",tag:"div",parent:n,inviteId:t}),this.tooltipElement=n,this.element.parentNode.appendChild(n)}}},{key:"_hideTooltip",value:function(){this.tooltipElement&&(this.tooltipElement.parentNode.removeChild(this.tooltipElement),this.tooltipElement=void 0)}},{key:"_handle",value:function(e,t){var n=this;this.element.addEventListener(e,(function(){return n._showTooltip()})),this.element.addEventListener(t,(function(){return n._hideTooltip()}))}}]),e}(),L=function(){function e(t,n,r){T(this,e),this._config=G.parseConfig(t),this._signal=n,C=r}return O(e,[{key:"_clearTimeout",value:function(){this._timeout&&l.a.clearRequestTimeout(this._timeout)}},{key:"setState",value:function(e,t){p.a.notEmpty(e,"GenericInviteTemplate: state"),p.a.isBoolean(t,"GenericInviteTemplate: reset"),this.destructor();var n,r=this._config,i=r.device;if(!(i&&r[i]&&r[i][e]))return e;n=r[i][e],this._stateConfig=n;var o=n.timeout||{},a=o.duration,m=o.action,v=void 0===m?"ignore-remove":m;a&&(this._timeout=l.a.requestTimeout(this._signal.bind(this,v,{}),a)),f.a.alter(!0===n.restrictViewport),this._invite=function(e,t,n){var r,i,o,a;if(e.frame&&e.frame.css&&C(c.a.IFRAME_POST_MESSAGE.SET_IFRAME_CSS,e.frame.css,!0),y.a.isObject(e.lightbox)&&y.a.isBoolean(e.lightbox.show)&&!0===e.lightbox.show){var f=s.a.LIGHTBOX_CSS;e.lightbox.css&&(f=Object(d.a)({},f,{css:e.lightbox.css})),o=k({},{name:"wrapper",tag:"div",inviteId:t}),k(f,{name:"lightbox",tag:"div",parent:o,inviteId:t}),i=k(e.container,{name:"container",tag:"div",parent:o,inviteId:t}),a=o}else i=k(e.container,{name:"container",tag:"div",inviteId:t}),a=i;k(e.viewBackground?Object(d.a)({},e.viewBackground,{attributes:A({},s.a.VIEW_ENABLED_ATTRIBUTE,!0)}):void 0,{name:"view",tag:"div",parent:i,inviteId:t}),k(e.decorative,{name:"decorative",tag:"div",parent:i,inviteId:t});var p=k(e.content,{name:"content",tag:"div",parent:i,inviteId:t});if(k(e.badge?Object(d.a)({},e.badge,{css:{display:"none"},attributes:(r={},A(r,s.a.BADGE_ENABLED_ATTRIBUTE,!0),A(r,s.a.BADGE_HINT_ATTRIBUTE,e.badge.hintText),r)}):void 0,{name:"badge",tag:"div",parent:p,inviteId:t,signal:n}),k(e.context,{name:"context",tag:"div",parent:p,inviteId:t}),k(e.action,{name:"action",tag:"button",parent:p,inviteId:t,signal:n}),!0===e.touchMove){var m,v=new b(a),h=function(){u.a.setStyle(a,e.container.css,!0)};v.on("sort",(function(e){var t=e.start,n=e.end,r=t.x-m.left,i=t.y-m.top,o=Math.max(Math.min(n.y-i,window.innerHeight-m.height),0),s=Math.max(Math.min(n.x-r,window.innerWidth-m.width),0);u.a.setStyle(a,{top:"".concat(o,"px"),left:"".concat(s,"px"),right:"auto",bottom:"auto",transform:"initial",position:"fixed",webkitTapHighlightColor:"rgba(0,0,0,0)"})})),v.on("sortgrab",(function(){m=a.getBoundingClientRect(),u.a.setStyle(a,{opacity:"0.8"}),u.a.addClass(a,"tfs-animate"),l.a.requestTimeout((function(){u.a.removeClass(a,"tfs-animate")}),500)})),v.on("sortend",(function(){m=void 0,u.a.setStyle(a,{opacity:"1"})})),window.addEventListener("orientationchange",h),S.a.isPhone||S.a.isTablet||window.addEventListener("resize",h)}return a}(n,r.inviteId,this._signal),!0===r.cssReset&&u.a.addClass(this._invite,"tfs-reset-css"),this._lastWidgetUpdate&&this.widgetUpdate(this._lastWidgetUpdate);var h=N.querySelector(n.selector||"body");return this._invite&&h&&h.insertBefore(this._invite,h.firstChild),t&&this._signal(s.a.ACTION.OFFER,{event:{state:e}}),e}},{key:"widgetUpdate",value:function(e){var t=e.unreadMessageCount,n=e.widgetView;if(this._invite){var r=this._invite.querySelector("[".concat(s.a.BADGE_ENABLED_ATTRIBUTE,"=true]"));if(r&&t){var i=r.getAttribute(s.a.BADGE_HINT_ATTRIBUTE);r.setAttribute("aria-label","".concat(t," ").concat(i)),r.textContent=t,r.style.display="block"}var o=this._invite.querySelector("[".concat(s.a.VIEW_ENABLED_ATTRIBUTE,"=true]"));if(o&&this._stateConfig&&this._stateConfig.viewBackground){this._viewBackground||(this._viewBackground=o.style.background);var a=this._stateConfig.viewBackground[n]||this._viewBackground;o.style.background=a}}else this._lastWidgetUpdate={unreadMessageCount:t,widgetView:n}}},{key:"destructor",value:function(){try{var e=this._invite;return e&&e.parentNode.removeChild(e),this._clearTimeout(),this._invite=void 0,f.a.alter(!1),!0}catch(e){return!1}}}]),e}();function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===P(o)?o:String(o)),r)}var i,o}var j=document;function x(e,t){var n=t.currentTarget.getAttribute(s.a.ACTION_ATTRIBUTE);n&&e(n,{})}var F=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=this._processConfig(t),this._signal=n;var r=this._config.device;p.a.notEmpty(r,"device");var i=this._config[r].selector;p.a.notEmpty(i,"Selector '".concat(i,"'")),this._element=j.querySelector(i),p.a.isObject(this._element,i),this._actionListener=x.bind(this,n),this._element.addEventListener("click",this._actionListener)}var t,n,r;return t=e,(n=[{key:"_processConfig",value:function(e){var t={};Object.keys(e).map((function(n){return v.a.setValueWithPath(t,".",n,e[n])}));var n=t[t.device];return t.classes=[],Object.keys(n).map((function(e){var r=n[e];return r&&r.class&&t.classes.push(r.class),e.class})),t}},{key:"_searchAndReplace",value:function(e){for(var t=this._config.classes,n=this._element,r=0;r<t.length;r+=1)t[r]&&u.a.hasClass(n,t[r])&&u.a.removeClass(n,t[r]);e&&u.a.addClass(n,e)}},{key:"setState",value:function(e,t){p.a.notEmpty(e,"ClientManagedInviteTemplate: state"),p.a.isBoolean(t,"ClientManagedInviteTemplate: reset");var n,r=this._config,i=r.device;if(!(i&&r[i]&&r[i][e]))return e;(n=r[i][e]).action?this._element.setAttribute(s.a.ACTION_ATTRIBUTE,n.action):this._element.removeAttribute(s.a.ACTION_ATTRIBUTE),t&&this._signal(s.a.ACTION.OFFER,{event:{state:e}});var o=this._config[i].eventName?this._config[i].eventName:s.a.CUSTOM_EVENT_NAME,a=new CustomEvent(o,{detail:{inviteState:e,inviteId:this._config.inviteId}});return this._element.dispatchEvent(a),this._searchAndReplace(n.class),e}},{key:"destructor",value:function(){this._element.removeEventListener("click",this._actionListener)}}])&&M(t.prototype,n),r&&M(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==U(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===U(o)?o:String(o)),r)}var i,o}var B=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._signal=n}var t,n,r;return t=e,(n=[{key:"setState",value:function(e,t){var n=this;return p.a.notEmpty(e,"DirectInviteTemplate: state"),p.a.isBoolean(t,"DirectInviteTemplate: reset"),t&&(this._signal("offer-accept",{event:{state:e}}),l.a.requestTimeout((function(){n._signal("remove")}),1)),e}},{key:"destructor",value:function(){}}])&&H(t.prototype,n),r&&H(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var G=t.a={parseConfig:function(e){var t={};return Object.keys(e).map((function(n){return function e(t,n,r){var i,o,a=t,s=!1,c=n.match(/(.+?)\.(.*)/);c?(i=c[1],o=c[2]):(i=n,s=!0);var u,l,f=i.match(/(.+?)\$(\d+)/);return f?(u=f[1],l=parseInt(f[2],10)):u=i,"number"==typeof l?(a[u]=a[u]||[],s?(a[u][l]=r,a):(a[u][l]=a[u][l]||{},e(a[u][l],o,r),a)):s?(a[n]=r,a):(a[u]=a[u]||{},e(a[u],o,r))}(t,n,e[n])})),t},getTemplate:function(e){return{generic:L,"client-managed":F,direct:B}[e]||v.a.getFunctionReference(e,void 0,!1)}}},17:function(e,t,n){"use strict";t.a={STYLE:"style",READY:"ready",INTERACTION:"interaction",CONFIG:"config",CONTEXT:"context",SYSTEMMSG:"systemmsg",DESTROY:"destroy",STATE_CHANGE:"state_change",TRACK_INTERACTION:"track_interaction",TRACK_EVENT:"track_event",TRACK:{PRE_CHAT_SHOWN:"prechatShown",PRE_CHAT_SUBMIT:"prechatSubmit",EXIT_SURVEY_SHOWN:"exitSurveyShown",EXIT_SURVEY_SUBMIT:"exitSurveySubmit",CARD_INVITED:"cardInvited",CARD_SHOWN:"cardAccepted",CARD_SUBMITTED:"cardSubmitted",QUEUE_AFTER_HOURS:"queueAfterHours"},CARD:"card",NOTIFICATION:"notification",COBROWSE:"cobrowse",EXTENSIBLE_LISTENERS:"extensible_listeners",DISPATCH_ACTION:"dispatchAction",SHOW_INPAGE_VIEW:"showInpageView",HIDE_INPAGE_VIEW:"hideInpageView",FRAME:{READY:"frame.ready",ERROR:"frame.error",DIMENSIONS:"frame.dimensions",CARD:{SUBMIT:"frame.card.submit",CONFIG:"frame.card.config",CANCEL:"frame.card.cancel",CLOSE:"frame.card.close",ERROR:"frame.card.error"}}}},18:function(e,t,n){"use strict";var r=n(6),i=n(12),o=n(3),a=n(10),s=n(8),c=n(4),u=n(24);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===l(o)?o:String(o)),r)}var i,o}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,d;return t=e,(n=[{key:"trim",value:function(e){return e.replace(/^\s+|\s+$/g,"")}},{key:"addStylesheet",value:function(e,t){o.a.notEmpty(e,"addStylesheet id"),o.a.notEmpty(t,"addStylesheet cssText");var n=this.createElement("style",{id:e,type:"text/css"});try{n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),document.head.appendChild(n)}catch(e){}return n}},{key:"get",value:function(e){return document.getElementById(e)}},{key:"createElement",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:document,o=i.createElement(e);return Object.keys(n).map((function(e){return o.setAttribute(e,n[e]),0})),"string"==typeof r?o.innerHTML=r:r.forEach((function(e){var n=e;n instanceof HTMLElement||(n=t.createElement(n.tag,n.attr,n.children,i)),o.appendChild(n)})),o}},{key:"removeElement",value:function(e){var t=e;"string"==typeof t&&(t=this.get(t)),t&&t.parentNode.removeChild(t)}},{key:"addClass",value:function(e,t){var n=this.trim(t),r=e;r&&("string"==typeof r&&(r=this.get(r)),r.classList?r.classList.add(n):r.className+=" ".concat(n))}},{key:"removeClass",value:function(e,t){var n=this.trim(t),r=e;r&&("string"==typeof r&&(r=this.get(r)),r.classList?r.classList.remove(t):r.className=r.className.replace(new RegExp("(^|\\b)(\\s*)".concat(n.split(" ").join("(\\s*)|(\\s*)"),"(\\s*)(\\b|$)"),"g")," "))}},{key:"hasClass",value:function(e,t){var n=this.trim(t),r=e;return"string"==typeof r&&(r=this.get(r)),r.classList?r.classList.contains(n):new RegExp("(^| )".concat(n,"( |$)"),"gi").test(r.className)}},{key:"hasSelector",value:function(e,t){return("string"==typeof e?this.createElement("div",void 0,e):e).querySelectorAll(t).length>0}},{key:"hide",value:function(e){var t=e;"string"==typeof t&&(t=this.get(t)),t.style.display="none"}},{key:"setAttr",value:function(e,t,n){e&&"string"==typeof t&&"string"==typeof n&&e.setAttribute(t,n)}},{key:"show",value:function(e){var t=e;"string"==typeof t&&(t=this.get(t)),t.style.display="block"}},{key:"getStyle",value:function(e,t){return window.getComputedStyle(e)[t]}},{key:"set",value:function(e,t,n){e&&"string"==typeof t&&"string"==typeof n&&(e.style[t]=n)}},{key:"setStyle",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e)switch(r&&e.setAttribute("style",""),l(t)){case"object":Object.keys(t).map((function(r){return Object.prototype.hasOwnProperty.call(t,r)&&n.set(e,r,t[r]),0}));break;case"string":e.setAttribute("style",e.style.cssText+t)}}},{key:"injectScript",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;o.a.notEmpty(e,"injectScript url"),o.a.assert(u.a.isAllowedSecureDomain(e),"insecure or non-247 domain, skipping."),o.a.isNotUndefinedOrNull(r.head,"document.head");var l=!1;if(this.get(i.id))n("success");else{var f,d=this.createElement("script",Object(s.a)({},i,{async:!0,src:e,type:"text/javascript"}));r.head.appendChild(d),d.onreadystatechange=function(){l||t.readyState&&"loaded"!==t.readyState&&"complete"!==t.readyState||(l=!0,f&&a.a.clearRequestTimeout(f),n("success"),d.onreadystatechange=null)},d.onload=function(){l||t.readyState&&"loaded"!==t.readyState&&"complete"!==t.readyState||(l=!0,f&&a.a.clearRequestTimeout(f),n("success"),d.onload=null)},d.onerror=function(){d.onreadystatechange=null,d.onload=null,f&&a.a.clearRequestTimeout(f),n("error")},c&&(f=a.a.requestTimeout((function(){d.onreadystatechange=null,d.onload=null,n("timeout")}),c))}}},{key:"textContent",value:function(e){return this.createElement("div",{},e).textContent}},{key:"reduceTags",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];o.a.isArray(t,"reduceTags allowedTags"),o.a.isObject(n,"reduceTags allowedAttributes"),o.a.isArray(r,"reduceTags purgeTags");var i=this.createElement("div",{},e),a=i.childNodes,s=[];if(a.length>0)for(var c=0;c<a.length;c+=1){var u=a[c],l=u.nodeName.toLowerCase();if((u=Array.isArray(n[l])?this.removeAttrs(u,n[l]):this.removeAttrs(u,[])).hasChildNodes()&&-1===r.indexOf(l))if(1===u.childNodes.length&&"#text"===u.childNodes[0].nodeName)t.indexOf(l)>-1?s.push(u.outerHTML):s.push(u.textContent);else{var f=u.innerHTML.indexOf("<"),d="";f>0&&(d=u.innerHTML.substr(0,f),u.innerHTML=u.innerHTML.substr(f));var p=u.innerHTML.lastIndexOf(">"),y="";y=u.innerHTML.substr(p+1),u.innerHTML=u.innerHTML.substr(0,p+1),t.indexOf(l)>-1?(u.innerHTML=d+this.reduceTags(u.innerHTML,t,n,r)+y,s.push(u.outerHTML)):s.push(d+this.reduceTags(u.innerHTML,t,n,r)+y)}else{var m=l;-1===r.indexOf(m)&&(t.indexOf(m)>-1?s.push(u.outerHTML):s.push(u.textContent))}}else s.push(e);return s.join(" ").trim()}},{key:"removeAttrs",value:function(e,t){var n=e;if(n.attributes)for(var r=n.attributes,i=r.length-1;i>=0;i-=1)-1===t.indexOf(r[i].name)&&n.removeAttribute(r[i].name);return n}},{key:"removeCSSProp",value:function(e,t){var n=e.match(/([^\s{]+?(?=:))(:\s)([^;]*);/g),r="";return n&&n.forEach((function(e){var n=e.split(":")[0];t.indexOf(n)>-1&&(r+=e)})),r}},{key:"fixAnchorTarget",value:function(e){var t,n=this.createElement("div",{},e),r=n.getElementsByTagName("a");if(r.length>0){for(var i=0;i<r.length;i+=1){var o=r[i].getAttribute("target");c.a.isEmptyOrNull(o)&&r[i].setAttribute("target","_blank")}t=n.innerHTML}else t=e;return t}},{key:"filterAttrOfTag",value:function(e,t,n){var r=this,i=this.createElement("div",{},e),o=i.getElementsByTagName(t),a=[],s=[].slice.call(o);return 0===s.length?{residueContent:i.innerHTML}:(s.map((function(e){var t={};return n.map((function(n){var r=c.a.isEmptyOrNull(e.getAttribute(n))?e.getAttribute(n):e.getAttribute(n).trim();return t[n]=c.a.isEmptyOrNull(e.dataset)||c.a.isEmptyOrNull(e.dataset[n])?r:e.dataset[n].trim(),0})),t.innerHTML=e.innerHTML.trim(),a.push(t),r.removeElement(e),0})),{residueContent:a.length>0&&""===i.textContent.trim()&&0===i.getElementsByTagName("img").length?void 0:i.innerHTML,tagAttributes:a})}},{key:"redrawElement",value:function(e,t,n){var r=this;return e?(this.setStyle(e,t),a.a.requestTimeout((function(){r.setStyle(e,n)}),40),0):0}},{key:"getOrientation",value:function(){switch(i.a.isMobileSafari||i.a.isIpad?Math.abs(window.orientation):screen.width>screen.height?90:0){case 90:return r.a.ORIENTATIONS.LANDSCAPE;default:return r.a.ORIENTATIONS.PORTRAIT}}},{key:"getScreenDimensions",value:function(){var e,t;return this.getOrientation()===r.a.ORIENTATIONS.PORTRAIT?(t=screen.height>screen.width?screen.height:screen.width,e=screen.height>screen.width?screen.width:screen.height):(t=screen.height>screen.width?screen.width:screen.height,e=screen.height>screen.width?screen.height:screen.width),{width:e,height:t}}},{key:"getKeyboardHeight",value:function(){var e=this.getOrientation(),t=Object.keys(r.a.ORIENTATIONS).reduce((function(t,n){return e===r.a.ORIENTATIONS[n]?n:t})),n=window.innerHeight;if(i.a.isIpad){var o=r.a.MAX_KEYBOARD_HEIGHT[t].filter((function(e){return n>=e.MIN_SCREEN_HEIGHT&&n<=e.MAX_SCREEN_HEIGHT}));if(o.length)return o[0].KEYBOARD_HEIGHT}return 0}},{key:"matches",value:function(e,t){for(var n=(e.document||e.ownerDocument).querySelectorAll(t),r=n.length;r>=0&&n.item(r)!==e;)r-=1;return r>-1}}])&&f(t.prototype,n),d&&f(t,d),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=new d},19:function(e,t,n){"use strict";t.a={LOG_LEVEL:{DEBUG:100,INFO:200,WARN:300,ERROR:400},LOG_LEVEL_STRING:{100:"DEBUG",200:"INFO",300:"WARN",400:"ERROR"},LOG_EVENTS:{SESSION_UPDATE:"user.session.update",USER_ACTION:"user.action",WINDOW_ERROR:"window.error",SYSTEM_DEBUG:"system.debug",SYSTEM_ERROR:"system.error",CONFIG_ERROR:"config.error",PAGE_INIT:"page.init"},MAX_ERROR_MESSAGE_LENGTH:100,TIME_FORMAT:"%F %T.%L %z"}},20:function(e,t,n){"use strict";t.a={INVITE_PREFIX:"tfs_invite_",STATE_CHANGE_EVENT:"stateChange",STATE:{MAXIMIZED:"maximized",MINIMIZED:"minimized",BUSY:"busy",OFFLINE:"offline",ENGAGED:"engaged"},STIMULI_TYPE:{AVAILABILITY:"availability",INTERACTION:"interaction",ACTION:"action"},ACTION:{OFFER:"offer",ACCEPT:"accept",DECLINE:"decline",IGNORE:"ignore",MINIMIZE:"minimize",REMOVE:"remove"},STIMULI:{AGENT_AVAILABLE:"availability_true",AGENT_UNAVAILABLE:"availability_false",INTERACTION_STARTED:"interaction_true",INTERACTION_ENDED:"interaction_false",INVITE_OFFERED:"action_offer",INVITE_ACCEPTED:"action_accept",INVITE_DECLINED:"action_decline",INVITE_IGNORED:"action_ignore",INVITE_MINIMIZED:"action_minimize",INVITE_REMOVED:"action_remove"},EVENT:{INVITE_OFFERED:"inviteOffered",INVITE_ACCEPTED:"inviteAccepted",INVITE_DECLINED:"inviteDeclined",INVITE_IGNORED:"inviteIgnored",QUEUE_AFTER_HOURS:"queueAfterHours",CA_CHECK_FAIL:"caCheckFail"},AVAILABILITY_CHECK:{NONE:"none",REPEAT:"repeat",ONCE:"once",TILL_AVAILABLE:"till_available"},TRACK_INTERACTION:{AVAILABILITY_CHECK:"AVAILABILITY_CHECK",INVITE_REQUESTED:"INVITE_REQUESTED",INVITE_OFFERED:"INVITE_OFFERED",INVITE_ACCEPTED:"INVITE_ACCEPTED",INVITE_DECLINED:"INVITE_DECLINED",INVITE_IGNORED:"INVITE_IGNORED",INVITE_ALREADY_MAXIMIZED:"INVITE_ALREADY_MAXIMIZED",INVITE_PAGE_BACKGROUND:"INVITE_PAGE_BACKGROUND",INVITE_INITIALIZATION_ERROR:"INVITE_INITIALIZATION_ERROR",INVITE_SET_STATE_ERROR:"INVITE_SET_STATE_ERROR"},ACTION_ATTRIBUTE:"data-tfs-action",QUEUE_ATTRIBUTE:"data-tfs-queue",SKILL_ATTRIBUTE:"data-tfs-skill",BADGE_ENABLED_ATTRIBUTE:"data-badge",BADGE_HINT_ATTRIBUTE:"data-hint",VIEW_ENABLED_ATTRIBUTE:"data-view",CUSTOM_EVENT_NAME:"tfsInviteStateChange",LIGHTBOX_CSS:{css:{backgroundColor:"#000000",position:"fixed",left:"0",top:"0",width:"100%",height:"100%",opacity:"0.85",zIndex:"2147483647"}},LOADER_CSS_ID:"tfs_loader_css",LOADER_CSS:".tfs-reset-css,.tfs-reset-css * {\n    background:none;\n    border:none;\n    bottom:auto;\n    clear:none;\n    cursor:default;\n    display:block;\n    float:none;\n    font-family:Arial, Helvetica, sans-serif;\n    font-size:medium;\n    font-style:normal;\n    font-weight:normal;\n    height:auto;\n    left:auto;\n    letter-spacing:normal;\n    line-height:normal;\n    margin:0;\n    max-height:none;\n    max-width:none;\n    min-height:0;\n    min-width:0;\n    overflow:visible;\n    outline:none;\n    position:static;\n    padding:0;\n    right:auto;\n    text-align:left;\n    text-decoration:none;\n    text-indent:0;\n    text-transform:none;\n    top:auto;\n    user-select:none;\n    -ms-user-select:none;\n    -webkit-user-select:none;\n    visibility:visible;\n    white-space:normal;\n    width:auto;\n    z-index:auto;\n    -webkit-tap-highlight-color: rgba(0,0,0,0);\n  } .tfs-animate {\n    -webkit-animation-duration: 500ms;\n    animation-duration: 500ms;\n    -webkit-animation-name: tfsRubberBand;\n    animation-name: tfsRubberBand;\n  } @-webkit-keyframes tfsRubberBand {\n  from {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n\n  30% {\n    -webkit-transform: scale3d(1.25, 0.75, 1);\n    transform: scale3d(1.25, 0.75, 1);\n  }\n\n  40% {\n    -webkit-transform: scale3d(0.75, 1.25, 1);\n    transform: scale3d(0.75, 1.25, 1);\n  }\n\n  50% {\n    -webkit-transform: scale3d(1.15, 0.85, 1);\n    transform: scale3d(1.15, 0.85, 1);\n  }\n\n  65% {\n    -webkit-transform: scale3d(0.95, 1.05, 1);\n    transform: scale3d(0.95, 1.05, 1);\n  }\n\n  75% {\n    -webkit-transform: scale3d(1.05, 0.95, 1);\n    transform: scale3d(1.05, 0.95, 1);\n  }\n\n  to {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n}\n\n@keyframes tfsRubberBand {\n  from {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n\n  30% {\n    -webkit-transform: scale3d(1.25, 0.75, 1);\n    transform: scale3d(1.25, 0.75, 1);\n  }\n\n  40% {\n    -webkit-transform: scale3d(0.75, 1.25, 1);\n    transform: scale3d(0.75, 1.25, 1);\n  }\n\n  50% {\n    -webkit-transform: scale3d(1.15, 0.85, 1);\n    transform: scale3d(1.15, 0.85, 1);\n  }\n\n  65% {\n    -webkit-transform: scale3d(0.95, 1.05, 1);\n    transform: scale3d(0.95, 1.05, 1);\n  }\n\n  75% {\n    -webkit-transform: scale3d(1.05, 0.95, 1);\n    transform: scale3d(1.05, 0.95, 1);\n  }\n\n  to {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n}"}},207:function(e,t,n){"use strict";var r=n(13);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),r)}var o,a}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"getTimezoneString",value:function(){var e=(new Date).getTimezoneOffset(),t=Math.floor,n=Math.abs;return"GMT ".concat(e<0?"+":"-").concat(t(n(e)/60),":").concat(n(e)%60)}},{key:"formatDate",value:function(e){var t=e.getFullYear(),n=r.a.lpad(e.getMonth()+1,2),i=r.a.lpad(e.getDate(),2),o=r.a.lpad(e.getHours(),2),a=r.a.lpad(e.getMinutes(),2),s=r.a.lpad(e.getSeconds(),2),c=r.a.lpad(e.getMilliseconds(),3),u=e.getTimezoneOffset(),l=u>0?"-":"+",f=r.a.lpad(Math.floor(Math.abs(u)/60),2),d=r.a.lpad(Math.abs(u)%60,2),p="".concat(l).concat(f).concat(d);return"".concat(t,"-").concat(n,"-").concat(i," ").concat(o,":").concat(a,":").concat(s,".").concat(c," ").concat(p)}}])&&o(t.prototype,n),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=new a},22:function(e,t,n){"use strict";var r=n(8),i=n(4);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),r)}var i,a}function s(e){return{type:"REFRESH_CONTEXT",context:e}}var c={chat:["visitorSessionId","interactionId"],va:["turnsId"]},u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialContext={},this.queuedContext=void 0}var t,n,o;return t=e,(n=[{key:"_listenChange",value:function(e){var t=this,n={};Object.keys(c).forEach((function(r){c[r].forEach((function(i){t.props[r]&&e[i]!==t.props[r][i]&&(n[i]=t.props[r][i])}))})),Object.keys(n).length>0&&this.refreshContext(n)}},{key:"subscribe",value:function(e){var t=this;this.store=e,this.store.subscribe((function(){var e=i.a.get(["props"],t,void 0),n=i.a.get(["app","context"],e,{});t.props=t.store.getState(),e&&e.controller.performStateSync&&!t.props.controller.performStateSync&&"REFRESH_CONTEXT"!==e.logger.actionType&&t.refreshContext(),t._listenChange(n)}))}},{key:"getContext",value:function(){return this.store&&this.props?this.props.app.context:this.initialContext}},{key:"getChatAuthToken",value:function(){return i.a.get(["props","chat","authToken"],this,void 0)}},{key:"refreshContext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this.queuedContext||i.a.get(["props","app","context"],this,this.initialContext),o=Object(r.a)({},n,e),a=i.a.get(["props","controller","performStateSync"],this,!1);this.store?a?this.queuedContext=o:(this.queuedContext=void 0,this.store.dispatch(s(o))):this.initialContext=o,t()}}])&&a(t.prototype,n),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=new u},228:function(e,t){function n(e){return e&&e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return e}function i(e,t){const i=(t=t||{}).delimiter||".",o=t.maxDepth,a=t.transformKey||r,s={};return function e(r,c,u){u=u||1,Object.keys(r).forEach((function(l){const f=r[l],d=t.safe&&Array.isArray(f),p=Object.prototype.toString.call(f),y=n(f),m="[object Object]"===p||"[object Array]"===p,v=c?c+i+a(l):a(l);if(!d&&!y&&m&&Object.keys(f).length&&(!t.maxDepth||u<o))return e(f,v,u+1);s[v]=f}))}(e),s}e.exports=i,i.flatten=i,i.unflatten=function e(t,o){const a=(o=o||{}).delimiter||".",s=o.overwrite||!1,c=o.transformKey||r,u={};if(n(t)||"[object Object]"!==Object.prototype.toString.call(t))return t;function l(e){const t=Number(e);return isNaN(t)||-1!==e.indexOf(".")||o.object?e:t}return t=Object.keys(t).reduce((function(e,n){const r=Object.prototype.toString.call(t[n]);return!("[object Object]"===r||"[object Array]"===r)||function(e){const t=Object.prototype.toString.call(e),n="[object Array]"===t,r="[object Object]"===t;if(!e)return!0;if(n)return!e.length;if(r)return!Object.keys(e).length}(t[n])?(e[n]=t[n],e):function(e,t,n){return Object.keys(n).reduce((function(t,r){return t[e+a+r]=n[r],t}),t)}(n,e,i(t[n],o))}),{}),Object.keys(t).forEach((function(n){const r=n.split(a).map(c);let i=l(r.shift()),f=l(r[0]),d=u;for(;void 0!==f;){if("__proto__"===i)return;const e=Object.prototype.toString.call(d[i]),t="[object Object]"===e||"[object Array]"===e;if(!s&&!t&&void 0!==d[i])return;(s&&!t||!s&&null==d[i])&&(d[i]="number"!=typeof f||o.object?{}:[]),d=d[i],r.length>0&&(i=l(r.shift()),f=l(r[0]))}d[i]=e(t[n],o)})),u}},229:function(e,t,n){"use strict";var r=n(3),i=n(4),o=n(10);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),r)}var i,o}var c=window,u=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.a.isNotUndefinedOrNull(t.targetOrigin,"targetOrigin"),r.a.isNotUndefinedOrNull(t.destinationWindow,"destinationWindow"),r.a.isNotUndefinedOrNull(t.listener,"listener"),this._targetOrigin=t.targetOrigin,this._destinationWindow=t.destinationWindow,this._listener=t.listener,c.addEventListener("message",(function(e){return n._listener(e)}),!1)}var t,n,a;return t=e,(n=[{key:"sendMessage",value:function(e){var t=this;i.a.isUndefinedOrNull(e)||o.a.requestTimeout((function(){t._destinationWindow.postMessage(e,t._targetOrigin)}),1)}}])&&s(t.prototype,n),a&&s(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=u},23:function(e,t,n){"use strict";var r=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),r)}var o,a}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"shiftKey",value:function(e){return!!e.shiftKey}},{key:"ctrlKey",value:function(e){return!!e.ctrlKey}},{key:"altKey",value:function(e){return!!e.altKey}},{key:"shouldHandleActivate",value:function(e){return this.shouldHandle(e,[13,32])}},{key:"shouldHandleCancel",value:function(e){return this.shouldHandle(e,[27])}},{key:"shouldHandleFirst",value:function(e){return this.shouldHandle(e,[36])}},{key:"shouldHandleLast",value:function(e){return this.shouldHandle(e,[35])}},{key:"shouldHandlePrev",value:function(e){return this.shouldHandle(e,[38,37])}},{key:"shouldHandleNext",value:function(e){return this.shouldHandle(e,[40,39])}},{key:"shouldHandle",value:function(e,t){return r.a.isObject(e),!(this.shiftKey(e)||this.altKey(e)||this.ctrlKey(e))&&t.indexOf(e.keyCode)>-1&&(e.preventDefault(),e.stopPropagation(),!0)}},{key:"suppressKeyDown",value:function(e){return r.a.isObject(e),32!==e.keyCode||"DIV"!==e.target.nodeName||(e.preventDefault(),!1)}}])&&o(t.prototype,n),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=new a},230:function(e,t,n){var r,i;i=this,void 0===(r=function(e){!function(e){e.animate=function(e,n,r,i,o,a){if("number"==typeof e&&"number"==typeof n&&"number"==typeof r&&"function"==typeof i){"string"==typeof o&&t[o]&&(o=t[o]),"function"!=typeof o&&(o=t.linear),"function"!=typeof a&&(a=function(){});var s=window.requestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},c=!1,u=n-e;i(e);var l=window.performance&&window.performance.now?window.performance.now():+new Date;return s((function t(f){if(!c){var d=(f||+new Date)-l;d>=0&&i(o(d,e,u,r)),d>=0&&d>=r?(i(n),a()):s(t)}})),{cancel:function(){c=!0}}}},e.animateCSS=function(t,n,r,i,o,a,s,c){return e.animate(i,o,a,(function(e){t.style[n]=e+r}),s,c)},e.cancel=function(e){e&&e.cancel()};var t=e.easings={};t.linear=function(e,t,n,r){return n*e/r+t},t.easeInQuad=function(e,t,n,r){return n*(e/=r)*e+t},t.easeOutQuad=function(e,t,n,r){return-n*(e/=r)*(e-2)+t},t.easeInOutQuad=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},t.easeInCubic=function(e,t,n,r){return n*(e/=r)*e*e+t},t.easeOutCubic=function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t},t.easeInOutCubic=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},t.easeInQuart=function(e,t,n,r){return n*(e/=r)*e*e*e+t},t.easeOutQuart=function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},t.easeInOutQuart=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},t.easeInQuint=function(e,t,n,r){return n*(e/=r)*e*e*e*e+t},t.easeOutQuint=function(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t},t.easeInOutQuint=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},t.easeInSine=function(e,t,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+t},t.easeOutSine=function(e,t,n,r){return n*Math.sin(e/r*(Math.PI/2))+t},t.easeInOutSine=function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t},t.easeInExpo=function(e,t,n,r){return 0==e?t:n*Math.pow(2,10*(e/r-1))+t},t.easeOutExpo=function(e,t,n,r){return e==r?t+n:n*(1-Math.pow(2,-10*e/r))+t},t.easeInOutExpo=function(e,t,n,r){return 0==e?t:e==r?t+n:(e/=r/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(2-Math.pow(2,-10*--e))+t},t.easeInCirc=function(e,t,n,r){return-n*(Math.sqrt(1-(e/=r)*e)-1)+t},t.easeOutCirc=function(e,t,n,r){return n*Math.sqrt(1-(e=e/r-1)*e)+t},t.easeInOutCirc=function(e,t,n,r){return(e/=r/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},t.easeInElastic=function(e,t,n,r){var i=0,o=n;if(0==e)return t;if(1==(e/=r))return t+n;if(i||(i=.3*r),o<Math.abs(n)){o=n;var a=i/4}else a=i/(2*Math.PI)*Math.asin(n/o);return-o*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/i)+t},t.easeOutElastic=function(e,t,n,r){var i=0,o=n;if(0==e)return t;if(1==(e/=r))return t+n;if(i||(i=.3*r),o<Math.abs(n)){o=n;var a=i/4}else a=i/(2*Math.PI)*Math.asin(n/o);return o*Math.pow(2,-10*e)*Math.sin((e*r-a)*(2*Math.PI)/i)+n+t},t.easeInOutElastic=function(e,t,n,r){var i=0,o=n;if(0==e)return t;if(2==(e/=r/2))return t+n;if(i||(i=r*(.3*1.5)),o<Math.abs(n)){o=n;var a=i/4}else a=i/(2*Math.PI)*Math.asin(n/o);return e<1?o*Math.pow(2,10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/i)*-.5+t:o*Math.pow(2,-10*(e-=1))*Math.sin((e*r-a)*(2*Math.PI)/i)*.5+n+t},t.easeInBack=function(e,t,n,r,i){return null==i&&(i=1.70158),n*(e/=r)*e*((i+1)*e-i)+t},t.easeOutBack=function(e,t,n,r,i){return null==i&&(i=1.70158),n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},t.easeInOutBack=function(e,t,n,r,i){return null==i&&(i=1.70158),(e/=r/2)<1?n/2*(e*e*((1+(i*=1.525))*e-i))+t:n/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},t.easeInBounce=function(e,n,r,i){return r-t.easeOutBounce(i-e,0,r,i)+n},t.easeOutBounce=function(e,t,n,r){return(e/=r)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},t.easeInOutBounce=function(e,n,r,i){return e<i/2?.5*t.easeInBounce(2*e,0,r,i)+n:.5*t.easeOutBounce(2*e-i,0,r,i)+.5*r+n}}(i.TinyAnimate=e)}.apply(t,[t]))||(e.exports=r)},231:function(e,t,n){"use strict";t.a=function(){var e,t=!1,n=[1];try{e=n.map((function(e){return e+1})),t=n[0]+1===e[0]}catch(e){}return t}()},232:function(e,t,n){"use strict";t.a=function(){var e=!1;try{e="a"===Object.keys({a:1})[0]}catch(e){}return e}()},233:function(e,t,n){"use strict";t.a=function(){var e=!1,t=[1],n=[];try{t.forEach((function(e,t){n[t]=e+1})),e=t[0]+1===n[0]}catch(e){}return e}()},234:function(e,t,n){"use strict";t.a=function(){var e,t=!1;try{t=0===(e=["k0","k1","k2"].reduce((function(e,t,n){return e[t]=n,e}),{})).k0&&1===e.k1&&2===e.k2}catch(e){}return t}()},235:function(e,t,n){"use strict";var r=window;t.a=function(){var e=!1;try{var t=new Uint8Array(16);e=t===(r.crypto||r.msCrypto).getRandomValues(t)}catch(e){}return e}()},24:function(e,t,n){"use strict";var r=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),r)}var o,a}var a=/^([a-z0-9.+-]+:)/i,s=/(https?:)\/\/([^/]+)(\/.*)*$/i,c=/(https?:\/\/[^/]+)(?:\/.+)*$/i,u=/^\s*$/,l=/\/(?!.*\/).*/,f=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,d=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i,p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"normalizeUrl",value:function(e){r.a.notEmpty(e,"url");var t=window.location;return a.test(e)?e:/^\/\/.+/.test(e)?t.protocol+e:/^\/.+/.test(e)?t.origin+e:t.origin+t.pathname.replace(/\/[^/]+$/,"/")+e}},{key:"getOriginFromUrl",value:function(e){var t;if(r.a.assert(e,"url"),e.protocol&&e.hostname){if(!(t=e.origin)){var n=e.port,i="";n&&"80"!==n&&"443"!==n&&(i=":".concat(n)),t="".concat(e.protocol,"//").concat(e.hostname).concat(i)}}else r.a.notEmpty(e,"url"),t=this.normalizeUrl(e).replace(c,"$1");return t}},{key:"formatUrl",value:function(e){r.a.isObject(e,"urlObj"),r.a.notEmpty(e.origin,"urlObj.origin");var t=[e.origin];return e.pathname&&t.push(e.pathname),e.search&&t.push(e.search),e.hash&&t.push(e.hash),t.join("")}},{key:"parseUrl",value:function(e){var t=this;r.a.notEmpty(e,"url");var n=this.normalizeUrl(e),i=s.exec(n);if(!i)return{};var o=i[1],a=i[2],c=a.split(":");if(u.test(c[0]))return{};if(this.sanitizeUrl(n)!==n)return{};var f,d="",p="",y="";if(i[3]){var m=i[3].split("?");if(m.length>1)y=m[0],f=m[1].split("#"),d="?".concat(f[0]),f.length>1&&(p="#".concat(f[1]));else{var v=i[3].split("#");y=v[0],v.length>1&&(p="#".concat(v[1]))}}var h=function(e){return e},g=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"&",o=arguments.length>4?arguments[4]:void 0;r.a.isObject(n,"params"),r.a.assert(void 0===o||"boolean"==typeof o,"invalid encodeParams value");var a=o?encodeURIComponent:h,s=[];return e.length&&s.push(e.substring(1)),Object.keys(n).map((function(e){return s.push("".concat(e,"=").concat(void 0===e?"":a(n[e])))})),t+s.join(i)},E={protocol:o,host:a,hostname:c[0],port:c[1]?c[1]:"",origin:"".concat(o,"//").concat(a),pathname:y,search:d,hash:p,href:n,replaceResource:function(e){if(l.test(E.pathname)){var n=l.exec(E.pathname)[0];E.pathname=E.pathname.replace(n,"/".concat(e))}return E.href=t.formatUrl(E),E},secure:function(){var e=/http:/i;return E.origin=E.origin.replace(e,"https:"),E.protocol=E.protocol.replace(e,"https:"),E.href=E.href.replace(e,"https:"),E},appendToHash:function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return E.hash=g(E.hash,"#",e,n,r),E.href=t.formatUrl(E),E},appendToSearch:function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return E.search=g(E.search,"?",e,n,r),E.href=t.formatUrl(E),E}};return E}},{key:"parseUrlParams",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"?";r.a.notEmpty(e,"url"),r.a.assert(void 0===t||"?"===t||"#"===t,"invalid separator value");var n,i,o,a,s,c={},u=e.split(t);if(u.length>2&&(u[1]=u.splice(1,u.length-1).join(t)),u.length>1)for(n=u[1].split("&"),o=0;o<n.length;o+=1)a=(i=n[o].split("="))[0],i.splice(0,1),s=i.join("")||null,c[a]=decodeURIComponent(s);return c}},{key:"sanitizeUrl",value:function(e){return"null"===e||0===e.length||"about:blank"===e?"about:blank":e.match(f)||e.match(d)?e:"unsafe:".concat(e)}},{key:"isAllowedSecureDomain",value:function(e){var t=!1,n="",r=new URL(this.normalizeUrl(e));return r&&(n=r.hostname),(["static.cdn-apple.com","d1af033869koo7.cloudfront.net","d2j8jkom7xmn9n.cloudfront.net"].indexOf(n)>-1||"247-inc.net"===n.split(/\./).slice(-2).join("."))&&(t=!0),t}}])&&o(t.prototype,n),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=new p},27:function(e,t,n){"use strict";var r=n(3),i=n(76),o=n(6),a=n(8),s=n(45),c=n(39),u=n(22),l={PRE_RENDER_LOADING:"Loading…",PRE_RENDER_CLOSE:"Close",PRE_RENDER_TIMEOUT:"Still loading, but taking longer than usual…",PRE_RENDER_FAILED_TITLE:"Loading failed",PRE_RENDER_FAILED_DESC:"Something went wrong. Make sure your Internet is up and running and reload this page.",ARIA_DIALOG_LABEL:"Chat Window"};function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}var y,m,v=new s.a,h={},g={},E=o.a.DEFAULT_CONFIG;function b(e){return e===o.a.DEFAULT_CONFIG?E:e}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=this.get(e),i=r.appId;this.update(i,t),n({appId:i})}function _(e){var t,n,r,o,s=e;return s.i18n.locale=("auto"!==(t=s.i18n.locale)?t:document.documentElement.lang?document.documentElement.lang:"undefined"==typeof navigator?"en":navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||"en").toLowerCase().split("-")[0],"auto"!==s.i18n.locale&&(s.i18n.uiStrings=Object(a.a)({},s.i18n.uiStrings,(n={},r=s.i18n.locale,o={},(r=p(r))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n))),Object.keys(s.i18n.uiStrings).forEach((function(e){s.i18n.uiStrings[e]=Object(a.a)({},l,s.i18n.uiStrings[e])})),0===s.supportHours.length&&(s.supportHours=i.a.supportHours),s}function T(e,t,n){var i=function(e){var t;if(r.a.notEmpty(e,"appId"),m)t="".concat(m.baseUrl,"/v1/frontends-console/clients/").concat(m.clientId,"/accounts/").concat(m.accountId,"/applications/published/").concat(e,"?environment=").concat(m.env);else{if(y.configroot)t=y.configroot;else{var n=y.key;t="".concat(y.origin,"/").concat(o.a.CONTENT_PATH,"/").concat(n)}t+="/".concat(e,"/").concat(o.a.UDE_CONFIG_JSON)}return t}(e);v.makeRequest("GET",i,void 0,void 0,(function(e){var n;try{n=JSON.parse(e),t(void 0,n)}catch(e){t({url:i,errorMsg:e.message,errorStack:e.stack})}}),(function(e){return t(e)}),void 0,void 0,void 0,n)}var I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,(n=[{key:"init",value:function(e){if(y=Object(a.a)({},e.metaData),e.v2&&!0===e.v2.enabled){var t=e.metaData.key.split("-v1-001")[0];(m=e.v2).clientId=t,m.accountId=t,void 0===m.env&&(m.env=y.origin.indexOf("d1af033869koo7.cloudfront.net")>0?"live":"test"),r.a.assert(/^https:\/\/(staging\.)?api\.(cloud\.)?247-inc\.net$/.test(m.baseUrl),"v2Config unsupported baseUrl"),r.a.assert("live"===m.env||"test"===m.env,"v2Config unsupported env")}}},{key:"get",value:function(e){var t=h[b(e)];return t?Object(a.a)({},t):void 0}},{key:"set",value:function(e){var t=c.a.transform(e),n=_(Object(a.a)({},i.a,t)),r=n.appId;h[r]=n,g[r]=Object(a.a)({},h[r])}},{key:"reset",value:function(e){var t=b(e);h[t]=g[t]}},{key:"update",value:function(e,t){var n=b(e),r=h[n];if(r){var i=_(Object(a.a)(r,t));h[n]=i}}},{key:"fetch",value:function(e,t,n,r){var i=this,a=e||o.a.DEFAULT_CONFIG;this.get(a)?S.call(this,a,t,n):T(a,(function(e,r){e?n({err:e}):(i.set(r),a===o.a.DEFAULT_CONFIG&&r.appId&&(E=r.appId),S.call(i,a,t,n))}),r)}},{key:"requestConfig",value:function(e,t,n,r,i,a){var s=this,l=t;t||(l=o.a.DEFAULT_CONFIG);var f=y&&y.key?y.key:e.clientId,d="".concat(e.baseUrl,"/clients/").concat(f,"/applications/").concat(l,"/configuration");!function(e,t,n,r,i,o){var a={};a.action=r,a.requestData=n,v.makeRequest("post",e,{Accept:"application/json","Content-type":"application/json",Authorization:t},JSON.stringify(a),(function(e){return i(void 0,e)}),(function(e){return i(e)}),void 0,void 0,void 0,o)}(d,e.apiKey,n,r,(function(e,t){if(e)i(e);else{var n={};try{n=JSON.parse(t),(n=c.a.transform(n)).prechatData&&(u.a.refreshContext(n.prechatData),delete n.prechatData)}catch(e){i({url:d,errorMsg:e.message,errorStack:e.stack})}s.update(l,n),i(void 0,n)}}),a)}}])&&d(t.prototype,n),s&&d(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=new I},29:function(e,t,n){"use strict";t.a={URL_PARAMS:{CONTEXT_INFO:"contextInfo",CLIENT_KEY:"clientKey",APP_ID:"appId",RULE_ID:"ruleId",INVITE_ID:"inviteId",LOAD_CUSTOMSCRIPT:"loadCustom",FIRE_LINK_PROPERTY:"fireLinkProperty",FIRE_TARGET_DETERMINATION:"fireTargetDetermination",IS_POPUP:"isPopup",TOKEN:"token"},EXTENSIBLE:{SCRIPT_ID:"tfs-tie-extensible",PATH:"/psp/platform/",DOMAIN_PROD:"d1af033869koo7.cloudfront.net",DOMAIN_STAGE:"d2j8jkom7xmn9n.cloudfront.net",SCRIPT:"247pxe.js",SCRIPT_DEBUG:"247pxe.debug.js"},TYPE_BUTTON:"BUTTON",LOCAL_STORAGE_NAME:"tfs-directchat",LOCAL_STORAGE_KEY:"directchat",DEBUG_KEY:"debug",WIDGET_STATE:{PAGE_INIT:"pageInit",WIDGET_LOADING:"widgetLoading",WIDGET_LOADED:"widgetLoaded",CHAT_REQUESTED:"chatRequested",CHAT_CONNECTING:"chatConnecting",CHAT_RECONCILING:"chatReconciling",CHAT_STARTED:"chatStarted",CHAT_INTERACTIVE:"chatInteractive",CHAT_ENDED:"chatEnded",MINIMIZED:"minimized",MAXIMIZED:"maximized",WIDGET_CLOSED:"widgetClosed"},EVENTS:{TARGET_DETERMINATION:"TargetDeterminationEvent",LINK_PROPERTY:"LinkPropertyEvent",CONNECTION_TO_AGENT:"OnlineInteractionConnectionToAgentEvent"},IVR:{ANI:"ani",PHONE_NUMBER:"phoneNumber"},STATE_CHANGE_EVENT:"stateChange",WINDOW:{TITLE:"Chat",NAME:"Chat"},ERRORS:{DEFAULT:"DEFAULT",LOADING_FAILED:"LOADING_FAILED",INVALID_SESSION:"INVALID_SESSION",SESSION_EXPIRED:"SESSION_EXPIRED",INVALID_CLIENT_KEY:"INVALID_CLIENT_KEY",INVALID_CONTEXT:"INVALID_CONTEXT",PRIVATE_BROWSING:"PRIVATE_BROWSING"},JWT_TOKEN:{EXPIRES:"expires",EXP:"exp",ISSUED_AT:"iat",ACCOUNT_ID:"accountId",BRAND_USER_ID:"brandUserId",CONTEXT:"context"},PRERENDER_ELEMENTS:{CONTAINER:"tfs_loading_container",TEXT:"tfs_loading_text",SPINNER:"tfs_loading_spinner"},I18N:{EN:{ERR_DEFAULT_TITLE:"Error",ERR_DEFAULT_DESC:"Something went wrong. Please try again later",ERR_LOADING_FAILED_TITLE:"Loading failed",ERR_LOADING_FAILED_DESC:"Something went wrong. Make sure your Internet is up and running and reload this page.",ERR_INVALID_SESSION_TITLE:"Session Error",ERR_INVALID_SESSION_DESC:"Something is not right. Session data is corrupted or missing a parameter.",ERR_SESSION_EXPIRED_TITLE:"Session Expired",ERR_SESSION_EXPIRED_DESC:"The link you are trying to use has expired. Please start the journey again from where you received this link.",ERR_INVALID_CLIENT_KEY_TITLE:"Provisioning Error",ERR_INVALID_CLIENT_KEY_DESC:"Client Key is invalid or not-provisioned",ERR_INVALID_CONTEXT_TITLE:"Invalid Context",ERR_INVALID_CONTEXT_DESC:"Context information passed seems to be missing a parameter or unreadable.",ERR_PRIVATE_BROWSING_TITLE:"Unsupported Browser Mode",ERR_PRIVATE_BROWSING_DESC:"To enable chat, open this web page in a new window that isn't using Private/Incognito mode."}}}},3:function(e,t,n){"use strict";var r=n(9);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),r)}var o,a}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"assert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"assert failed";e||c(t)}},{key:"isObject",value:function(e,t){var n=t?"".concat(t," is not an object"):"object expected";this.assert(r.a.isObject(e),n)}},{key:"isUndefinedOrNull",value:function(e,t){var n=t?"".concat(t," is not undefined or null"):"undefined or null expected";this.assert(null==e,n)}},{key:"isNotUndefinedOrNull",value:function(e,t){var n=t?"".concat(t," is undefined or null"):"undefined or null not expected";this.assert(null!=e,n)}},{key:"isBoolean",value:function(e,t){var n=t?"".concat(t," is not a boolean"):"boolean expected";this.assert(r.a.isBoolean(e),n)}},{key:"isFunction",value:function(e,t){var n=t?"".concat(t," is not a function"):"function expected";this.assert(r.a.isFunction(e),n)}},{key:"isNumber",value:function(e,t){var n=t?"".concat(t," is not a number"):"number expected";this.assert(r.a.isNumber(e),n)}},{key:"notEmpty",value:function(e,t){var n=t?"".concat(t," is not a string or is empty"):"non-empty string expected";this.assert(r.a.isString(e)&&!s.test(e),n)}},{key:"instanceOf",value:function(e,t,n){var r=n?"expected instance of ".concat(n):"unexpected instance type";this.assert(e instanceof t,r)}},{key:"isScalar",value:function(e,t){var n=i(e),r="".concat(t?"".concat(t," "):"","must be string, number, or boolean");this.assert("string"===n||"number"===n||"boolean"===n,r),"string"===n&&this.notEmpty(e,t)}},{key:"isArray",value:function(e,t){var n=t?"".concat(t," is not an array"):"array expected";this.assert(Array.isArray(e),n)}}])&&o(t.prototype,n),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),s=/^\s*$/;function c(e){throw new Error(e)}t.a=new a},30:function(e,t,n){"use strict";t.a={SECURITY:{FRAME_IN_FRAME:"frame-in-frame",THIRD_PARTY_FRAME:"third-party-frame"},IFRAME_POST_MESSAGE:{SET_IFRAME_CSS:"SET_SN_IFRAME_CSS",SET_IFRAME_VIEWPORT:"SET_VIEWPORT",GET_BODY_CSS:"GET_BODY_CSS",SET_BODY_CSS:"SET_BODY_CSS"},IFRAME_INBOUND_MESSAGE:{MESSAGE_SOURCE:"_247_",RESP_GET_BODY_CSS:"RESP_GET_BODY_CSS"},IFRAME_BODY:"IFRAME_BODY",DEFAULT_MASKED_DATA_KEY:"secure"}},32:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===r(a)?a:String(a)),i)}var o,a}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"encode",value:function(e,t){try{var n=window.btoa(unescape(encodeURIComponent(e)));return t&&!0===t.urlSafe&&(n=this.replaceUrlSafe(n)),n}catch(e){}}},{key:"decode",value:function(e,t){try{var n=e;return t&&!0===t.urlSafe&&(n=this.replaceUrlUnsafe(n)),decodeURIComponent(escape(window.atob(n)))}catch(e){}}},{key:"parse",value:function(e,t){var n=/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*?)$/i.exec(e);if(null!==n){var r=n[1],i=";base64"===n[3]?this.decode(n[4]):void 0;return t===r?i:void 0}}},{key:"isUrlSafe",value:function(e){return!/[?=/&:]+/g.test(e)}},{key:"replaceUrlSafe",value:function(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}},{key:"replaceUrlUnsafe",value:function(e){return e.replace(/-/g,"+").replace(/_/g,"/")}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=new o},33:function(e,t,n){"use strict";t.a={STATES:{INIT:"INIT",INVITED:"INVITED",INITIALIZED:"INITIALIZED",TIMEOUT:"TIMEOUT",STARTED:"STARTED",JOINED:"JOINED",ENDED:"ENDED"},COMMANDS:{USER_CLOSE:"USER_CLOSE",AGENT_CLOSE:"AGENT_CLOSE"},MODES:{COBROWSE:"cobrowse",COVIEW:"coview"}}},39:function(e,t,n){"use strict";var r=n(8),i=n(9);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),r)}var i,a}function s(e){var t=e,n={proactive:"maximized",button:"minimized"};return Object.keys(t).forEach((function(e){/^.*\.(cssReset|restrictViewport|lightbox\.show|preCheckSupportHours|touchMove)$/.test(e)&&!i.a.isBoolean(t[e])&&(t[e]="true"===t[e])})),t.type&&(t.state=t.state||t.type,delete t.type),void 0!==n[t.state]&&(t.state=n[t.state]),t.triggerAppId&&(t.inviteId=t.inviteId||t.triggerAppId,delete t.triggerAppId),t}function c(e){var t=e;return t&&t.widgets&&(t.widgets=l(t.widgets)),t=u(t)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e;if(Object.prototype.hasOwnProperty.call(e,"isSecure")){var n=e.isSecure;delete t.isSecure,!0===n&&(t.confidential=!0,t.secureStorageModes=["third-party"])}return t}function l(e){var t=e;return t.forEach((function(e){switch(e.type){case"listinput":e.inputtype&&(e.inputType=e.inputType||e.inputtype,delete e.inputtype),e.boxcolor&&(e.optionColor=e.optionColor||e.boxcolor,delete e.boxcolor),e.options=e.options||e.boxes,delete e.boxes,e.options.forEach((function(e){e.imgsrc&&(e.imgSrc=e.imgSrc||e.imgsrc,delete e.imgsrc)}));break;case"text":e.number&&i.a.isString(e.number)&&(e.number=parseInt(e.number,10));break;case"panel":e.widgets&&i.a.isArray(e.widgets)&&(e.widgets=l(e.widgets))}})),t}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"transformPage",value:function(e){return c(e)}},{key:"transformInvite",value:function(e){return s(e)}},{key:"transform",value:function(e){var t,n,o=Object(r.a)({},e);o.workflowConfig&&(o.workflowConfig=(t=o.workflowConfig,n={},t.messaging&&(n.messaging=t.messaging),t.va&&(n.va=t.va),t.chat&&(n.chat=t.chat),t.assistAccountId&&(n.chat={}),t.vaApiKey&&(n.va={}),Object.keys(t).forEach((function(e){e.indexOf("assist")>-1&&"chat"!==e&&(n.chat[e]=t[e]),e.indexOf("va")>-1&&"va"!==e&&(n.va[e]=t[e])})),n)),o.windowPosition&&(o.windowPosition=function(e){var t=e;switch(e){case"left":t="bottomleft";break;case"right":t="bottomright"}return t}(o.windowPosition));var a,f,d,p,y,m,v,h,g=function(e){if(!1===e.branding)return!1;if(e.branding&&!1===e.branding.type)return!1;if(!1===e.brandingType)return!1;if(void 0!==e.brandingType){var t={};return t.type=e.brandingType,t.logoUrl=e.brandingLogoUrl,t.avatarUrl=e.brandingAvatarUrl,t.agentDesc=e.brandingAgentDesc,t}return e.branding}(o);if(g?o.branding=g:delete o.branding,e.buttonFgColor&&(o.secondaryFgColor=e.buttonFgColor,o.tertiaryFgColor=e.buttonFgColor,delete o.buttonFgColor),e.messageFgColor&&(i.a.isString(e.messageFgColor.system)&&"#9b9b9b"===e.messageFgColor.system.toLowerCase()&&delete o.messageFgColor.system,i.a.isString(e.messageFgColor.typing)&&"#999999"===e.messageFgColor.typing&&delete o.messageFgColor.typing),o.headerBorderColor&&(o.header=Object(r.a)({},o.header,(a=o.headerBorderColor,(f={}).borderColor=a,f)),delete o.headerBorderColor),o.windowFontFamily&&(o.fontFamily=o.windowFontFamily,delete o.windowFontFamily),o.fontFamily){if(i.a.isString(o.fontFamily))o.fonts=o.fontFamily.split(",").map((function(e){return e.trim()}));else if(i.a.isArray(o.fontFamily)){var E=o.fontFamily[o.fontFamily.length-1].display.split(",").map((function(e){return e.trim()}));1===E.length&&E.push("'Helvetica Neue'","Helvetica","Arial","sans-serif"),o.fontFamily.forEach((function(e){switch(e.type){case"custom-font":i.a.isObject(E[0])||(E[0]={}),E[0].name=e.name,"bold"===e.weight&&(E[0].bold={ttf:e.ttf,woff:e.woff,woff2:e.woff2}),"normal"!==e.weight&&void 0!==e.weight||(E[0].normal={ttf:e.ttf,woff:e.woff,woff2:e.woff2})}})),o.fonts=E}delete o.fontFamily}o.borderRadius&&(o.borderRadius=(d=o.borderRadius,"string"==typeof(p=d)&&(p=parseInt(d,10)),p)),o.frontendsService&&(o.frontendsService=(y=o.frontendsService,(m=Object(r.a)({},y)).services&&(m.opts=Object(r.a)({},m.services),delete m.services),m)),o.audioNotify&&o.audioNotify.message&&o.audioNotify.message.mp3&&(o.notifications={audio:{message:o.audioNotify.message.mp3,started:o.audioNotify.message.mp3,reconciled:o.audioNotify.message.mp3}},delete o.audioNotify),o.i18n&&o.i18n.uiStrings&&(o.i18n.uiStrings=(v=o.i18n.uiStrings,h=v,Object.keys(v).forEach((function(e){Object.keys(v[e]).forEach((function(t){switch(h[e][t]=h[e][t].replace(/(\{\{)(.*?)(\}\})/gm,"%{$2}"),t){case"CHAT_WAIT":h[e].CHAT_WAIT_LONG=h[e].CHAT_WAIT,h[e].CHAT_WAIT_10MINS=h[e].CHAT_WAIT,h[e].CHAT_WAIT_5MINS=h[e].CHAT_WAIT,h[e].CHAT_WAIT_2MINS=h[e].CHAT_WAIT,h[e].CHAT_WAIT_1MIN=h[e].CHAT_WAIT;break;case"CHAT_DOCKED_RETURN":h[e].CHAT_HEADER_RETURN=h[e].CHAT_DOCKED_RETURN;break;case"CHAT_HEADER_GLOBAL":h[e].CHAT_HEADER_DEFAULT=h[e].CHAT_HEADER_GLOBAL;break;case"CHAT_DOCKED_OFFLINE":h[e].CHAT_HEADER_OFFLINE=h[e].CHAT_DOCKED_OFFLINE;break;case"CHAT_DOCKED_BUSY":h[e].CHAT_HEADER_BUSY=h[e].CHAT_DOCKED_BUSY}}))})),h));var b=/\/securepay$/;return o.secureCardProxyConfig&&b.test(o.secureCardProxyConfig.baseUrl)&&(o.secureCardProxyConfig.baseUrl=o.secureCardProxyConfig.baseUrl.replace(b,"")),o.appleBusinessChat&&"boolean"==typeof o.appleBusinessChat.enabled&&(o.appleBusinessChat.loadOnly=o.appleBusinessChat.enabled,delete o.appleBusinessChat.enabled),o=function(e){var t=e;return i.a.isArray(t.surveys)&&t.surveys.forEach((function(e){var t=!1;"vaSurvey"===e.queuePatternStr&&e.cardName?(e.condition='{"===":[{"var":"workflow"},"va"]}',t=!0):".*"===e.queuePatternStr&&e.cardName?(e.condition='{"===":[{"var":"workflow"},"chat"]}',t=!0):i.a.isString(e.queuePatternStr)&&""!==e.queuePatternStr&&e.cardName&&(e.condition='{"and":[{"===":[{"var":"workflow"},"chat"]},{"===":[{"var":"context.queue"},"'.concat(e.queuePatternStr,'"]}]}'),t=!0),t&&(e.surveyName=e.cardName,delete e.queuePatternStr,delete e.queuePatternFlags,delete e.cardName)})),t}(o=function(e){var t=e,n=-1;return i.a.isArray(t.maskMessagePatterns)&&(t.maskMessagePatterns.forEach((function(e,t){"creditcard"===e.name&&(n=t)})),n>-1&&t.maskMessagePatterns.splice(n,1)),t}(o=function(e){var t=e;return i.a.isArray(t.invites)&&t.invites.forEach((function(e){s(e)})),t}(o=function(e){var t=e;return["prechat","busy","offline","waiting"].forEach((function(e){t[e]&&t[e].widgets&&(t[e].widgets=l(t[e].widgets))})),["postchat","vaSurvey"].forEach((function(e){t.dialog&&t.dialog[e]&&t.dialog[e].widgets&&(t.dialog[e].widgets=l(t.dialog[e].widgets))})),t.cards&&t.cards.forEach((function(e){i.a.isArray(e.pages)?e.pages.forEach((function(e){e=c(e)})):!0===e.isExternal&&(e=u(e))})),t}(o))))}}])&&a(t.prototype,n),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=new f},4:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===r(a)?a:String(a)),i)}var o,a}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return this.isUndefinedOrNull(t)||this.isUndefinedOrNull(t[e[0]])?n:1===e.length?t[e[0]]:this.get(e.slice(1),t[e[0]],n)}},{key:"isUndefinedOrNull",value:function(e){return null==e}},{key:"isEmptyOrNull",value:function(e){return this.isUndefinedOrNull(e)||""===e}},{key:"createNestedObject",value:function(e,t,n){var r=e,i=t.pop();return t.map((function(e){return r[e]=r[e]||{},r=r[e],0})),r[i]=n,r=r[i]}},{key:"extractRequiredAttributes",value:function(e,t){for(var n={},r=0;r<t.length;r+=1){var i=t[r];if(i.indexOf(".")>0){var o=i.split("."),a=this.get(o,e,void 0);this.createNestedObject(n,o,a)}else this.isUndefinedOrNull(e[i])||(n[i]=e[i])}return n}},{key:"removeEmpty",value:function(e){var t=this,n=e;return Object.keys(n).forEach((function(e){t.isEmptyOrNull(n[e])&&delete n[e]})),n}},{key:"removeSpecificKeys",value:function(e,t){var n=e;return t.map((function(e){return delete n[e]})),n}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=new o},401:function(e,t,n){"use strict";var r=n(6),i=n(19),o=n(30),a=n(8),s=n(145),c=n(12),u=n(4),l=n(3),f=n(45),d=n(54),p=n(207);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===y(o)?o:String(o)),r)}var i,o}var v=!1,h=!1,g=(new Date).getTime(),E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"init",value:function(e,t,n){var r=this;l.a.notEmpty(e),l.a.isObject(t),l.a.notEmpty(t.baseUrl),l.a.notEmpty(t.apiKey),l.a.isObject(n),this.loggerConfig=t.opts.logger,this.loggerConfig&&(l.a.isObject(this.loggerConfig),l.a.isNumber(this.loggerConfig.level),l.a.isNumber(this.loggerConfig.flushTrigger)),this._basePath=[t.baseUrl,"clients",e,"applications"].join("/"),this._extraData=n,this._apiKey=t.apiKey,this._flushTrigger=this.loggerConfig.flushTrigger,this._logLevel=this.loggerConfig.level,this._interactions=[],window.addEventListener("beforeunload",(function(){r._interactions.length>0&&r.logFlush()})),h=!0}},{key:"setAppId",value:function(e){l.a.notEmpty(e),this._appId=e,v=!0}},{key:"setAppInteractionId",value:function(e){l.a.notEmpty(e),this._extraData.appInteractionId=e}},{key:"unsetAppInteractionId",value:function(){delete this._extraData.appInteractionId}},{key:"logInteraction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(v&&h){var n=e,r=n.logLevel;if(l.a.isNumber(r),r&&r<this._logLevel)return;var o={version:"ude-1.54.6",tsOffset:(new Date).getTime()-g,time:p.a.formatDate(new Date),tabVisible:d.a.documentHasFocus()};n.logLevel=i.a.LOG_LEVEL_STRING[r],n.logData=Object(a.a)({},this._extraData,n.logData,o),this._interactions.push(n),(t||this._interactions.length>=this._flushTrigger)&&this.logFlush()}}},{key:"logFlush",value:function(){var e=this._interactions;this._interactions=[];var t="".concat(this._basePath,"/").concat(this._appId,"/interactions");b.makeRequest("post",t,{"Content-Type":"application/json; charset=utf-8",Authorization:this._apiKey},JSON.stringify(e),(function(e){}),(function(e){e.response&&e.response.status}))}}])&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),b=new f.a,S=new E,_=n(228),T=n.n(_),I=n(151);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function C(e){var t=function(e,t){if("object"!==O(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===O(t)?t:String(t)}var N=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"encode",value:function(e){var t=this.getBuckets().reduce((function(e,t){return e[t]={},e}),{}),n=T.a.flatten(e),r=I.a.KEY_MAP;return Object.keys(n).map((function(e){var i=r.find((function(t){return t.key===e}));if(i){var o=n[e];"boolean"===i.type&&(o=!0===n[e]?1:0),t=Object(a.a)({},t,A({},i.bucket,A({},i.short,o)))}return 0})),t}},{key:"decode",value:function(e){var t={},n=T.a.flatten(e);return I.a.KEY_MAP.map((function(e){var r=e.bucket,i=e.short,o="".concat(r,".").concat(i);if(void 0!==n[o]){var s=n[o];"boolean"===e.type?s=1===n[o]:"number"===e.type&&(s=""===n[o]?void 0:n[o]),t=Object(a.a)({},t,A({},e.key,s))}return 0})),T.a.unflatten(t)}},{key:"getBuckets",value:function(){return I.a.BUCKETS}}])&&w(t.prototype,n),r&&w(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==R(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===R(o)?o:String(o)),r)}var i,o}var D="".concat(r.a.STORAGE_KEY_NAMES.USER_SESSION,"."),L="Session data length exceeded 500",P="CustomStorage::get - failed to get",M="CustomStorage::set - failed to set",j=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._getData=t.getData,this._setData=t.setData}var t,n,r;return t=e,(n=[{key:"_log",value:function(e){S.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_ERROR,logData:{errorMsg:e}},!0)}},{key:"_checkDataLength",value:function(e,t){e.length>500&&this._log("".concat(t," ").concat(L))}},{key:"set",value:function(e){var t=this,n=e;l.a.isObject(e,"CustomStorage::set data");try{var r=N.encode(n);Object.keys(r).map((function(e){var n=r[e];return t._checkDataLength(JSON.stringify(n),e),t._setData("".concat(D).concat(e),n),0}))}catch(e){var i="".concat(M,": ").concat(e);this._log(i)}}},{key:"get",value:function(e){var t=this;l.a.isFunction(e,"callback");var n={},r=N.getBuckets().reduce((function(e,t){return e[t]=!1,e}),{});N.getBuckets().map((function(i){return t._getData("".concat(D).concat(i),(function(o,a){var s=a;try{n[o.substr(D.length)]=s}catch(e){var c="".concat(P,' "').concat(o,'" "').concat(JSON.stringify(s),'": ').concat(e);t._log(c)}r[i]=!0,!0===Object.keys(r).reduce((function(e,t){return e=e&&r[t]}),!0)&&e(N.decode(n))})),0}))}}])&&k(t.prototype,n),r&&k(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),x=n(24),F=n(229);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==U(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===U(o)?o:String(o)),r)}var i,o}var B=function(){function e(t,n,r,i){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l.a.isFunction(t,"XDStorage: successCallback"),l.a.isFunction(n,"XDStorage: errorCallback"),l.a.isFunction(r,"XDStorage: updateCallback"),l.a.notEmpty(i.storageKey,"XDStorage: options.storageKey"),l.a.notEmpty(i.sessionKey,"XDStorage: options.sessionKey"),l.a.notEmpty(i.path,"XDStorage: options.path"),this._storageKey=i.storageKey,this._sessionKey=i.sessionKey,this._successCallback=t,this._errorCallback=n,this._updateCallback=r,o="".concat(i.path,"/xd.html"),this._xdOrigin=x.a.parseUrl(o).secure().appendToHash({origin:location.origin,storageKey:this._storageKey},void 0,!0),this._xdUrl=this._xdOrigin.href,l.a.notEmpty(this._xdUrl,"xdUrl"),this._loadXdHtml(this._xdUrl)}var t,n,i;return t=e,(n=[{key:"_loadXdHtml",value:function(e){var t=null;(t=document.createElement("iframe")).id="tfsxdframe",t.src=e,document.getElementsByTagName("head")[0].appendChild(t),this._communicator=new F.a({targetOrigin:this._xdOrigin.origin,listener:this._messageHandler.bind(this),destinationWindow:t.contentWindow})}},{key:"_messageHandler",value:function(e){var t={};if(e.origin===this._xdOrigin.origin){try{t=JSON.parse(e.data)}catch(e){return}switch(t.queryCommand){case r.a.XD_COMMANDS.INITIALIZE:"object"===U(t.data)&&this._updateCallback(t.data),this._successCallback(r.a.STORAGE_TYPES.XD,this);break;case r.a.XD_COMMANDS.INITIALIZE_ERROR:this._errorCallback("XDSTORAGE_".concat(t.error));break;case r.a.XD_COMMANDS.UPDATE:if(t.data.key!==this._storageKey)break;var n={oldValue:t.data.oldValue,newValue:t.data.newValue};this._updateCallback(n)}}}},{key:"get",value:function(){}},{key:"set",value:function(e,t,n){this._sendCommand(r.a.XD_COMMANDS.SET,e,t,n)}},{key:"addStorageListener",value:function(){}},{key:"remove",value:function(e,t){this._sendCommand(r.a.XD_COMMANDS.REMOVE,e,t)}},{key:"_sendCommand",value:function(e,t,n,r){var i={command:e,key:t,value:n,opts:r};this._communicator.sendMessage(JSON.stringify(i))}}])&&H(t.prototype,n),i&&H(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),G=n(9);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==Y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Y(o)?o:String(o)),r)}var i,o}var W=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"isPopup",value:function(){return window._tfs&&window._tfs.isPopup}},{key:"getWindowParams",value:function(){var e=!1;try{var t=atob(window.name.replace(/_a/g,"+").replace(/_b/g,"/").replace(/_c/g,"="));e=JSON.parse(t)}catch(e){}return e}},{key:"generateSecureWindowName",value:function(e){var t=!1;try{var n=JSON.stringify(e);t=btoa(n).replace(/\+/g,"_a").replace(/\//g,"_b").replace(/=/g,"_c")}catch(e){}return t}}])&&V(t.prototype,n),r&&V(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==K(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===K(o)?o:String(o)),r)}var i,o}var z={},X=!1,Z=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"init",value:function(e){var t=this;if(!X){this._initCallback=e.initCallback,this._storageKey="".concat(e.clientId||"default","||").concat(r.a.STORAGE_KEY_NAMES.USER_SESSION),this._useCustomStorage=!!c.a.safariVersion,this._sessionKey=r.a.STORAGE_KEY_NAMES.TAB_SESSION,this._getData=e.getData,this._setData=e.setData,this._forceCrossOrigin=e.forceCrossOrigin,this._storageType=void 0,this._store=void 0,this._storageTypeReasons=[],this._listeners=[],this._storageTypeReasons.push("FORCE_CROSS_ORIGIN_".concat(this._forceCrossOrigin.toString().toUpperCase()));var n=function(e,n){t._store=n,t._storageType=e,X=!0,t._initCallback(t)};W.isPopup()&&W.getWindowParams()&&W.getWindowParams().storageType===r.a.STORAGE_TYPES.CUSTOM?this._createCustomStorage(n):this._forceCrossOrigin?c.a.safariVersion?this._createCustomStorage(n):this._store=new B(n,(function(e){t._storageTypeReasons.push(e),t._createCustomStorage(n)}),(function(e){var n=e;X||Object.keys(n).forEach((function(e){z[e]=Object(a.a)({},z[e],n[e])})),n.oldValue&&!Object.keys(n.oldValue).length&&(n.oldValue=z),G.a.isObject(n.newValue)&&Object.keys(n.newValue).forEach((function(e){z[e]=n.newValue[e]}));for(var r=0;r<t._listeners.length;r+=1)t._listeners[r].call(t,n)}),{storageKey:this._storageKey,sessionKey:this._sessionKey,path:e.xdPath}):this._createStorage(n)}}},{key:"_createStorage",value:function(e){var t;try{var n=(t=new s.a("localStorage",this._storageKey)).getAll();z[this._sessionKey]=Object(a.a)({},z[this._sessionKey],n[this._sessionKey]),this.addStorageListener=function(e){t.addStorageListener(e)},e(r.a.STORAGE_TYPES.LOCALSTORAGE,t)}catch(t){this._createCustomStorage(e)?this._storageTypeReasons.push("XDLOCALSTORAGE_SETSTORE_ERROR"):this._storageTypeReasons.push("XDLOCALSTORAGE_NOSTORE")}}},{key:"_createCustomStorage",value:function(e){var t,n=this;return!(!this._getData||!this._setData||((t=new j({getData:this._getData,setData:this._setData})).get((function(i){z[n._sessionKey]=Object(a.a)({},z[n._sessionKey],i),e(r.a.STORAGE_TYPES.CUSTOM,t)})),0))}},{key:"getStorageTypeReasons",value:function(){return this._storageTypeReasons.join(",")}},{key:"getStorageType",value:function(){return this._storageType}},{key:"get",value:function(e){return z[e]}},{key:"set",value:function(e,t,n){switch(this._storageType){case r.a.STORAGE_TYPES.CUSTOM:n.syncCustomStorage&&this._store.set(Object(a.a)({},z[this._sessionKey],t));break;case r.a.STORAGE_TYPES.XD:case r.a.STORAGE_TYPES.LOCALSTORAGE:this._store.set(e,t,n)}z[e]=Object(a.a)({},z[e],t),z[r.a.SOURCE]=n.tabId}},{key:"addStorageListener",value:function(e){this._listeners.push(e)}},{key:"remove",value:function(e,t){switch(t&&t.length>0?z[e]=u.a.removeSpecificKeys(z[e],t):z[e]={},this._storageType){case r.a.STORAGE_TYPES.CUSTOM:this._store.set(Object(a.a)({},z[this._sessionKey]));break;case r.a.STORAGE_TYPES.XD:case r.a.STORAGE_TYPES.LOCALSTORAGE:this._store.remove(e,t)}}}])&&q(t.prototype,n),i&&q(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()),J=n(18),Q=n(10),$=n(67);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==ee(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===ee(o)?o:String(o)),r)}var i,o}var ne=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._parentBody=void 0,this._parentBodyStyle="",this._initialized=!1}var t,n,i;return t=e,(n=[{key:"init",value:function(e,t){this._parentBody=e.frameInFrame||t?document.body:parent.document.body,c.a.isMobileSafari||c.a.isIpad||(this._initialized=!0),this._initialized||(this._parentBodyStyle=this._parentBody.hasAttribute("style")?this._parentBody.getAttribute("style"):"",this._initialized=!0),this._securityRestrictions=e}},{key:"setStyle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._securityRestrictions.frameInFrame){$.a.sendMessage(o.a.IFRAME_POST_MESSAGE.SET_IFRAME_CSS,t,n);var r={height:"100%",width:"100%"};J.a.setStyle(e,r)}else J.a.setStyle(e,t,n)}},{key:"redrawWidget",value:function(e,t){c.a.isMobileSafari&&c.a.iosVersion<=8&&J.a.redrawElement(e,Object(a.a)({},t,{bottom:"1px"}),t)}},{key:"changeBodyStyle",value:function(e){if(e===o.a.IFRAME_BODY&&document.body&&document.body.setAttribute("style","overflow: hidden"),c.a.isMobileSafari&&!c.a.isTablet)if(e===r.a.WIDGET_STATE.MAXIMIZED){if(this._parentBody){var t="position:fixed;display:block;height:100%;width:100%;height:100vh;width:100vw;";this._securityRestrictions.frameInFrame&&$.a.sendMessage(o.a.IFRAME_POST_MESSAGE.SET_BODY_CSS,{css:t,isMaximized:!0},!0),this._parentBody.setAttribute("style",t)}J.a.getOrientation()===r.a.ORIENTATIONS.PORTRAIT&&Q.a.requestTimeout(this.scrollWindowOnTopOfKeyboard.bind(this),100)}else u.a.isUndefinedOrNull(this._parentBody)||this._parentBody.setAttribute("style",this._parentBodyStyle),this._securityRestrictions.frameInFrame&&$.a.sendMessage(o.a.IFRAME_POST_MESSAGE.SET_BODY_CSS,{},!0)}},{key:"scrollWindowOnTopOfKeyboard",value:function(){this._securityRestrictions.frameInFrame?window.scrollTo(0,this._parentBody.clientHeight-this._parentBody.scrollTop):parent.window.scrollTo(0,this._parentBody.clientHeight-this._parentBody.scrollTop)}}])&&te(t.prototype,n),i&&te(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()),re=n(13),ie=n(16);function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,se(r.key),r)}}function se(e){var t=function(e,t){if("object"!==oe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===oe(t)?t:String(t)}var ce,ue,le,fe,de=!1,pe={};function ye(e){try{var t=e.newValue,n=e.oldValue;if(t[r.a.SOURCE]===t[this.getTabId()])return;Object.keys(t).length>0&&(this._notifyListeners(n,t),this._onStoreUpdate(t))}catch(e){}}var me=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"init",value:function(e){var t=this;if(!de){ce=e.storage,l.a.isObject(ce,"storage"),l.a.isFunction(ce.get,"storage.get"),l.a.isFunction(ce.set,"storage.set");try{this._sessionStorage=new s.a("sessionStorage",r.a.TAB_STORAGE_KEY)}catch(e){this._sessionStorage={store:{},getAll:function(){return t._sessionStorage.store},set:function(e,n){t._sessionStorage.store[e]=n}}}ue=r.a.STORAGE_KEY_NAMES.TAB_SESSION,le=r.a.STORAGE_KEY_NAMES.TAB_PREFIX,this.isExistingTab=!1,fe=this._getTabId(),this._onStoreUpdate=e.onStoreUpdate,this.tab={set:function(e,n){return t._set(e,n,r.a.TAB_SESSION_KEY)},get:function(e){return t._get(e,r.a.TAB_SESSION_KEY)}},this.browser={set:function(e,n){return t._set(e,n,r.a.BROWSER_SESSION_KEY)},get:function(e){return t._get(e,r.a.BROWSER_SESSION_KEY)}},ce.addStorageListener(ye.bind(this));var n=e.activeSession;this._checkAndInitWorkflowSession(r.a.CHAT_SESSION_KEY),this._checkAndInitWorkflowSession(r.a.VA_SESSION_KEY),this._checkAndInitWorkflowSession(r.a.MESSAGING_SESSION_KEY);var i=this.browser.get(r.a.PRECHAT_DATA_KEYS.ACTIVE_SESSION);n&&n!==i&&!e.interLobEnabled&&(this.removeSessionData(),this.browser.set(r.a.PRECHAT_DATA_KEYS.ACTIVE_SESSION,n)),this.tab.set("app",{tabId:this.getTabId()}),de=!0}}},{key:"_checkAndInitWorkflowSession",value:function(e){var t,n,r,i=this.browser.get(e);if(u.a.isUndefinedOrNull(i)){var o=(t={},r={},(n=se(n=e))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t);this.browser.set(o)}}},{key:"_getTabId",value:function(){var e;try{var t=this._sessionStorage.getAll();(e=u.a.get(["id"],t))&&e.indexOf(le)>=0?this.isExistingTab=!0:(e=le+ie.a.get(5),this._sessionStorage.set("id",e))}catch(e){}return e}},{key:"_getData",value:function(e){return e===r.a.TAB_SESSION_KEY?ce.get(fe):e===r.a.BROWSER_SESSION_KEY?ce.get(ue):ce.get(e)}},{key:"_setData",value:function(e,t){var n,i=e;t===r.a.BROWSER_SESSION_KEY?n=ue:t===r.a.TAB_SESSION_KEY&&(n=fe);var o={tabId:fe};i.syncCustomStorage&&(o.syncCustomStorage=!0,delete i.syncCustomStorage),ce.set(n,i,o)}},{key:"removeSessionData",value:function(e){ce.remove(ue,e)}},{key:"_get",value:function(e,t){var n=this._getData(t);return e?n?n[e]:void 0:n}},{key:"_set",value:function(e,t,n){if("object"!==oe(e)){var r={};r[e]=t,this._setData(r,n)}else this._setData(e,n)}},{key:"addListener",value:function(e,t){l.a.isFunction(t);var n=pe[e]?pe[e]:[];n.push(t),pe[e]=n}},{key:"removeListener",value:function(e,t){if(l.a.isFunction(t),pe[e]){var n=pe[e];pe[e]=n.splice(n.indexOf(t),1)}}},{key:"_notifyListeners",value:function(e,t){var n=this;if(Object.keys(e).length>0){var r=Object(a.a)({},e[ue],e[fe]),i=Object(a.a)({},t[ue],t[fe]);Object.keys(pe).map((function(e){return n._diff(r,i,e)}))}else{var o=Object(a.a)({},t[ue],t[fe]);Object.keys(pe).map((function(e){return o[e]&&n._notify(o[e],e),0}))}}},{key:"_diff",value:function(e,t,n){var r,i;if(n.indexOf(".")>-1?(r=re.a.getObjectReference(n,e),i=re.a.getObjectReference(n,t)):(r=e[n],i=t[n]),r&&i)if(Array.isArray(r)){if(!re.a.arrayDeepEquals(r,i))return this._notify(i,n)}else{if("object"===oe(r))return this._diff(r,i,n);if(r!==i)return this._notify(i,n)}else if(r||i)return this._notify(i,n);return 0}},{key:"_notify",value:function(e,t){pe[t]&&pe[t].map((function(n){return n(t,e)}))}},{key:"getTabId",value:function(){return fe}},{key:"getSource",value:function(){return this._getData(r.a.SOURCE)}}])&&ae(t.prototype,n),i&&ae(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()),ve=n(22),he=["appInteractionId","ruleId","inviteId","triggerAppId","state","queue"];function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _e(e,t,n){return(t=Ie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ie(r.key),r)}}function Ie(e){var t=function(e,t){if("object"!==ge(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ge(t)?t:String(t)}var Oe=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"configure",value:function(e){this._onTrackEvent=e.onTrackEvent,this._logger=e.logger,this._channelSessionId=e.channelSessionId,this._ignoreEvents=e.events.ignoreList,this._onTrackEvent||(this._onTrackEvent=re.a.noop)}},{key:"exitSurveyShown",value:function(e){return Object(a.a)({},this.exitSurveys(e),{name:"OnlineScreenLoadEvent"})}},{key:"exitSurveySubmit",value:function(e){var t=e.formData||{},n={};if(e.formMetaData)try{n.metaData=JSON.stringify(Object(a.a)({},e.formMetaData))}catch(e){}return Object(a.a)({},this.exitSurveys(e),n,{name:"OnlineSurveySubmitEvent",questionsAndAnswers:Object.keys(t).map((function(e){return{question:e,answer:t[e]}}))})}},{key:"exitSurveys",value:function(e){return l.a.notEmpty(e.interactionId,"Tracker.exitSurveys - interactionId"),l.a.notEmpty(e.queue,"Tracker.exitSurveys - queue"),l.a.notEmpty(e.ruleId,"Tracker.exitSurveys - ruleId"),l.a.notEmpty(e.ruleCategory,"Tracker.exitSurveys - ruleCategory"),Object(a.a)({},this.commons(),{screenType:"SURVEY",targetChannelType:"WEB",optSharedSessionId:e.interactionId,platform:e.platform,source:e.source,clientKey:e.clientKey,Queue:e.queue,RuleId:e.ruleId,inviteType:"b"===e.ruleCategory?"BUTTON":"PROACTIVE"})}},{key:"prechatShown",value:function(){return Object(a.a)({},this.commons(),{name:"OnlineScreenLoadEvent",screenType:"PRECHAT",targetChannelType:"WEB"})}},{key:"prechatSubmit",value:function(e){var t=this.commons(),n=e.formData||{};return Object(a.a)(t,{name:"OnlineSurveySubmitEvent",screenType:"PRECHAT",targetChannelType:"WEB",questionsAndAnswers:Object.keys(n).map((function(e){return{question:e,answer:n[e]}}))}),u.a.isUndefinedOrNull(n.skill)||(t.Skill=n.skill),u.a.isUndefinedOrNull(n.queue)||(t.Queue=n.queue),t}},{key:"cardInvited",value:function(e){return Object(a.a)({},this.cards(e),{treatmentName:"activeCardSent"})}},{key:"cardAccepted",value:function(e){return Object(a.a)({},this.cards(e),{treatmentName:"activeCardViewed",userAction:"BUTTON_CLICKED",userResponse:"ACCEPTED"})}},{key:"cardSubmitted",value:function(e){return Object(a.a)({},this.cards(e),{treatmentName:"activeCardSubmitted",userAction:"BUTTON_CLICKED",outcome:"COMPLETE"})}},{key:"cards",value:function(e){l.a.notEmpty(e.workflow,"Tracker.cards - workflow"),l.a.notEmpty(e.name,"Tracker.cards - name");var t=e.workflow,n=e.name,i=r.a.TRACK_PLATFORMS[t];return this.treatment({platform:i,invitation:{invitePageID:n}})}},{key:"inviteOffered",value:function(e){return Object(a.a)({},this.invites(e),{name:"OnlineInvitationOfferEvent"})}},{key:"inviteAccepted",value:function(e){return Object(a.a)({},this.invites(e),{name:"OnlineInvitationResponseEvent",response:"ACCEPTED"})}},{key:"inviteDeclined",value:function(e){return Object(a.a)({},this.invites(e),{name:"OnlineInvitationResponseEvent",response:"DECLINED"})}},{key:"inviteIgnored",value:function(e){return Object(a.a)({},this.invites(e),{name:"OnlineInvitationResponseEvent",response:"IGNORED"})}},{key:"sessionEngaged",value:function(){return Object(a.a)({},this.commons(),{name:"OnlineSessionEngageEvent"})}},{key:"visitorIdChanged",value:function(e){return Se(Se({},e),{},{name:"VISITOR_ID_CHANGED"})}},{key:"queueAfterHours",value:function(e){return Se(Se({},this.application(e)),{},{appInfo:"queueAfterHours"})}},{key:"caCheckFail",value:function(e){return Se(Se({},this.application(e)),{},{appInfo:"caCheckFail"})}},{key:"application",value:function(e){return Object(a.a)({name:"Application",channel:"OMNICHANNEL",platform:"CHAT",source:"UDE",appEntity:"TIE_FRONTEND",appAction:"CHAT_SESSION_CHECK"},e)}},{key:"invites",value:function(e){var t=this.commons(),n=e.appInteractionId,r=e.ruleId,i=e.inviteId,o=(e.triggerAppId,e.state),s=e.queue,c=Ee(e,he);return l.a.notEmpty(n,"In Tracker.Invites appInteractionId"),l.a.notEmpty(r,"In Tracker.Invites ruleId"),l.a.notEmpty(i,"In Tracker.Invites inviteId"),l.a.notEmpty(o,"In Tracker.Invites state"),l.a.notEmpty(s,"In Tracker.Invites queue"),Object(a.a)(t,{appInteractionId:n,RuleId:r,inviteId:i,inviteType:"maximized"===o?"PROACTIVE":"BUTTON",Queue:s,targetChannelType:"ONLINE"},c),t}},{key:"commons",value:function(){return{appInteractionId:ve.a.getContext()[r.a.PRECHAT_DATA_KEYS.APP_INTERACTION_ID]}}},{key:"treatment",value:function(e){return Object(a.a)({name:"Treatment",channel:"OMNICHANNEL",source:"UDE",treatmentCategory:"INVITE",invitation:{inviteType:"CARD",targetChannel:"WEB"}},e)}},{key:"logTrackEvent",value:function(e){var t=this[e.event](e.eventData),n=t.name;delete t.name;try{this._onTrackEvent(n,re.a.noop,t)}catch(e){throw new Error("onTrackEvent API: ".concat(e.message||e))}}},{key:"log",value:function(e){if(!(this._ignoreEvents.indexOf(e.event)>-1))try{this.logTrackEvent(e)}catch(e){this._logger({errorMsg:e.message||e,errorStack:e.stack})}}}])&&Te(t.prototype,n),i&&Te(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()),Ae=["tabId"];function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==we(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==we(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===we(o)?o:String(o)),r)}var i,o}var Re,ke,De,Le=window,Pe=!1;function Me(){try{var e=JSON.stringify(De);me.browser.set(r.a.JOURNEY,e)}catch(e){}}function je(e,t){var n=me.getTabId(),r=(new Date).getTime();for(De.unshift({title:e,url:t,time:1,loadts:r,tabId:n});De.length>Re;)De.pop();Me()}function xe(){var e=De[0];if(e){var t=e.time;e.tabId===me.getTabId()&&(De[0].time=t+10,Me())}}var Fe=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"init",value:function(e,t,n){if(!Pe){Re=e.maxUrls,ke=e.maxUrlsLength;try{De=JSON.parse(me.browser.get(r.a.JOURNEY))}catch(e){De=[]}if(me.addListener(r.a.JOURNEY,(function(e,t){try{t&&(De=JSON.parse(t))}catch(e){}})),e.autoPush)if(t.frameInFrame&&n)try{var i=JSON.parse(decodeURIComponent(n)||"{}");i&&i.title&&i.url&&je(i.title,i.url)}catch(e){}else je(Le.document.title,Le.location.href);Pe=!0,Le.setInterval(xe,1e4)}}},{key:"pushUrl",value:function(e,t){Pe&&je(e,t)}},{key:"getJourneyEncoded",value:function(e){var t,n=e||De.map((function(e){return e.tabId,Ce(e,Ae)}));if(n){try{t=encodeURIComponent(JSON.stringify(n))}catch(e){return}return t.length<=ke?t:(n.pop(),this.getJourneyEncoded(n))}}}])&&Ne(t.prototype,n),i&&Ne(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()),Ue=n(61),He=n(27),Be=n(17),Ge=n(85);function Ye(e){var t=e;t.preventDefault(),t.returnValue=""}var Ve={enable:function(){window.addEventListener("beforeunload",Ye)},disable:function(){window.removeEventListener("beforeunload",Ye)}},We=n(153),Ke="tfs-apple-business-chat-js",qe="tfs-apple-business-chat",ze="apple-business-chat-message-container",Xe=3e4,Ze={ID:"id",CLASS_NAME:"class",BUSINESS_ID:"data-apple-business-id",INTENT_ID:"data-apple-business-intent-id",GROUP_ID:"data-apple-business-group-id",MESSAGE_BODY:"data-apple-business-body",THEME:"data-apple-button-theme"},Je={margin:"-1px",padding:0,width:"1px",height:"1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",position:"absolute"},Qe=n(32);function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t,n){return(t=nt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nt(r.key),r)}}function nt(e){var t=function(e,t){if("object"!==$e(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==$e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===$e(t)?t:String(t)}var rt,it,ot,at=document,st=window,ct=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"configure",value:function(e,t){var n=this;if(it=e,this._shouldLoadScript(e)){var r=e.scriptUrl,i=e.businessId;l.a.notEmpty(r,"appleBusinessChat.scriptUrl"),l.a.notEmpty(i,"appleBusinessChat.businessId"),J.a.injectScript(r,(function(e){rt=st.appleBusinessChat,t(!0,{url:r,status:e,supported:n.isSupported()})}),at,{id:Ke},Xe)}else t(!1)}},{key:"_shouldLoadScript",value:function(e){var t=!1;return(c.a.isMac||(c.a.isMobileSafari||c.a.isIpad)&&c.a.iosVersion>10)&&(t=e.enabled[c.a.getDevice()]||e.loadOnly),t}},{key:"isSupported",value:function(){return!!rt&&!it.loadOnly&&!1!==it.enabled[c.a.getDevice()]&&rt.isSupported()}},{key:"trigger",value:function(e){var t;if(!this.isSupported())return!1;var n=it,r=n.businessId,i=n.intentId,o=n.groupId,a=n.messageBody,s=(et(t={},Ze.ID,qe),et(t,Ze.CLASS_NAME,ze),et(t,Ze.BUSINESS_ID,r),t),c=re.a.getFunctionReference(i);if(c){var u=c(e);u&&"string"==typeof u&&(s[Ze.INTENT_ID]=u)}var l=re.a.getFunctionReference(o);if(l){var f=l(e);G.a.isObject(f)&&Object.keys(f).length>0&&(Object.prototype.hasOwnProperty.call(f,"appContext")||(f={appContext:f}),f=Qe.a.encode(JSON.stringify(f))),G.a.isString(f)&&(Qe.a.isUrlSafe(f)||(f=Qe.a.replaceUrlSafe(f)),s[Ze.GROUP_ID]=f)}var d=re.a.getFunctionReference(a);if(d){var p=d(e);p&&"string"==typeof p&&(s[Ze.MESSAGE_BODY]=p)}J.a.removeElement(qe);var y=J.a.createElement("div",s);return J.a.setStyle(y,Je),at.body.appendChild(y),rt.refresh(),y.querySelector("a").click(),!0}}])&&tt(t.prototype,n),r&&tt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()),ut="appContext",lt="ctx",ft="serviceIntent";function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e,t,n){return(t=mt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mt(r.key),r)}}function mt(e){var t=function(e,t){if("object"!==dt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==dt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===dt(t)?t:String(t)}var vt=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"configure",value:function(e){ot=e}},{key:"isSupported",value:function(){return!1!==ot.enabled[c.a.getDevice()]&&(c.a.isAndroid||c.a.isAndroidTablet)&&c.a.androidVersion>6}},{key:"trigger",value:function(e){if(!this.isSupported())return!1;var t=ot,n=t.intentId,r=t.groupId,i=x.a.parseUrl(ot.url),o={},a=re.a.getFunctionReference(r);if(a){var s=a(e);G.a.isObject(s)&&Object.assign(o,s)}var c=re.a.getFunctionReference(n);if(c){var u=c(e);u&&"string"==typeof u&&Object.assign(o,pt({},ft,u))}if(0!==Object.keys(o).length){var l="";try{l=Qe.a.encode(JSON.stringify(pt({},ut,o)),{urlSafe:!0})||""}catch(e){}i.appendToSearch(pt({},lt,l))}return window.open(i.href),!0}}])&&yt(t.prototype,n),r&&yt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());function ht(e){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var gt=["appInteractionId","ruleId","queue","state","inviteId","triggerAppId","trackingId","appId","dockId"],Et=["onStateChange","securityRestrictions","disableBackgroundInvite"];function bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==ht(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===ht(o)?o:String(o)),r)}var i,o}function St(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _t(e){ct.isSupported()?ct.trigger(e):vt.isSupported()?vt.trigger(e):function(e){var t=e.appInteractionId,n=e.ruleId,r=e.queue,i=e.state,o=e.inviteId,s=(e.triggerAppId,e.trackingId),c=e.appId,u=e.dockId,l=St(e,gt),f={chat:{assistQueue:r}},d=Object(a.a)({},{appInteractionId:t,sc:n,queue:r,rc:"maximized"===i?"p":"b",btnName:o,btnTyp:o,trackingId:s},l),p={workflowConfig:f};ve.a.refreshContext(d),Hr.startInteraction(c,u,p)}(e)}var Tt,It,Ot,At=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"init",value:function(e){var t,n=e.onStateChange,r=e.securityRestrictions,i=e.disableBackgroundInvite,o=St(e,Et),a="desktop";c.a.isPhone&&(a="phone"),c.a.isTablet&&(a="tablet"),r.frameInFrame&&(t=$.a.sendMessage);var s=Oe.log.bind(Oe);We.a.init(o,{startInteraction:_t,logEvent:s,device:a,onStateChange:n,disableBackgroundInvite:i,fifMessageSender:t,trackInteraction:S.logInteraction.bind(S)})}},{key:"triggerInvite",value:function(e,t){var n=He.a.get(e);u.a.isUndefinedOrNull(t)?Hr.startInteraction(e):We.a.triggerInvite({appId:e,invites:n.invites,supportHours:n.supportHours,workflowConfig:n.workflowConfig.chat||{}},t)}},{key:"removeInvite",value:function(e){We.a.removeInvite(e)}},{key:"setInteractionActive",value:function(e){l.a.isBoolean(e,"InviteInterface: status"),We.a.setInteractionActive(e)}}],(n=null)&&bt(t.prototype,n),r&&bt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),wt=n(29);function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==Ct(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Ct(o)?o:String(o)),r)}var i,o}var Rt,kt=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"init",value:function(e){Tt=e.metaData,It=e.storageType}},{key:"getPopupWindowConfig",value:function(e,t){var n,i,o=He.a.get(e),a=function(e){var t={};switch(e.popupWindow.windowPosition){case r.a.POSITION.TOP_LEFT:t.left=0,t.top=0;break;case r.a.POSITION.TOP_RIGHT:t.left=window.screen.width-e.windowWidth,t.top=0;break;case r.a.POSITION.BOTTOM_LEFT:t.left=0,t.top=window.screen.height-e.windowHeight;break;case r.a.POSITION.BOTTOM_RIGHT:t.left=window.screen.width-e.windowWidth,t.top=window.screen.height-e.windowHeight;break;default:t.left=0,t.top=0}return t}(o),s=(i=["".concat(wt.a.URL_PARAMS.CLIENT_KEY,"=").concat(Tt.key),"".concat(wt.a.URL_PARAMS.IS_POPUP,"=true")].join("&"),n="".concat(Tt.path,"/apploader.html"),n=x.a.parseUrl(n).secure().href,"".concat(n,"?").concat(i)),c={appId:e,overrideConfig:t,context:ve.a.getContext(),storageType:It};return{windowUrl:s,windowName:W.generateSecureWindowName(c),windowFeatures:["width=".concat(o.popupWindow.windowWidth),"height=".concat(o.popupWindow.windowHeight),"resizeable=yes","left=".concat(a.left),"top=".concat(a.top)].join(",")}}},{key:"start",value:function(e,t){var n=this;if(Ot)Ot.focus();else{var i=this.getPopupWindowConfig(e,t),o=i.windowUrl,a=i.windowName,s=i.windowFeatures;if(Ot=parent.window.open(o,a,s),me.browser.set(r.a.DISPLAY_MODE_KEY,r.a.DISPLAY_MODE.NONE),me.addListener(r.a.VISITOR_SESSION_ID_KEY,(function(e,t){t&&(Hr.update(r.a.INITIAL_STATE,{chat:{visitorSessionId:t}}),Hr.reconcileWidget())})),me.addListener(r.a.VA_TURNS_ID_KEY,(function(e,t){t&&(Hr.update(r.a.INITIAL_STATE,{va:{turnsId:t}}),Hr.reconcileWidget())})),me.addListener(r.a.DOMAIN_ALIASES_KEY,(function(e,t){var i=t;n.update(r.a.INITIAL_STATE,{chat:{domainAliases:i}})})),Z.getStorageType()===r.a.STORAGE_TYPES.CUSTOM)var c=Q.a.requestInterval((function(){Ot.closed&&(Hr.cleanUp(),Q.a.clearRequestInterval(c))}),1e3)}}},{key:"resetPopupWindow",value:function(){Ot=void 0}}])&&Nt(t.prototype,n),i&&Nt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()),Dt=n(164),Lt=n(20);function Pt(e){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==Pt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Pt(o)?o:String(o)),r)}var i,o}var jt,xt,Ft=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"initialize",value:function(e){var t=e.appConfig,n=e.dockId,r=void 0===n?"":n,i=e.securityRestrictions,o=e.maximizeWidget;if(Rt)return!0;var a=(t.minimizedDock.customDocks||[]).filter((function(e){return e.dockId===r}))[0];if(!a)return!1;a.device=c.a.getDevice(),a.inviteId=r;var s,u=Dt.a.getTemplate(a.template);i.frameInFrame&&(s=$.a.sendMessage);try{Rt=new u(a,(function(e){"".concat(Lt.a.STIMULI_TYPE.ACTION,"_").concat(e)===Lt.a.STIMULI.INVITE_ACCEPTED&&o()}),s)}catch(e){return!1}return!!Rt}},{key:"setState",value:function(e){var t=e!==r.a.STYLE_STATE.MINIMIZED?Lt.a.STATE.MAXIMIZED:Lt.a.STATE.MINIMIZED;try{Rt&&Rt.setState(t,!1)}catch(e){}}},{key:"terminate",value:function(){try{Rt&&Rt.destructor()}catch(e){}Rt=void 0}},{key:"widgetNotification",value:function(e){try{Rt&&Rt.widgetUpdate(e)}catch(e){}}}],(n=null)&&Mt(t.prototype,n),i&&Mt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ut=n(93),Ht=n(14),Bt=n(33);function Gt(e){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==Gt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Gt(o)?o:String(o)),r)}var i,o}var Vt,Wt={CHAT_COBROWSE_IN_PROGRESS:"You are sharing this page.",CHAT_COBROWSE_STOP:"Stop sharing"},Kt=new d.a,qt=window,zt=document,Xt=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(e){e&&t.cobrowseSessionData&&t.cobrowseContinueSession(t.cobrowseSessionData)}.bind(this);Kt.onChange(n)}var t,n,r;return t=e,(n=[{key:"cobrowseCreateSession",value:function(e,t,n){var r=this;Wt=Object(a.a)({},Wt,n),window.isInit&&"function"==typeof window.CreateSession?window.CreateSession(e,(function(e){an.send(Be.a.COBROWSE,{state:Bt.a.STATES.INITIALIZED,adminUrl:e})}),(function(e){an.send(Be.a.COBROWSE,{state:Bt.a.STATES.STARTED,cookieData:e}),r.cobrowseSessionData=e.cookieData,r.addSharingProgressDock()}),null,t):Q.a.requestTimeout((function(){r.cobrowseCreateSession(e)}),1e3)}},{key:"disconnectCobrowse",value:function(){qt.disconnect&&(this.cobrowseSessionData=null,qt.disconnect(),this.removeSharingProgressDock())}},{key:"userClickedEndCobrowse",value:function(){an.send(Be.a.COBROWSE,{state:Bt.a.COMMANDS.USER_CLOSE}),this.disconnectCobrowse(),this.removeSharingProgressDock()}},{key:"resumeCobrowse",value:function(e){var t=this;Wt=Object(a.a)({},Wt,e.uiStrings),J.a.injectScript(e.url,(function(n){var r;"timeout"===n||"error"===n||(r="".concat(e.cobrowseId,";").concat(e.mode),t.cobrowseContinueSession(r))}),document,{id:"tfs-screenshare-js"},3e4)}},{key:"cobrowseContinueSession",value:function(e){var t=this;this.cobrowseSessionData=e,window.isInit&&"function"==typeof window.CreateSession?(window.ContinueSession(e),this.addSharingProgressDock()):Q.a.requestTimeout((function(){t.cobrowseContinueSession(e)}),1e3)}},{key:"addSharingProgressDock",value:function(){this.removeSharingProgressDock(),xt=J.a.createElement("button",{id:"tfs-cobrowse-dock-cancel"},"<span aria-hidden>\n          <svg xmlns='http://www.w3.org/2000/svg' width='10' height='9' viewBox='0 0 10 10' focusable='false'>\n            <rect width='10' height='10' fill='#FFFFFF' fill-rule='evenodd' rx='2'/>\n          </svg>\n        </span>\n        <span>".concat(Wt.CHAT_COBROWSE_STOP,"</span>")),jt=J.a.createElement("div",{id:"tfs-cobrowse-dock",class:"cobrowse-boundary"},[J.a.createElement("span",{id:"tfs-cobrowse-dock-span-2"},Wt.CHAT_COBROWSE_IN_PROGRESS),xt,J.a.createElement("style",{id:"tfs-cobrowse-dock-style"},"#tfs-cobrowse-dock {\n          position: fixed;\n          top: 0px;\n          text-align: center;\n          font-size: 12px;\n          padding: 2px;\n          color: white;\n          background: rgb(0,128,0);\n          z-index: 1000000;\n          left: 50%;\n          transform: translateX(-50%);\n          -ms-transform: translateX(-50%);\n          border-radius: 0px 0px 5px 5px;\n          -ms-border-radius: 0px 0px 5px 5px;\n          margin: 0;\n          user-select: none;\n          cursor: default;\n          font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n        }\n        #tfs-cobrowse-dock-cancel {\n          border-radius: 4px;\n          cursor: pointer;\n          background-color: rgba(0,0,0,0.2);\n          border: none;\n          color: inherit;\n          font-size: inherit;\n          line-height: 20px;\n        }\n        #tfs-cobrowse-dock-span-2 {\n          margin: 0 10px 0 10px;\n          line-height: 20px;\n        }")]),this.userClickedEndCobrowseBound=this.userClickedEndCobrowse.bind(this),xt.addEventListener("click",this.userClickedEndCobrowseBound),zt.body.appendChild(jt)}},{key:"removeSharingProgressDock",value:function(){jt=zt.getElementById("tfs-cobrowse-dock"),xt=zt.getElementById("tfs-cobrowse-dock-cancel"),jt&&(jt.parentNode.removeChild(jt),jt=null,xt.removeEventListener("click",this.userClickedEndCobrowseBound),xt=null)}}])&&Yt(t.prototype,n),r&&Yt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()),Zt=n(92);function Jt(e){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==Jt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Jt(o)?o:String(o)),r)}var i,o}function $t(e){var t=e,n=t._data;switch(t._name){case Be.a.STYLE:hr.updateState(n),ne.changeBodyStyle(n),Ge.a.alter(n===r.a.WIDGET_STATE.MAXIMIZED);break;case Be.a.READY:Hr.update(r.a.IFRAME_READY,!0),Hr.sendInitData();break;case Be.a.INTERACTION:n.action&&n.action===r.a.STORE_UPDATE?n.type&&(n.type===r.a.BROWSER_SESSION_KEY?me.browser.set(n.interactionData):n.type===r.a.TAB_SESSION_KEY&&me.tab.set(n.interactionData)):n.action&&n.action===r.a.STORE_DELETE&&(me.removeSessionData(n.interactionData),n.showWidgetOnReload||me.browser.set(r.a.SHOW_ON_RELOAD,!1));break;case Be.a.CONFIG:break;case Be.a.STATE_CHANGE:Hr.handleStateChange(n);break;case Be.a.TRACK_INTERACTION:S.logInteraction(n,n.forceFlush);break;case Be.a.TRACK_EVENT:Oe.log(n,(function(e,t){}));break;case Be.a.NOTIFICATION:hr.widgetNotification(n);break;case Be.a.DESTROY:me.browser.set(r.a.WIDGET_LOADED,!1),hr.updateState(r.a.STYLE_STATE.HIDDEN),Hr.resetInitialState(),Q.a.requestTimeout((function(){Hr.cleanUp()}),1e3);break;case Be.a.CARD:var i={widgetState:r.a.WIDGET_STATE["CARD_".concat(n.state.toUpperCase())],card:{id:n.id,name:n.name}};switch(n.state){case Ht.a.CARD_STATE.OPENING:var o;n.type===Ht.a.CARD_TYPES.SLIDINGPLUS?o=r.a.STYLE_STATE.PLUSCARD:n.type===Ht.a.CARD_TYPES.SLIDING&&(o=r.a.STYLE_STATE.CARD),u.a.isUndefinedOrNull(o)||hr.updateState(o,!0),on.send(Be.a.CARD,{id:n.id,state:Ht.a.CARD_STATE.OPEN}),n.type===Ht.a.CARD_TYPES.CUSTOM&&setTimeout((function(){return Hr.onCustomCardAction(n.id,n.name)}),100),Hr.handleStateChange(i);break;case Ht.a.CARD_STATE.CLOSING:hr.updateState(r.a.STYLE_STATE.MAXIMIZED,!0),on.send(Be.a.CARD,{id:n.id,state:Ht.a.CARD_STATE.CLOSE});break;case Ht.a.CARD_STATE.SUBMIT:case Ht.a.CARD_STATE.CANCEL:case Ht.a.CARD_STATE.CLOSE:Hr.handleStateChange(i)}break;case Be.a.COBROWSE:switch(n.state){case Bt.a.STATES.INITIALIZING:J.a.injectScript(n.url,(function(e){"timeout"===e||"error"===e||Xt.cobrowseCreateSession(n.mode,n.timeout,n.uiStrings)}),document,{id:"tfs-screenshare-js"},3e4);break;case Bt.a.COMMANDS.AGENT_CLOSE:Xt.disconnectCobrowse();break;case Bt.a.STATES.JOINED:Xt.resumeCobrowse({cobrowseId:n.cobrowseId,mode:n.mode,url:n.url,uiStrings:n.uiStrings})}break;case Be.a.HIDE_INPAGE_VIEW:Hr.hideInpageView();break;case Be.a.SHOW_INPAGE_VIEW:Hr.showInpageView()}}var en,tn,nn,rn,on=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"send",value:function(e,t){Vt.send({_name:e,_data:t})}},{key:"clear",value:function(){Vt&&Vt.clear()}},{key:"checkIntercom",value:function(){return!!Vt}},{key:"initIntercom",value:function(e,t){(Vt=new Zt.a("parent")).init({targetOrigin:e,destinationWindow:t}),Vt.addListener($t)}}])&&Qt(t.prototype,n),r&&Qt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()),an=on,sn=function(){try{window.eval("var test = (x) => x + 1")}catch(e){return!1}return!0}(),cn=function(e,t,n){var r;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=void 0,c=function(){r=null,n||e.apply(s,o)},u=n&&!r;clearTimeout(r),r=setTimeout(c,t),u&&e.apply(s,o)}};function un(e){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==un(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==un(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===un(o)?o:String(o)),r)}var i,o}var fn=document;function dn(e){return{x:e.pageX?e.pageX:e.changedTouches[0].pageX,y:e.pageY?e.pageY:e.changedTouches[0].pageY}}function pn(e){e.preventDefault(),e.stopPropagation(),tn.style.cssText="position: absolute; width: 100%; height: 100%;";var t=dn(e),n=t.x,r=t.y;en.lastXPosition=n,en.lastYPosition=r,fn.addEventListener("selectstart",yn),fn.addEventListener("dragstart",yn),fn.addEventListener("mousemove",mn),fn.addEventListener("mouseup",vn),fn.addEventListener("touchmove",mn),fn.addEventListener("touchend",vn)}function yn(){return!1}function mn(e){var t,n;en.style.opacity=.8;try{var r=dn(e);t=r.x,n=r.y}catch(e){return}var i=t-en.lastXPosition,o=n-en.lastYPosition;nn(i,o),en.lastXPosition=t,en.lastYPosition=n}function vn(){fn.removeEventListener("selectstart",yn),fn.removeEventListener("dragstart",yn),fn.removeEventListener("mousemove",mn),fn.removeEventListener("mouseup",vn),fn.removeEventListener("touchmove",mn),fn.removeEventListener("touchend",vn),en.style.opacity=1,tn.style.cssText=rn}var hn,gn,En,bn,Sn,_n,Tn,In,On,An=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"add",value:function(e,t,n){l.a.isObject(e,"element"),l.a.isObject(t,"handle"),this.remove(),en=e,tn=t,rn=t.style.cssText,nn=n,tn.addEventListener("mousedown",pn),tn.addEventListener("touchstart",pn)}},{key:"remove",value:function(){tn&&(tn.removeEventListener("mousedown",pn),tn.removeEventListener("touchstart",pn))}}])&&ln(t.prototype,n),r&&ln(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()),wn=window,Cn=document.documentElement,Nn=cn((function(e){["resize","orientationchange"].indexOf(e.type)>-1&&jn(!1),Bn(r.a.STYLE_TRANSITION.SCROLL)}),c.a.isAndroid?800:300),Rn=cn((function(){me.tab.set("position",Ln)}),1e3),kn=!1,Dn={x:0,y:0},Ln={x:0,y:0},Pn={x:108,y:108};function Mn(){wn.removeEventListener("scroll",Nn),wn.removeEventListener("orientationchange",Nn),wn.removeEventListener("resize",Nn),An.remove(),kn=!1}function jn(e){var t,n,r=me.tab.get("position");if(r&&e){var i=Un(r.x,r.y);t=i.offsetX,n=i.offsetY}else{var o=Un(xn()?0:100,100);t=o.offsetX,n=o.offsetY,t+=xn()?In:-In}Wn(t,n)}function xn(){return bn===r.a.POSITION.BOTTOM_LEFT}function Fn(){return!u.a.isUndefinedOrNull(Tn)}function Un(e,t){var n=Zn();return Kn(e/100*n.screenWidth,t/100*n.screenHeight)}function Hn(e,t){switch(hn){case r.a.STYLE_STATE.MAXIMIZED:case r.a.STYLE_STATE.CARD:Vn(e,t)}Bn(r.a.STYLE_TRANSITION.IMMEDIATE)}function Bn(e){var t,n,i,o,a;_n.frameInFrame?(t=qn(),n=t.frameWidth,i=t.frameHeight,o=zn()&&Gn(),a=!zn()&&Gn(),ne.setStyle(gn,{bottom:"0",right:a?Jn(In):"0",width:o?"100%":Jn(n),height:o?"100%":Jn(i),position:"fixed",backgroundColor:"transparent",zIndex:"214783647",boxShadow:"none",display:"block"},!0)):zn()&&Gn()?function(e){ne.setStyle(gn,{top:"0px",left:"0px",right:"0px",width:"100%",height:"100%",position:"fixed",display:"block",margin:"0 0 0 0",transition:Yn(e)}),J.a.setAttr(gn,"aria-modal","true")}(e):Fn()?ne.setStyle(gn,{width:"100%",height:"100%"}):function(e){var t=function(){var e=Dn.x,t=Dn.y,n=Zn(),i=n.screenWidth,o=n.screenHeight,a=function(){var e=On.desktop;c.a.isPhone?e=On.phone:c.a.isTablet&&(e=On.tablet);return e}(),s=a.offsetX,u=a.offsetY;switch(hn){case r.a.STYLE_STATE.MAXIMIZED:break;case r.a.STYLE_STATE.MINIMIZED:e=xn()?s:i-Pn.x-s,t=o-Pn.y-u;break;case r.a.STYLE_STATE.CARD:bn!==r.a.POSITION.BOTTOM_LEFT&&(e-=Sn.width-30);break;case r.a.STYLE_STATE.PLUSCARD:e=2*In,t=35}return Kn(e,t)}(),n=t.offsetX,i=t.offsetY,o=t.correctionX,a=t.correctionY,s=function(e,t){return{offsetLeft:wn.pageXOffset+e,offsetTop:wn.pageYOffset+t}}(n,i),u=s.offsetTop,l=s.offsetLeft,f=qn(),d=f.frameWidth,p=f.frameHeight;Vn(o,a),ne.setStyle(gn,{top:Jn(u),left:Jn(l),right:"auto",width:Jn(d),height:Jn(p),minWidth:hn===r.a.STYLE_STATE.MINIMIZED?"auto":"306px",position:"absolute",display:hn===r.a.STYLE_STATE.HIDDEN?"none":"block",margin:"auto",transition:Yn(e)}),J.a.setAttr(gn,"aria-modal","false"),En&&ne.setStyle(En,{display:hn===r.a.STYLE_STATE.MINIMIZED?"none":"block"})}(e)}function Gn(){return hn===r.a.STYLE_STATE.MAXIMIZED||hn===r.a.STYLE_STATE.CARD||hn===r.a.STYLE_STATE.PLUSCARD}function Yn(e){var t="cubic-bezier(.25,.1,.25,1)";switch(e){case r.a.STYLE_TRANSITION.SCROLL:return["top","left"].map((function(e){return"".concat(e," 300ms ").concat(t)})).join(",");case r.a.STYLE_TRANSITION.RESIZE:return["top","left","height","width"].map((function(e){return"".concat(e," 300ms ").concat(t)})).join(",");default:return""}}function Vn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e||t){var n=Dn.x,r=Dn.y;Wn(n+e,r+t)}}function Wn(e,t){Dn.x=e,Dn.y=t;var n=Zn(),r=n.screenWidth,i=n.screenHeight;0!==r&&0!==i&&(Ln.x=Math.round(e/r*100),Ln.y=Math.round(t/i*100),Rn())}function Kn(e,t){var n=e,r=t,i=0,o=0,a=Zn(),s=a.screenWidth,c=a.screenHeight,u=qn(),l=u.frameWidth,f=u.frameHeight;return n+l>s?i=s-(n+l):n<0&&(i=-n),r+f>c?o=c-(r+f):r<0&&(o=-r),{offsetX:n+=i,offsetY:r+=o,correctionX:i,correctionY:o}}function qn(){var e,t;if(_n.frameInFrame)e=Number.MAX_VALUE,t=Number.MAX_VALUE;else{var n=Zn();e=n.screenWidth,t=n.screenHeight}var i=0,o=0,a=Sn,s=a.width,c=a.height;switch(hn){case r.a.STYLE_STATE.MAXIMIZED:i=s>e?e:s,o=c>t?t:c;break;case r.a.STYLE_STATE.MINIMIZED:i=Pn.x,o=Pn.y;break;case r.a.STYLE_STATE.CARD:var u=2*s-30;i=u>e?e:u,o=c>t?t:c;break;case r.a.STYLE_STATE.PLUSCARD:i=Math.min(1920,e-2*In),o=Math.min(1080,t-70)}return{frameWidth:i,frameHeight:o}}function zn(){return Xn()===r.a.DISPLAY_MODE.FULLSCREEN}function Xn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_n;return c.a.isPhone||W.isPopup()||c.a.isTablet&&e.frameInFrame?r.a.DISPLAY_MODE.FULLSCREEN:r.a.DISPLAY_MODE.FLOATING}function Zn(){return{screenHeight:Cn.clientHeight-J.a.getKeyboardHeight(),screenWidth:Cn.clientWidth}}function Jn(e){return"".concat(Math.round(e),"px")}var Qn,$n,er={initialize:function(e){var t=e.config,n=e.container,i=e.dragHandle,o=e.securityRestrictions,a=e.hasCustomMinimize,s=e.parentElement;Mn(),function(e,t,n,i,o){hn=r.a.STYLE_STATE.MAXIMIZED,gn=t,En=n,_n=i,Tn=o;var a=e.windowPosition,s=e.windowWidth,c=e.windowHeight,u=e.windowOffset,l=e.minimizedDock;bn=a,Sn={width:s,height:c},In=u,On=l}(t,n,i,o,s),Fn()||(jn(!0),wn.addEventListener("scroll",Nn),wn.addEventListener("orientationchange",Nn),wn.addEventListener("resize",Nn)),function(){var e=_n.frameInFrame?{height:"100%",width:"100%",backgroundColor:"transparent",position:"fixed"}:{backgroundColor:"transparent",zIndex:"2147483647"};Fn()&&(e={height:"100%",width:"100%"});if(J.a.setStyle(gn,e),En){var t={position:"absolute",top:"10px",right:"90px",height:"34px",zIndex:"10",width:"".concat(Sn.width-134,"px"),cursor:"move"};J.a.setStyle(En,t),An.add(gn,En,Hn,!0)}}(),a&&(Pn.x=1,Pn.y=1),kn=!0},terminate:Mn,updateState:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(kn){hn=e;var n=t?r.a.STYLE_TRANSITION.IMMEDIATE:r.a.STYLE_TRANSITION.RESIZE;Bn(n)}},isFullScreen:zn,getDisplayModeSetting:Xn};function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(n),!0).forEach((function(t){rr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rr(e,t,n){return(t=ar(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ir(e){return(ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function or(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ar(r.key),r)}}function ar(e){var t=function(e,t){if("object"!==ir(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ir(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ir(t)?t:String(t)}var sr,cr,ur,lr,fr,dr,pr=!1,yr=document,mr=document.domain;function vr(e){var t=lr,n=t.frontendsService,r=t.appId,o=Ut.a.CONFIG_API_ACTION.WIDGET_LOADING,a=ve.a.getContext();a.appInteractionId&&S.setAppInteractionId(a.appInteractionId),n.opts.configuration?He.a.requestConfig(n,r,a,o,(function(t,n){n&&(lr=He.a.get(r)),t&&S.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_ERROR,logData:nr({action:"API_ERROR"},t)},!0),e()}),(function(e){S.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_DEBUG,logData:nr({action:"API_PERF"},e)},!0)})):e()}var hr=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"init",value:function(e){ur=e.metaData,fr=e.securityRestrictions,dr=e.isConversationalAdsApp,Ge.a.init(fr),ne.init(fr,dr)}},{key:"updateState",value:function(e,t){er.updateState(e,t),Ft.setState(e,t)}},{key:"start",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(l.a.notEmpty(e,"appId"),At.setInteractionActive(!0),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll){He.a.update(e,o),lr=He.a.get(e),Hr.isWidgetLoaded()||(me.browser.set(r.a.CONFIG_APP_ID,e),me.browser.set({app:{context:ve.a.getContext()}}),lr.workflowConfig.chat&&me.browser.set(r.a.QUEUE,lr.workflowConfig.chat.assistQueue)),(sr=Hr.getInitialState()).app.displayMode=u.a.isUndefinedOrNull(a)?er.getDisplayModeSetting(fr):r.a.DISPLAY_MODE.FULLSCREEN,me.browser.get(r.a.DISPLAY_MODE_KEY)!==r.a.DISPLAY_MODE.NONE||W.isPopup()||Z.getStorageType()!==r.a.STORAGE_TYPES.CUSTOM||(sr.app.displayMode=r.a.DISPLAY_MODE.NONE),!0===dr&&(sr.app.displayMode=r.a.DISPLAY_MODE.FULLSCREEN),Hr.update(r.a.INITIAL_STATE,sr);var s=lr.i18n,f=s.locale,d=s.uiStrings;if(me.browser.get(r.a.QUEUE)&&lr.workflowConfig.chat&&(lr.workflowConfig.chat.assistQueue=me.browser.get(r.a.QUEUE)),yr.getElementById(r.a.TFS_CONTAINER_ID)){var p,y=me.tab.get(r.a.APP_SESSION_KEY);switch(y&&(p=y.minimized),p){case!0:return an.send(Be.a.STATE_CHANGE,r.a.WIDGET_STATE.MAXIMIZED),void me.tab.set({app:{minimized:!1}});case!1:return;default:Hr.cleanUp()}}var m,v=J.a.createElement("nottoshow",{id:r.a.TFS_HIDE_COBROWSE_ID});cr=J.a.createElement("div",{id:r.a.TFS_CONTAINER_ID,class:"tfs-reset-css",role:"dialog","aria-label":d[f].ARIA_DIALOG_LABEL}),sr.app.displayMode===r.a.DISPLAY_MODE.FULLSCREEN||fr.frameInFrame||(m=J.a.createElement("div",{id:r.a.TFS_DRAG_ID,class:"tfs-reset-css",role:"dialog","aria-label":d[f].ARIA_DIALOG_LABEL}),cr.appendChild(m)),Qn=J.a.createElement("iframe",{id:r.a.TFS_IFRAME_ID,src:"about:blank",class:"tfs-reset-css",frameborder:"0",title:lr.windowTitle,style:"height: 100%; width: 100%; border: 0; background-color: transparent; overflow: hidden;",allow:"autoplay"}),cr.appendChild(Qn);var h,g=Ft.initialize({appConfig:lr,securityRestrictions:fr,dockId:t,maximizeWidget:function(){an.send(Be.a.STATE_CHANGE,r.a.WIDGET_STATE.MAXIMIZED)}}),E=me.browser.get(r.a.APP_SESSION_KEY);h=u.a.isUndefinedOrNull(E)||u.a.isUndefinedOrNull(E.context)||u.a.isEmptyOrNull(E.context.frameView)?W.isPopup()?r.a.FRAME_VIEW.POPUP:r.a.FRAME_VIEW.INPAGE:E.context.frameView,ve.a.refreshContext({dockId:g?t:"",frameView:h});var b=a||yr.body;if(er.initialize({config:lr,securityRestrictions:fr,container:cr,parentElement:a,dragHandle:m,hasCustomMinimize:g}),fr.frameInFrame&&$.a.init(er.isFullScreen()),me.browser.get(r.a.DISPLAY_MODE_KEY)!==r.a.DISPLAY_MODE.NONE||W.isPopup()?this.updateState(r.a.STYLE_STATE.MAXIMIZED):this.updateState(r.a.STYLE_STATE.HIDDEN),v?(v.appendChild(cr),b.appendChild(v)):b.appendChild(cr),fr.thirdPartyFrame){an.initIntercom(x.a.parseUrl(ur.path).origin,Qn.contentWindow);var _="renderer".concat("");Qn.src="".concat(ur.path,"/").concat(_,".html#parentOrigin=").concat(location.origin)}else{an.initIntercom(location.origin,Qn.contentWindow);try{$n=Qn.contentWindow.document}catch(e){pr=!0,Qn.src="javascript:var d=document.open();d.domain='".concat(mr,"';void(0);"),$n=Qn.contentWindow.document}$n.open()._load=function(e,t){pr&&($n.domain=e);var n="renderer".concat(sn?"":".polyfill").concat(".min"),o="".concat(t,"/js/").concat(n,".js");$n.body.appendChild(J.a.createElement("script",{id:r.a.TFS_SCRIPT_ID},"\"use strict\";/** * 24/7 Customer, Inc. Confidential, Do Not Distribute. This is an * unpublished, proprietary work which is fully protected under * copyright law. This code may only be used pursuant to a valid * license from 24/7 Customer, Inc. *//** * PreRender module * @module loader/pre-render */(function () {var _doc = document;var _htmlLoadingTemplate = \"<style type='text/css'>body {background-color: transparent;overflow: hidden;}body * {box-sizing: border-box;}#tfs_loading_container {font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;position: absolute;top: 50%;left: 50%;width: 160px;background: #fafafa;border: 1px solid #cccccc;border-radius: 10px;padding: 10px;transform: translate(-50%, -50%);-webkit-transform: translate(-50%, -50%);-ms-transform: translate(-50%, -50%);-moz-transform: translate(-50%, -50%);text-align: center;}#tfs_loading_container * {user-select: none;-moz-user-select: none;-webkit-user-select: none;-ms-user-select: none;}@keyframes tfs-spinner {to {transform: rotate(360deg);}}#tfs_loading_spinner {height: 60px;margin: 0 auto;position: relative;}#tfs_loading_spinner:after {content: '';box-sizing: border-box;position: absolute;top: 50%;left: 50%;width: 38px;height: 38px;margin-top: -19px;margin-left: -19px;border-radius: 50%;border: 2px solid rgba(145, 145, 145, .3);border-top-color: rgba(145, 145, 145, 1);animation: tfs-spinner 1.5s linear infinite;}#tfs_loading_text {font-size: 14px;color: #727272;}#tfs_loading_text:focus {outline: none;}#tfs_loading_close_button {display: none;line-height: 34px;border: none;background: #727272;color: #fafafa;border-radius: 5px;font-size: 13px;margin: 10px auto 0px;padding: 0px 20px;font-weight: bold;cursor: pointer;vertical-align: middle;outline: none;}</style><div id='tfs_loading_container' class='tfs_status_default'><div id='tfs_loading_spinner' aria-hidden></div><div id='tfs_loading_text' aria-live='polite' tabindex='-1'>\x3c!-- PRE_RENDER_LOADING --\x3e</div><button id='tfs_loading_close_button' type='button'>\x3c!-- PRE_RENDER_CLOSE --\x3e</button></div>\";_doc.getElementById('tfs_container_root_pre').innerHTML = _htmlLoadingTemplate;_doc.getElementById('tfs_loading_text').focus();})();".replace("\x3c!-- PRE_RENDER_CLOSE --\x3e",J.a.reduceTags(d[f].PRE_RENDER_CLOSE)).replace("\x3c!-- PRE_RENDER_LOADING --\x3e",J.a.reduceTags(d[f].PRE_RENDER_LOADING)))),fr.frameInFrame&&c.a.safariVersion&&(J.a.removeClass(cr,"tfs-reset-css"),Q.a.requestTimeout((function(){J.a.addClass(cr,"tfs-reset-css")}),10)),vr((function(){me.browser.get(r.a.INITIAL_WORKFLOW)||me.browser.set(r.a.INITIAL_WORKFLOW,lr.workflow),J.a.injectScript(o,(function(e){S.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_DEBUG,logData:{action:"SCRIPT_LOAD_RENDERER",url:o,status:e}},!0);var t=$n.getElementById("tfs_loading_spinner"),n=$n.getElementById("tfs_loading_text"),a=$n.getElementById("tfs_loading_close_button");switch(e){case"error":t&&J.a.hide(t),n&&(n.innerHTML="\n                    <h3>\n                      <strong>".concat(J.a.reduceTags(d[f].PRE_RENDER_FAILED_TITLE),"</strong>\n                    </h3>\n                    <div>").concat(J.a.reduceTags(d[f].PRE_RENDER_FAILED_DESC),"</div>\n                  "),a&&(J.a.show(a),a.addEventListener("click",(function(){cr.parentNode.removeChild(cr),Hr.handleStateChange({widgetState:r.a.WIDGET_STATE.WIDGET_CLOSED})}))));break;case"timeout":n&&(n.innerHTML=J.a.reduceTags(d[f].PRE_RENDER_TIMEOUT))}}),$n,{id:r.a.TFS_RENDERER_SCRIPT_ID},3e4)}))},$n.write("<!DOCTYPE html>\n        <html lang=".concat(f,'>\n          <head>\n            <meta charset="utf-8">\n            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\n          </head>\n          <body\n            style=\'position:relative;height:100%;height:100vh;margin:0 auto;overflow:hidden;\'\n            onload=\'document._load("').concat(mr,'", "').concat(ur.path,"\");'>\n            <div id=").concat(r.a.TFS_CONTAINER_ROOT_ID,"></div>\n            <div id=").concat(r.a.TFS_CONTAINER_ROOT_PRE_ID,"></div>\n          </body>\n        </html>")),$n.close()}me.browser.set(r.a.WIDGET_LOADED,!0),me.browser.set(r.a.SHOW_ON_RELOAD,!0),W.isPopup()&&me.browser.set(r.a.DISPLAY_MODE_KEY,r.a.DISPLAY_MODE.NONE),Hr.handleStateChange({widgetState:r.a.WIDGET_STATE.WIDGET_LOADING})}else Q.a.requestTimeout((function(){n.start(e,t,o,a)}),50)}},{key:"stop",value:function(){var e=yr.getElementById(r.a.TFS_HIDE_COBROWSE_ID);return!!e&&(e.parentNode.removeChild(e),er.terminate(),Ft.terminate(),S.unsetAppInteractionId(),At.setInteractionActive(!1),Hr.handleStateChange({widgetState:r.a.WIDGET_STATE.WIDGET_CLOSED}),cr=void 0,!0)}},{key:"widgetNotification",value:function(e){Ft.widgetNotification(e)}}])&&or(t.prototype,n),o&&or(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}());function gr(e){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach((function(t){_r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tr(r.key),r)}}function _r(e,t,n){return(t=Tr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tr(e){var t=function(e,t){if("object"!==gr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==gr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===gr(t)?t:String(t)}var Ir,Or,Ar,wr,Cr,Nr=!1,Rr=!1,kr=!1,Dr=window,Lr="default",Pr={},Mr={app:{},va:{},messaging:{}},jr=[],xr=!1;function Fr(){var e,t=_r({},r.a.WIDGET_LOADED,!1);W.isPopup()&&Ir===r.a.STORAGE_TYPES.CUSTOM&&(t=Object(a.a)({},t,(_r(e={},r.a.SHOW_ON_RELOAD,!1),_r(e,"syncCustomStorage",!0),e)));me.browser.set(t)}function Ur(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={messaging:{brandUserId:e,userTokenId:"",stickyTag:"",connectionId:"",lastSequenceAcked:"",interactionStatus:""}};me.browser.set(t),an.checkIntercom()?an.send(Be.a.INTERACTION,t):Mr=Object(a.a)({},Mr,t)}Dr.addEventListener("touchstart",(function e(){!Nr||c.a.isTablet||c.a.isPhone||(S.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_DEBUG,logData:{action:"USER_TOUCH_DETECTED_ON_DESKTOP"}},!0),Dr.removeEventListener("touchstart",e))}),!1);var Hr=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"init",value:function(e){var t=this;if(!Nr){Ar=e.onStateChange,Cr=e.metaData,Lr=e.appId,Ir=e.storageType,xr=e.isConversationalAdsApp;var n=e.windowName,i=He.a.get(Lr);if(hr.init({metaData:Cr,isConversationalAdsApp:xr,securityRestrictions:e.securityRestrictions}),kt.init({metaData:Cr,storageType:Ir}),W.isPopup()||me.addListener(r.a.WIDGET_LOADED,(function(e,n){var r=!!n;At.setInteractionActive(r),r||t.cleanUp(),ne.changeBodyStyle(),Ge.a.alter(!1)})),!W.isPopup()||c.a.isTablet||c.a.isPhone||me.addListener(r.a.DISPLAY_MODE_KEY,(function(e,n){u.a.isEmptyOrNull(n)&&t.closePopupView()})),me.browser.get(r.a.SHOW_ON_RELOAD)){var o=!1,a=me.browser.get(r.a.CHAT_SESSION_KEY),s=!1;if(i.apis.forceEndInteraction){var l=re.a.getFunctionReference(i.apis.forceEndInteraction);s=!!l&&l()}s&&!a&&(me.removeSessionData(),me.browser.set(r.a.WIDGET_LOADED,!1),me.browser.set(r.a.SHOW_ON_RELOAD,!1),o=!0),W.isPopup()&&(Mr.app.isPopup=!0,Ve.enable(),Dr.addEventListener("unload",Fr),Or=W.getWindowParams(),Dr.name=n),o||this.reconcileWidget()}else W.isPopup()?(Mr.app.isPopup=!0,Ve.enable(),Dr.addEventListener("unload",Fr),Or=W.getWindowParams(),hr.start(Lr,"",Or.overrideConfig,wr),Dr.name=n):me.browser.set(r.a.WIDGET_LOADED,!1);Nr=!0}}},{key:"startInteraction",value:function(e,t,n){if(Nr){Lr=e,Pr=n,me.tab.set(r.a.INITIATOR,!0);var i=He.a.get(e);W.isPopup()||!i.popupWindow.initial||c.a.isTablet||c.a.isPhone?hr.start(Lr,t,n,wr):kt.start(Lr,n)}}},{key:"sendSystemMessage",value:function(e){var t=!1;return kr&&(an.send(Be.a.SYSTEMMSG,e),t=!0),t}},{key:"sendContext",value:function(e){!function(e){kr&&an.send(Be.a.CONTEXT,e)}(e)}},{key:"isWidgetLoaded",value:function(){return!!me.browser.get(r.a.WIDGET_LOADED)}},{key:"updateState",value:function(e){if(e[r.a.SOURCE]!==me.getTabId()&&an.checkIntercom()){var t=Object(a.a)({},e[r.a.STORAGE_KEY_NAMES.TAB_SESSION],e[me.getTabId()]);an.send(Be.a.INTERACTION,t)}}},{key:"isWidgetReconciled",value:function(){return Rr}},{key:"getInitialState",value:function(){return Mr}},{key:"resetInitialState",value:function(){Mr={app:{},va:{},messaging:{}}}},{key:"update",value:function(e,t){switch(e){case r.a.INITIAL_STATE:Mr=Object(a.a)({},Mr,t);break;case r.a.IS_RECONCILED:Rr=t;break;case r.a.IFRAME_READY:(kr=t)&&this.onIframeReady()}}},{key:"onIframeReady",value:function(){var e,t,n,i,o,a=He.a.get(Lr);if(Rr){i=!!a.forceMaximizeInNewTab,W.isPopup()||(c.a.isPhone?o=!0:!0===xr?o=!1:me.isExistingTab||(o=!i),u.a.isUndefinedOrNull(o)||(Mr.app.minimized=o,me.tab.set({app:{minimized:o}})));var s=me.tab.get(r.a.INITIATOR);(!s||s&&a.popupWindow.initial)&&(e=me.browser.get(r.a.VA_SESSION_KEY)||{},t=e.poller,n=e.turnsId,!t&&n&&(Mr.va.poller=!0,me.browser.set({va:{poller:!0}})))}var l=me.tab.get(r.a.APP_SESSION_KEY);l&&!0===l.minimized?this.handleStateChange({widgetState:r.a.WIDGET_STATE.MINIMIZED}):this.handleStateChange({widgetState:r.a.WIDGET_STATE.MAXIMIZED})}},{key:"sendInitData",value:function(){var e=He.a.get(Lr),t=ve.a.getContext(),n=me.browser.get(r.a.MESSAGING_SESSION_KEY);an.send(Be.a.CONFIG,{config:e,context:br(br({},t),{},{urls:Fe.getJourneyEncoded()})}),an.send(Be.a.EXTENSIBLE_LISTENERS,{listeners:jr}),Rr&&(Mr=Object(a.a)({},Mr,me.browser.get(),me.tab.get())),n&&(Mr=Object(a.a)({},Mr,{messaging:n})),W.isPopup()?Mr.app.storageType=Or.storageType:(Mr.app.storageType=Ir,Mr.app.popupWindowConfig=kt.getPopupWindowConfig(Lr,Pr)),Mr.app.basePath=Cr.path,an.send(Be.a.INTERACTION,Mr)}},{key:"handleStateChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(e.widgetState){case r.a.WIDGET_STATE.CHAT_ENDED:W.isPopup()&&Ve.disable()}try{Ar(e),Dr.dispatchEvent(new CustomEvent(r.a.STATE_CHANGE_EVENT,{detail:e}))}catch(e){}}},{key:"onCustomCardAction",value:function(e,t){l.a.notEmpty(e,"id"),l.a.notEmpty(t,"name");var n=He.a.get(Lr),r=re.a.getFunctionReference(n.apis.onCustomCardAction);G.a.isFunction(r)?r(e,t,{}):this.sendCustomCardResponse(e,t,!1,{})}},{key:"login",value:function(e){return!!e&&(Ur(e.trim()),!0)}},{key:"logout",value:function(){Ur()}},{key:"getSessionContext",value:function(){var e=me.browser.get(r.a.CHAT_SESSION_KEY),t={};e&&(t[r.a.INTERACTION_ID]=e[r.a.INTERACTION_ID],t[r.a.VISITOR_SESSION_ID]=e[r.a.VISITOR_SESSION_ID]);var n=ve.a.getContext()[r.a.PRECHAT_DATA_KEYS.APP_INTERACTION_ID];return n&&(t[r.a.PRECHAT_DATA_KEYS.APP_INTERACTION_ID]=n),t}},{key:"setUserProfile",value:function(e){e&&me.browser.set(r.a.USER_PROFILE,e)}},{key:"setParentElement",value:function(e){l.a.isObject(e,"parentElement"),wr=e}},{key:"sendCustomCardResponse",value:function(e,t,n,r){an.checkIntercom()&&an.send(Be.a.CARD,{id:e,name:t,isSuccess:n,responseData:r,state:Ht.a.CARD_STATE.SUBMIT,type:Ht.a.CARD_TYPES.CUSTOM})}},{key:"addExtensibleListener",value:function(e){jr=e}},{key:"dispatchAction",value:function(e,t){an.checkIntercom()&&an.send(Be.a.DISPATCH_ACTION,{actionName:e,actionData:t})}},{key:"cleanUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re.a.noop;if(Nr){hr.stop(),kt.resetPopupWindow();var t=He.a.get(me.browser.get(r.a.CONFIG_APP_ID));t&&!u.a.isUndefinedOrNull(t.prechat)&&me.removeSessionData([r.a.MESSAGING_SESSION_KEY]),me.browser.set(r.a.SHOW_ON_RELOAD,!1),me.browser.set(r.a.DISPLAY_MODE_KEY,""),me.browser.set(r.a.INITIAL_WORKFLOW,""),me.tab.set(r.a.INITIATOR,!1),me.removeSessionData([r.a.CONFIG_APP_ID,r.a.APP_SESSION_KEY,r.a.CHAT_SESSION_KEY,r.a.VA_SESSION_KEY,r.a.CARDS_SESSION_KEY]),this.update(r.a.IFRAME_READY,!1),this.update(r.a.IS_RECONCILED,!1),He.a.reset(Lr),an.clear(),Q.a.requestTimeout(e,300)}}},{key:"reconcileWidget",value:function(){if(!Rr){Rr=!0;var e={},t=me.browser.get(r.a.INITIAL_WORKFLOW);t&&(e.workflow=t);var n=ve.a.getContext(),i=n&&n.dockId?n.dockId:"";hr.start(Lr,i,e,wr)}}},{key:"hideInpageView",value:function(){me.browser.set(r.a.DISPLAY_MODE_KEY,r.a.DISPLAY_MODE.NONE),hr.updateState(r.a.STYLE_STATE.HIDDEN)}},{key:"showInpageView",value:function(){me.browser.set(r.a.DISPLAY_MODE_KEY,"");var e=me.tab.get(r.a.APP_SESSION_KEY);e&&e.minimized?hr.updateState(r.a.STYLE_STATE.MINIMIZED):hr.updateState(r.a.STYLE_STATE.MAXIMIZED)}},{key:"closePopupView",value:function(){Ve.disable(),Dr.removeEventListener("unload",Fr),Dr.close()}}])&&Sr(t.prototype,n),i&&Sr(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()),Br=n(231),Gr=n(232),Yr=n(233),Vr=n(234),Wr=n(235),Kr=n(113);function qr(e){return(qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zr(){return(zr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Xr(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function Xr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ei(e)););return e}function Zr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jr(e,t)}function Jr(e,t){return(Jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ei(e);if(t){var i=ei(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $r(this,n)}}function $r(e,t){if(t&&("object"===qr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ei(e){return(ei=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ti(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ni(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,si(r.key),r)}}function ri(e,t,n){return t&&ni(e.prototype,t),n&&ni(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ii(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ii(Object(n),!0).forEach((function(t){ai(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ii(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ai(e,t,n){return(t=si(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function si(e){var t=function(e,t){if("object"!==qr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===qr(t)?t:String(t)}var ci,ui=document,li=["dispatchAction"],fi={},di=!1,pi=function(e){var t=He.a.get(e),n=ve.a.getContext();S.init(fi.key||"default",t.frontendsService,{vi:n.vi,tabId:me.getTabId(),userAgent:navigator.userAgent,browser:n.browser||void 0,device:n.device_id||void 0,os:n.os||void 0}),S.setAppId(e),Oe.configure({channelSessionId:"".concat(n.vi,"::").concat(n.asid),events:t.events,onTrackEvent:t.apis.onTrackEvent?re.a.getFunctionReference(t.apis.onTrackEvent):void 0,logger:function(e){S.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_ERROR,logData:oi({},e)},!0)}});var a=function(e){l.a.isArray(e,"securityRestrictions");var t={frameInFrame:!1,thirdPartyFrame:!1};return e.forEach((function(e){switch(e){case o.a.SECURITY.FRAME_IN_FRAME:t.frameInFrame=!0;break;case o.a.SECURITY.THIRD_PARTY_FRAME:t.thirdPartyFrame=!0}})),t}(t.securityRestrictions);a===o.a.SECURITY.FRAME_IN_FRAME&&ne.changeBodyStyle(o.a.IFRAME_BODY);var s=re.a.getFunctionReference(t.apis.onStateChange)||re.a.noop,f="true"===fi.conversationads;Hr.init({metaData:fi,securityRestrictions:a,onStateChange:s,appId:e,storageType:Z.getStorageType(),isConversationalAdsApp:f,windowName:t.windowName}),At.init({supportHours:t.supportHours,timeZoneOffset:t.timeZoneOffset,securityRestrictions:a,onStateChange:s,disableBackgroundInvite:t.disableBackgroundInvite,appId:e}),Fe.init(t.journey,a,fi.currentpagedata);var d=me.browser.get(r.a.PRECHAT_DATA_KEYS.VISITOR_ID);u.a.isEmptyOrNull(d)?me.browser.set(r.a.PRECHAT_DATA_KEYS.VISITOR_ID,ci):ci!==d&&(S.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_ERROR,logData:{action:"VISITOR_ID_CHANGED",prevVisitorId:d,nextVisitorId:ci,widgetLoaded:Hr.isWidgetLoaded(),storage:Z.getStorageType()}},!0),Oe.log({event:"visitorIdChanged",eventData:{eventType:"VISITOR_ID_CHANGED",eventSource:"UDE",nextVi:ci,prevVi:d,version:"ude-1.54.6",tabId:me.getTabId()}}),me.browser.set(r.a.PRECHAT_DATA_KEYS.VISITOR_ID,ci)),S.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.PAGE_INIT,logData:{storage:Z.getStorageType(),storageReason:Z.getStorageTypeReasons(),ieVersion:c.a.ieVersion||void 0,safariVersion:c.a.safariVersion||void 0,chromeVersion:c.a.chromeVersion||void 0,isMobileSafari:c.a.isMobileSafari||void 0,isAndroidTablet:c.a.isAndroidTablet||void 0,isIpad:c.a.isIpad||void 0,isTablet:c.a.isTablet||void 0,iosVersion:c.a.iosVersion||void 0,isPhone:c.a.isPhone||void 0,path:"".concat(location.origin).concat(location.pathname),compatMode:ui.compatMode}},!0),ui.compatMode,vt.configure(t.googleBusinessMessages),ct.configure(t.appleBusinessChat,(function(e,t){e&&S.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_DEBUG,logData:oi({action:"SCRIPT_LOAD_ABC"},t)},!0),function(){if(di=!0,Hr.handleStateChange({widgetState:r.a.WIDGET_STATE.PAGE_INIT}),fi.initdone){var e=re.a.getFunctionReference(fi.initdone);"function"==typeof e&&e()}}()}))},yi=function(){function e(){var t=this;ti(this,e);var n=document.getElementById(r.a.WIDGET_LOADER_ID),o=x.a.parseUrl(n.src);n.setAttribute("data-path",o.origin+o.pathname.match(/(.*)\/js\/.*/)[1]),n.setAttribute("data-origin",o.origin),fi=n.dataset;var a,s={};try{s=JSON.parse(decodeURIComponent(fi.prechatdata))}catch(e){}if(s.clientId=fi.key,ve.a.refreshContext(s),ci=s.vi,delete fi.prechatdata,!0===Kr.a.localStorage){var c=window.localStorage.getItem("tfs.config.v2");try{u.a.isUndefinedOrNull(c)||(a=JSON.parse(c))}catch(e){}}if(He.a.init({metaData:fi,v2:a}),"true"===fi.auto){var l=fi.appid;if(W.isPopup()){var f=W.getWindowParams();f&&f.appId&&(l=f.appId),f&&f.context&&ve.a.refreshContext(f.context)}He.a.fetch(l,{},(function(e){e.appId&&t.init(e.appId),e.err&&S.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_ERROR,logData:oi({action:"API_ERROR"},e.err)},!0)}),(function(e){S.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_DEBUG,logData:oi({action:"API_PERF"},e)})}))}}return ri(e,[{key:"init",value:function(e){var t;if(re.a.isString(e))t=e;else{var n=e;t=n.appId,He.a.set(n)}var o=He.a.get(t),a=!W.isPopup()&&o.forceCrossOrigin;Z.init({initCallback:function(e){!function(e,t){var n=He.a.get(e),o=re.a.getObjectReference("workflowConfig.chat.assistAccountClientKeyMap",n),a=Array.isArray(o)&&o.length>1,s=ve.a.getContext()[r.a.PRECHAT_DATA_KEYS.ACTIVE_SESSION];me.init({storage:t,activeSession:s,interLobEnabled:a,onStoreUpdate:Hr.updateState.bind(Hr)});var c=me.browser.get(r.a.APP_SESSION_KEY);c&&c.context&&ve.a.refreshContext(c.context);var u=me.browser.get(r.a.CONFIG_APP_ID);u?He.a.fetch(u,{},(function(e){e.appId&&pi(e.appId),e.err&&S.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_ERROR,logData:oi({action:"API_ERROR"},e.err)},!0)}),(function(e){S.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_DEBUG,logData:oi({action:"API_PERF"},e)})})):pi(e)}(t,e)},clientId:fi.key,xdPath:fi.path,getData:o.apis.getData?re.a.getFunctionReference(o.apis.getData):void 0,setData:o.apis.setData?re.a.getFunctionReference(o.apis.setData):void 0,forceCrossOrigin:a})}},{key:"startInteraction",value:function(e,t){if(!di)return!1;var n=t,r=e,o=n&&n.appId;return r&&r.prechatData&&(ve.a.refreshContext(r.prechatData),r.prechatData.queue&&(n||(n={}),n.fallbackQueue=e.prechatData.queue),delete r.prechatData),He.a.fetch(o,r,(function(e){if(e.appId){S.setAppId(e.appId);var t=He.a.get(e.appId);vt.configure(t.googleBusinessMessages),ct.configure(t.appleBusinessChat,(function(){return At.triggerInvite(e.appId,n)}))}e.err&&S.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_ERROR,logData:oi({action:"API_ERROR"},e.err)},!0)}),(function(e){S.logInteraction({logLevel:i.a.LOG_LEVEL.INFO,message:i.a.LOG_EVENTS.SYSTEM_DEBUG,logData:oi({action:"API_PERF"},e)})})),!0}},{key:"endInteraction",value:function(e){return At.removeInvite(e)}},{key:"sendContext",value:function(e){Hr.sendContext(e)}},{key:"pushJourneyUrl",value:function(e,t){l.a.notEmpty(e,"pushJourneyUrl: Title"),l.a.notEmpty(t,"pushJourneyUrl: Url"),Fe.pushUrl(e,t),Hr.sendContext(ai({},r.a.JOURNEY,Fe.getJourneyEncoded()))}},{key:"sendSystemMessage",value:function(e,t){l.a.notEmpty(e,"sendSystemMessage: content is not string or empty"),void 0!==t&&l.a.notEmpty(t,"sendSystemMessage: type is not string or empty"),Hr.sendSystemMessage({content:e,type:t})}},{key:"isWithinSupportHours",value:function(e){if(!di)return!1;var t=me.browser.get(r.a.CONFIG_APP_ID),n=He.a.get(t||"default");return new Ue.a(n.supportHours,e).isWithinSupportHours()}},{key:"isInteractionActive",value:function(){return Hr.isWidgetLoaded()}},{key:"login",value:function(e){return l.a.notEmpty(e,"login: brandUserId is not string or empty"),!!di&&Hr.login(e)}},{key:"logout",value:function(){return!!di&&(Hr.logout(),!0)}},{key:"setUserProfile",value:function(e){return!!di&&(Hr.setUserProfile(e),!0)}},{key:"getSessionContext",value:function(){return!!di&&Hr.getSessionContext()}},{key:"sendCustomCardResponse",value:function(e,t,n,r){return!!di&&Hr.sendCustomCardResponse(e,t,n,r)}}]),e}(),mi=function(e){Zr(n,e);var t=Qr(n);function n(){return ti(this,n),t.apply(this,arguments)}return ri(n,[{key:"init",value:function(e){di||Br.a&&Gr.a&&Yr.a&&Vr.a&&Wr.a&&zr(ei(n.prototype),"init",this).call(this,e)}}]),n}(yi),vi=function(e){Zr(n,e);var t=Qr(n);function n(){var e;return ti(this,n),e=t.call(this),Hr.addExtensibleListener(li),e}return ri(n,[{key:"init",value:function(e,t){di||(u.a.isUndefinedOrNull(t)||Hr.setParentElement(t),zr(ei(n.prototype),"init",this).call(this,e))}},{key:"reconfigure",value:function(e,t){u.a.isUndefinedOrNull(t)||Hr.setParentElement(t),zr(ei(n.prototype),"init",this).call(this,e)}},{key:"cleanUp",value:function(e){return Hr.cleanUp(e)}},{key:"dispatchAction",value:function(e,t){Hr.dispatchAction(e,t)}}]),n}(yi);t.a=function(e){return e?new vi:new mi}},45:function(e,t,n){"use strict";var r=n(3),i=n(12),o=n(24),a=n(13);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),r)}var i,o}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,(n=[{key:"createRequest",value:function(e,t){r.a.assert(o.a.isAllowedSecureDomain(t),"insecure or non-247 domain, skipping.");var n=new XMLHttpRequest,i="onreadystatechange";return"withCredentials"in n?(n.open(e,t,!0),""===n.responseType&&(i="onload")):"undefined"!=typeof XDomainRequest?((n=new XDomainRequest).open(e,t),i="onload"):n=null,{xhr:n,onloadHandler:i}}},{key:"makeRequest",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",n=arguments.length>1?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.a.noop,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:a.a.noop,f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"text",d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:45e3,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:a.a.noop,y=arguments.length>9&&void 0!==arguments[9]?arguments[9]:a.a.noop,m=arguments.length>10&&void 0!==arguments[10]?arguments[10]:a.a.noop;r.a.isFunction(u,"success"),r.a.isFunction(l,"error");var v=n;if("get"===t.toLowerCase()&&null!=c){var h=Object.keys(c).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(c[e]))})).join("&");v="".concat(v,"?").concat(h)}9===i.a.ieVersion&&(s.Authorization&&(v=o.a.parseUrl(v).appendToSearch({api_key:s.Authorization}).href),v=v.replace(/(http(s?):)\/\//,"//"));var g=this.createRequest(t,v),E=g.xhr,b=g.onloadHandler;if(E){E.requestBeginTs=(new Date).getTime(),E.isErrorHandled=!1,E.timeout=d,Object.keys(s).map((function(e){return E.setRequestHeader&&E.setRequestHeader(e,s[e]),0})),E.responseType=f;var S=function(){if("onreadystatechange"!==b||4===E.readyState){var t;try{t=E.status}catch(e){t=0}if(0===t)_();else if("blob"===E.responseType)E.response&&200===t?u(E.response,e.getResponseHeaderMap(E)):_();else if(E.responseText||204===t){if(204===t){var n={code:204,statusText:E.statusText};u(JSON.stringify(n))}else Math.floor(t/100)>=4?_():u(E.responseText,e.getResponseHeaderMap(E));E.requestDoneTs=(new Date).getTime(),void 0===E.onloadstart&&void 0===E.onloadend&&m({url:v,statusCode:E.status,loadTime:-1,turnTime:E.requestDoneTs-E.requestBeginTs})}else _()}},_=function(t){if(!E.isErrorHandled){var n=E.statusText||("timeout"===t.type?"request timeout":"CORS error");E.requestDoneTs=(new Date).getTime(),l({url:v,errorMsg:n,errorInfo:"blob"===E.responseType?E.response:E.responseText,code:E.status},E.response,e.getResponseHeaderMap(E)),E.isErrorHandled=!0}};E[b]=S,"ontimeout"in E&&(E.ontimeout=_),E.addEventListener("progress",p,!1),E.upload.addEventListener("progress",p,!1),E.addEventListener("error",_,!1),E.addEventListener("abort",y,!1),E.addEventListener("loadstart",(function(){E.requestStartTs=(new Date).getTime()}),!1),E.addEventListener("loadend",(function(){E.requestEndTs=(new Date).getTime(),m({url:v,statusCode:E.status,loadTime:E.requestEndTs-E.requestStartTs,turnTime:E.requestDoneTs-E.requestBeginTs})}),!1),E.onerror=_,E.send(c)}}},{key:"getResponseHeaderMap",value:function(e){var t={};return e.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((function(e){var n=e.split(": ");n.length>=2&&(t[n[0].trim().toLowerCase()]=n[1].trim())})),t}}])&&c(t.prototype,n),s&&c(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=u},54:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===r(a)?a:String(a)),i)}var o,a}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"documentHasFocus",value:function(){return document.hasFocus?document.hasFocus():"hidden"in document?!document.hidden:!document.visibilityState||"visible"===document.visibilityState}}],(n=[{key:"onChange",value:function(e){var t="hidden",n=function(n){var r=n||window.event,i={focus:!0,focusin:!0,pageshow:!0,blur:!1,focusout:!1,pagehide:!1};r.type in i?e(i[r.type]):e(!document[t])};if(void 0===document.hidden){var r=["moz","webkit","ms"];Object.keys(r).forEach((function(e){var i=r[e].concat("Hidden");i in document&&(t=i,document.addEventListener(r[e].concat("visibilitychange"),n))})),"onfocusin"in document?(document.onfocusin=n,document.onfocusout=n):(window.onpageshow=n,window.onpagehide=n,window.onfocus=n,window.onblur=n)}else document.addEventListener("visibilitychange",n)}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=o},59:function(e,t,n){"use strict";var r=n(54),i=n(18),o=n(10),a=n(3);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),r)}var i,o}var u=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.audioContainer=i.a.createElement("div",{style:"display: none"}),"complete"!==l.readyState?o.a.requestTimeout((function(){l.body.appendChild(t.audioContainer)}),100):l.body.appendChild(this.audioContainer)}var t,n,s;return t=e,(n=[{key:"register",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.a.notEmpty(e,"AudioNotification::id"),!f[e]&&(f[e]=i.a.createElement("audio",{preload:"auto",controls:"false",hidden:"true"},[i.a.createElement("source",{src:t.mp3,type:"audio/mpeg"})]),this.mute(e),this.audioContainer.appendChild(f[e]),!0)}},{key:"deregister",value:function(e){return a.a.notEmpty(e,"AudioNotification::id"),!!f[e]&&(f[e].parentNode.removeChild(f[e]),delete f[e],!0)}},{key:"optIn",value:function(e){if(!f[e])return!1;try{this.mute(e),f[e].play()}catch(e){return!1}return!0}},{key:"play",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!f[e])return!1;if(t||r.a.documentHasFocus()){try{this.unmute(e),f[e].play()}catch(e){return!1}return!0}return!1}},{key:"volume",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return!!f[e]&&(f[e].muted=!t,f[e].volume=t,!0)}},{key:"mute",value:function(e){return this.volume(e,0)}},{key:"unmute",value:function(e){return this.volume(e)}},{key:"destroy",value:function(){i.a.removeElement(this.audioContainer)}}])&&c(t.prototype,n),s&&c(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}(),l=document,f={};t.a=new u},6:function(e,t,n){"use strict";var r={TFS_HIDE_COBROWSE_ID:"tfs_hide_cobrowse",TFS_CONTAINER_ID:"tfs_container",TFS_CONTAINER_ROOT_ID:"tfs_container_root",TFS_CONTAINER_ROOT_PRE_ID:"tfs_container_root_pre",TFS_DRAG_ID:"tfs_drag",TFS_OVERLAY_ID:"tfs_overlay",TFS_IFRAME_ID:"tfs_interaction_iframe",TFS_SCRIPT_ID:"tfs-js-iframe-async",APPLE_SCRIPT_ID:"tfs-js-abc",TFS_RENDERER_SCRIPT_ID:"tfs-js-renderer",VISITOR_SESSION_ID:"visitorSessionId",INTERACTION_ID:"interactionId",CHAT:"chat",QUEUE:"queue",CHAT_STATUS:"chatStatus",TAB_SESSION_KEY:"tab-session-key",BROWSER_SESSION_KEY:"browser-session-key",PREVIOUS_WINDOW_NAME:"previous-window-name",LAST_UPDATED_TIME:"ts",SOURCE:"source",CARDS_RESOURCE_NAME:"cards.js",CARDS_MIN_RESOURCE_NAME:"cards.min.js",WIDGET_LOADER_ID:"widget-loader",XD_SCRIPT_RESOURCE_NAME:"xd.js",XD_SCRIPT_MIN_RESOURCE_NAME:"xd.min.js",REQUIRED_KEYS:["app.context.queue","app.context.accountId","chat.visitorSessionId","chat.domainAliases","chat.startTime","va.turnsId","va.noInput","va.poller","va.vaSurveyCompleted","messaging.userTokenId","messaging.brandUserId","messaging.interactionStatus","widgetLoaded","initialWorkflow","reload","displayMode","asid","appId"],WORKFLOW:"workflow",PRECHAT_DATA_KEYS:{ACTIVE_SESSION:"asid",RULE_ID:"sc",APP_INTERACTION_ID:"appInteractionId",RULE_CATEGORY:"rc",VISITOR_ID:"vi"},STORE_UPDATE:"STORE_UPDATE",STORE_DELETE:"STORE_DELETE",DISPLAY_MODE:{FULLSCREEN:"fullscreen",FLOATING:"floating",NONE:"none"},FRAME_VIEW:{INPAGE:"inpage",POPUP:"popup"},WIDGET_STATE:{PAGE_INIT:"pageInit",WIDGET_LOADING:"widgetLoading",WIDGET_LOADED:"widgetLoaded",CARD_OPEN:"cardOpened",CARD_SUBMIT:"cardSubmitted",CARD_CANCEL:"cardCanceled",CARD_CLOSE:"cardClosed",CHAT_REQUESTED:"chatRequested",CHAT_CONNECTING:"chatConnecting",CHAT_RECONCILING:"chatReconciling",CHAT_STARTED:"chatStarted",CHAT_INTERACTIVE:"chatInteractive",CHAT_ENDED:"chatEnded",CHAT_TRANSFERRED:"chatTransferred",VA_STARTED:"vaStarted",VA_ESCALATE:"vaEscalatedToChat",VA_SURVEY_COMPLETED:"vaSurveyCompleted",VA_FINALIZE:"vaFinalized",VA_TERMINATE:"vaTerminated",VA_RECONCILED:"vaReconciled",MINIMIZED:"minimized",MAXIMIZED:"maximized",WIDGET_CLOSED:"widgetClosed",USER_ACTIVE:"userActive",USER_INACTIVE:"userInactive"},ORIENTATIONS:{LANDSCAPE:"landscape",PORTRAIT:"portrait"},JOURNEY:"urls",WIDGET_LOADED:"widgetLoaded",INITIAL_WORKFLOW:"initialWorkflow",INITIATOR:"initiator",SHOW_ON_RELOAD:"reload",DISPLAY_MODE_KEY:"displayMode",CONTENT_PATH:"content",UDE_CONFIG_JSON:"config.json",CONFIG_APP_ID:"appId",TAB_STORAGE_KEY:"tfs-tab",APP_SESSION_KEY:"app",CHAT_SESSION_KEY:"chat",VA_SESSION_KEY:"va",CARDS_SESSION_KEY:"cards",MESSAGING_SESSION_KEY:"messaging",XD_COMMANDS:{INITIALIZE:"init",INITIALIZE_ERROR:"init-error",SET:"set",GET:"get",REMOVE:"remove",UPDATE:"update"},ERROR_CODES:{LOCALSTORAGE_UNAVAILABLE:"LOCALSTORAGE_UNAVAILABLE"},TRACK_PLATFORMS:{chat:"CHAT",va:"VIRTUAL_AGENT"},STATE_CHANGE_EVENT:"stateChange",POSITION:{TOP_LEFT:"topleft",TOP_RIGHT:"topright",BOTTOM_LEFT:"bottomleft",BOTTOM_RIGHT:"bottomright"},INITIAL_STATE:"initialState",IS_RECONCILED:"isReconciled",IFRAME_READY:"iframeReady",VA_TURNS_ID_KEY:"va.turnsId",VISITOR_SESSION_ID_KEY:"chat.visitorSessionId",DOMAIN_ALIASES_KEY:"chat.domainAliases",DEFAULT_CONFIG:"default",USER_LOGIN:"login",USER_PROFILE:"userProfile",MAX_KEYBOARD_HEIGHT:{LANDSCAPE:[{MIN_SCREEN_HEIGHT:600,MAX_SCREEN_HEIGHT:850,KEYBOARD_HEIGHT:400},{MIN_SCREEN_HEIGHT:851,MAX_SCREEN_HEIGHT:1100,KEYBOARD_HEIGHT:475}],PORTRAIT:[{MIN_SCREEN_HEIGHT:800,MAX_SCREEN_HEIGHT:1150,KEYBOARD_HEIGHT:315},{MIN_SCREEN_HEIGHT:1151,MAX_SCREEN_HEIGHT:1500,KEYBOARD_HEIGHT:380}]},STYLE_STATE:{MAXIMIZED:"maximized",MINIMIZED:"minimized",CARD:"card",PLUSCARD:"pluscard",HIDDEN:"hidden"},STYLE_TRANSITION:{IMMEDIATE:"immediate",SCROLL:"scroll",RESIZE:"resize"},STORAGE_TYPES:{LOCALSTORAGE:"localstorage",CUSTOM:"custom",XD:"xd"},STORAGE_KEY_NAMES:{USER_SESSION:"tfs-user-session",TAB_SESSION:"tfs-session",TAB_PREFIX:"tfs-tab-"}},i={tag:"html",attr:{},children:[{tag:"head",children:[{tag:"meta",attr:{charset:"utf-8"}},{tag:"meta",attr:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"}}]},{tag:"body",attr:{style:"position:relative;height:100%;height:100vh;margin:0 auto;overflow:hidden;"},children:[{tag:"div",attr:{id:r.TFS_CONTAINER_ROOT_ID}},{tag:"div",attr:{id:r.TFS_CONTAINER_ROOT_PRE_ID}}]}]};r.DEFAULT_IFRAME_DOCUMENT=i,t.a=r},61:function(e,t,n){"use strict";var r=n(4),i=n(3);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),r)}var i,a}var s=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function c(e){var t=new Date,n=e,r=60*(t.getTimezoneOffset()-n)*1e3,i=t.getTime()+r;return new Date(i)}function u(e,t,n){for(var r=[],i=0;i<e.length;i+=1){var o=e[i],a=o.start,s=o.end;a=l(a,t,n),s=l(s,t,n),r.push({start:a,end:s})}return r}function l(e,t,n){var r=parseInt(e,10),i=t.getFullYear(),o=t.getMonth(),a=t.getDate()+n,s=parseInt(r/100,10);return new Date(i,o,a,s,r%100)}function f(e,t){var n=Math.abs(e-t),r=new Date(n);return{days:r.getUTCDate()-1,hours:r.getUTCHours(),minutes:r.getUTCMinutes()}}var d=function(){function e(t,n){var o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.forEach((function(e){e.queue===n&&(o=e),"default"===e.queue&&(a=e)})),i.a.isObject(a,"SupportHours:default queue object"),o||(o=a),this.timeZoneOffset=r.a.get(["timeZoneOffset"],o,0),this.supportRange=function(e){i.a.isNumber(e.timeZoneOffset,"SupportHours::timeZoneOffset");for(var t=[],n=c(e.timeZoneOffset),r=n.getDay(),o=r;o<=r+s.length;o+=1){var a=o-r,l=u(e[s[o%7]]||[{start:"0000",end:"2359"}],n,a);t.push(l)}return t}(o)}var t,n,o;return t=e,(n=[{key:"isWithinSupportHours",value:function(){var e=this.getNextAvailableTime();return e.days+e.hours+e.minutes===0}},{key:"getNextAvailableTime",value:function(){for(var e=this.supportRange,t=c(this.timeZoneOffset),n=0;n<e.length;n+=1)for(var r=0;r<e[n].length;r+=1){var i=e[n][r];if(t>=i.start&&t<=i.end)return f(t,t);if(t<=i.start)return f(i.start,t)}return 0}}])&&a(t.prototype,n),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=d},647:function(e,t,n){"use strict";n.r(t);var r=n(401),i=n(8),o=Object(r.a)(!1);window._tfs&&Object(i.a)(o,window._tfs),window._tfs=o},65:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},67:function(e,t,n){"use strict";var r,i=n(30),o=n(4);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),r)}var i,o}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"init",value:function(e){this.isFullScreen=e,this.isFullScreen&&(this.sendMessage(i.a.IFRAME_POST_MESSAGE.GET_BODY_CSS),window.addEventListener("message",this._onInboundMessageReceived.bind(this)))}},{key:"_onInboundMessageReceived",value:function(e){var t=o.a.get(["data"],e);if(!o.a.isUndefinedOrNull(t)){try{t=JSON.parse(t)}catch(e){return}if(t.msgSrc===i.a.IFRAME_INBOUND_MESSAGE.MESSAGE_SOURCE)switch(t.msg){case i.a.IFRAME_INBOUND_MESSAGE.RESP_GET_BODY_CSS:r=t.css||{}}}}},{key:"sendMessage",value:function(e,t,n){switch(e){case i.a.IFRAME_POST_MESSAGE.SET_IFRAME_CSS:parent.postMessage(JSON.stringify({msg:e,css:t,clean:n}),"*");break;case i.a.IFRAME_POST_MESSAGE.SET_IFRAME_VIEWPORT:parent.postMessage(JSON.stringify({msg:e,content:t}),"*");break;case i.a.IFRAME_POST_MESSAGE.GET_BODY_CSS:parent.postMessage(JSON.stringify({msg:e}),"*");break;case i.a.IFRAME_POST_MESSAGE.SET_BODY_CSS:this.isFullScreen&&(t.isMaximized?parent.postMessage(JSON.stringify({msg:e,css:t.css,clean:n}),"*"):parent.postMessage(JSON.stringify({msg:e,css:r,clean:n}),"*"))}}}])&&s(t.prototype,n),a&&s(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=new c},76:function(e,t,n){"use strict";t.a={workflow:"chat",workflowConfig:{},appId:"default",primaryColor:"#EF8822",primaryFgColor:"#FFFFFF",header:{borderColor:void 0},secondaryColor:"#EF8822",secondaryFgColor:"#FFFFFF",tertiaryColor:"#727272",tertiaryFgColor:"#FFFFFF",windowHeight:660,windowWidth:338,windowOffset:35,windowPosition:"bottomright",windowTitle:"Chat support",windowName:"frontends",fonts:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto","Oxygen-Sans","Ubuntu","Cantarell",'"Helvetica Neue"',"Helvetica","Arial","sans-serif"],minimizedDock:{customDocks:[],desktop:{offsetX:0,offsetY:0},phone:{offsetX:0,offsetY:0},tablet:{offsetX:0,offsetY:0}},popupWindow:{initial:!1,byUser:!1,windowWidth:450,windowHeight:680,windowPosition:"topleft"},surveyEndpoint:"",quickReply:{display:"horizontal",fgColor:void 0},textChunkingLength:void 0,notifications:{audio:{checkFocus:!0,message:"",reconciled:"",started:""},visual:{message:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==",reconciled:"",started:""}},toastMessage:{duration:3e3,showClose:!0},toastMessageBgColor:"#000000",toastMessageFgColor:"#FFFFFF",menuItemBgColor:"#555555",menuItemFgColor:"#FFFFFF",scrollFromBottom:!1,legalese:[],timeFormat:"%l:%M %p",maxUserMessageLength:1500,useDefaultQueueForNewChat:!1,timestampDisplayInterval:12e4,showPoweredBy247:!0,showAbout247:!0,typingNotificationTimeout:15e3,longPollTimeoutInterval:72e5,forceCrossOrigin:!0,forceMaximizeInNewTab:!1,nonInteractiveChat:{showSurvey:!1,showTranscript:!1,showStartNewChat:!0},interactiveChat:{showSurvey:!0,showTranscript:!0,showStartNewChat:!0},branding:{type:"none",bgColor:"#EEEEEE",static:!1,logoUrl:"",logoOffset:0,avatarUrl:""},messageBgColor:{user:"#EF8822",agent:"#EEEEED",va:"#EEEEED",notification:"#5595E5"},messageFgColor:{user:"#FFFFFF",agent:"#000000",va:"#000000",system:"#000000",typing:"#000000",notification:"#FFFFFF",link:void 0},messageBorderColor:{user:"#EF8822",agent:"#EEEEED",va:"#EEEEED"},loaderColor:"#BBBBBB",footerBgColor:"#FFFFFF",borderRadius:12,maskVisitorMessages:!0,maskWiredMessages:!0,maskMessagePatterns:[{patternStr:"\\b((?!666|000)[0-8][0-9]{2}[-\\s]*(?!00)[0-9]{2}?[-\\s]*(?!0000)[0-9]{4})\\b",patternFlags:"gm",replaceStr:"••• •• ••••",name:"ssn"}],sendButtonIcon:!1,showMessageAvatar:!1,securityRestrictions:[],i18n:{locale:"auto",uiStrings:{}},prechatData:{},icons:{statusAvailable:"",statusBusy:"",statusChat:"",statusOffline:"",fileUpload:"",sendIcon:"",agentAvatar:"",vaAvatar:""},prechat:void 0,offline:{showCountdown:!0,a11yLive:!0,widgets:[{type:"text",description:"OFFLINE_DESCRIPTION",name:"offline",textAlign:"center"},{type:"hr",name:"busy-hr"},{type:"text",name:"offline-hours",description:"CHAT_HOURS",textAlign:"center"},{type:"text",name:"offline-monday-to-friday",title:"MONDAY_TO_FRIDAY",description:"MONDAY_TO_FRIDAY_TEXT",textAlign:"center"},{type:"text",name:"offline-saturdays",title:"SATURDAYS",description:"SATURDAYS_TEXT",textAlign:"center"},{type:"text",name:"offline-sundays",title:"SUNDAYS",description:"SUNDAYS_TEXT",textAlign:"center"}]},busy:{a11yLive:!0,widgets:[{type:"text",description:"BUSY_DESCRIPTION",name:"busy",textAlign:"center"},{type:"hr",name:"busy-hr"},{type:"text",name:"busy-hours",description:"CHAT_HOURS",textAlign:"center"},{type:"text",name:"busy-monday-to-friday",title:"MONDAY_TO_FRIDAY",description:"MONDAY_TO_FRIDAY_TEXT",textAlign:"center"},{type:"text",name:"busy-saturdays",title:"SATURDAYS",description:"SATURDAYS_TEXT",textAlign:"center"},{type:"text",name:"busy-sundays",title:"SUNDAYS",description:"SUNDAYS_TEXT",textAlign:"center"}]},waiting:{showWaitTime:!0,a11yLive:!0,widgets:[]},cards:[],postchatPromo:"",surveys:[],dialog:{postchat:{title:"CHAT_SURVEY_TITLE",widgets:[{type:"rating",description:"CHAT_SURVEY_CSAT",name:"csat",ratingStyle:"csat"},{type:"rating",description:"CHAT_SURVEY_NPS",name:"nps",ratingStyle:"nps",highText:"Absolutely",lowText:"No way"},{type:"textarea",name:"textarea",textareaPlaceholder:"CHAT_SURVEY_TEXT"},{type:"button",name:"cancel",label:"CHAT_ACTION_CANCEL",colspan:6,buttonType:"cancel"},{type:"button",name:"submit",label:"CHAT_SURVEY_ACTION",colspan:6,buttonType:"submit"}]},vaSurvey:{title:"CHAT_SURVEY_TITLE",widgets:[{type:"rating",description:"CHAT_SURVEY_CSAT",name:"csat",ratingStyle:"csat"},{type:"rating",description:"CHAT_SURVEY_NPS",name:"nps",ratingStyle:"nps",highText:"Absolutely",lowText:"No way"},{type:"textarea",name:"textarea",textareaPlaceholder:"CHAT_SURVEY_TEXT"},{type:"button",name:"cancel",label:"CHAT_ACTION_CANCEL",colspan:6,buttonType:"cancel"},{type:"button",name:"submit",label:"CHAT_SURVEY_ACTION",colspan:6,buttonType:"submit"}]}},supportHours:[{queue:"default",sunday:[{start:"0000",end:"2359"}],monday:[{start:"0000",end:"2359"}],tuesday:[{start:"0000",end:"2359"}],wednesday:[{start:"0000",end:"2359"}],thursday:[{start:"0000",end:"2359"}],friday:[{start:"0000",end:"2359"}],saturday:[{start:"0000",end:"2359"}],timeZoneOffset:0}],invites:[],disableBackgroundInvite:!1,appleBusinessChat:{enabled:{phone:!1,tablet:!1,desktop:!1},loadOnly:!1,scriptUrl:"https://static.cdn-apple.com/businesschat/start-chat-button/2.1.0/index.js",businessId:"",intentId:"",groupId:"",messageBody:""},googleBusinessMessages:{enabled:{phone:!1,tablet:!1},url:"",intentId:"",groupId:""},frontendsService:{baseUrl:"https://api.247-inc.net/v1/frontends",apiKey:"UYXHhmVoZK7dDHXcoHVGBSYUwumZWnhd",opts:{configuration:!1,logger:{level:400,flushTrigger:20}}},secureCardProxyConfig:{baseUrl:"https://api.247-inc.net/v1",apiKey:"9oreh76ekjhqt0D0597nEWkoAdOACMBa"},events:{ignoreList:["queueAfterHours","caCheckFail","cardInvited","cardAccepted","cardSubmitted"]},journey:{maxUrls:5,maxUrlsLength:1500,autoPush:!0},apis:{onStateChange:"onStateChange",onTrackEvent:"SN.trackEvent",getData:"SN.getData",setData:"SN.setData",forceEndInteraction:"forceEndInteraction",onCustomCardAction:"onCustomCardAction"},fileupload:{imgRes:1024,imgQuality:.5,maxFileSizeInKb:500,minOriginalFileSizeInKb:2,maxOriginalFileSizeInKb:5e4,showCancel:!0},cobrowse:{timeout:6e5},OtpPrechatForm:{widgets:[{type:"input",disabled:!1,colspan:12,offset:0,focusColor:"#EF8822",dependencies:{contextDependencies:{}},inputType:"text",name:"otp",title:"PRECHAT_OTP_TITLE",description:"PRECHAT_OTP_DESCRIPTION",inputPlaceholder:"PRECHAT_OTP_INPUT_PLACEHOLDER",id:"otp-input",validations:[{type:"regex",errorMessage:"PRECHAT_OTP_ERROR_MESSAGE",patternStr:"^[0-9]{6}$"}],visible:!0,colCount:0},{type:"button",buttonType:"submit",colspan:12,offset:0,action:"accept",name:"otp-verify",label:"PRECHAT_OTP_VERIFY_LABEL",id:"otp-verify-button",visible:!0,colCount:0},{type:"button",buttonType:"button",colspan:5,offset:0,action:"accept",name:"otp-back",label:"PRECHAT_OTP_BACK_LABEL",id:"otp-back-button",visible:!0,color:"#EF8822",colCount:1},{type:"buttonWithTimer",buttonType:"button",duration:3e4,colspan:7,offset:0,action:"accept",name:"otp-resend",label:"PRECHAT_OTP_RESEND_LABEL",id:"otp-resend-button",visible:!0,color:"#EF8822",colCount:1},{colspan:12,content:"",dependencies:{contextDependencies:{}},id:"otp-status-message",name:"otp-status-message",offset:0,type:"html"}]}}},8:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a=function e(t){var n=arguments;if(null==t||"object"!==r(t))return t;for(var i=t,o=arguments.length<=1?0:arguments.length-1,a=function(){var t=s+1<1||n.length<=s+1?void 0:n[s+1];null!=t&&"object"===r(t)&&Object.keys(t).map((function(n){return Object.prototype.hasOwnProperty.call(t,n)&&(void 0!==t[n]&&null!==t[n]&&t[n].constructor&&t[n].constructor===Object?(void 0===i[n]&&(i[n]={}),"object"!==r(i[n])?i[n]=t[n]:e(i[n],t[n])):t[n]&&t[n].constructor===Array?i[n]=t[n].slice(0):i[n]=t[n]),0}))},s=0;s<o;s+=1)a();return i}},85:function(e,t,n){"use strict";var r=n(30),i=n(67);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),r)}var i,a}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._chatVpContent="shrink-to-fit=no,width=device-width,height=device-height,initial-scale=1,minimum-scale=1,maximum-scale=1",this._oldVpContent="",this._viewport=void 0,this._initialized=!1}var t,n,o;return t=e,(n=[{key:"init",value:function(e){var t=document;if(y&&!this._initialized){var n=t.head||t.getElementsByTagName("head")[0];this._viewport=t.querySelector("meta[name=viewport]"),this._viewport?this._oldVpContent=this._viewport.content:(this._viewport=t.createElement("meta"),this._viewport.name="viewport",this._viewport.content="",n.appendChild(this._viewport)),this._securityRestrictions=e,this._initialized=!0}}},{key:"alter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._initialized&&(this._viewport.content=e?this._chatVpContent:this._oldVpContent,this._securityRestrictions.frameInFrame&&i.a.sendMessage(r.a.IFRAME_POST_MESSAGE.SET_IFRAME_VIEWPORT,this._viewport.content))}}])&&a(t.prototype,n),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),c=window.navigator.userAgent,u=-1!==c.indexOf("AppleWebKit")&&c.match(/(iPod|iPhone|iPad)/),l=-1!==c.indexOf("Android"),f=l&&-1===c.indexOf("Mobile"),d=c.match(/(Macintosh)/),p=u&&"iPad"===u[0]||d&&navigator.maxTouchPoints>0,y=(l||u)&&!(f||p);t.a=new s},9:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===r(a)?a:String(a)),i)}var o,a}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var a=o((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isObject=function(e){return"object"===r(e)&&null!==e&&!t.isArray(e)},this.isString=function(e){return"string"==typeof e},this.isNumber=function(e){return"number"==typeof e},this.isArray=Array.isArray,this.isBoolean=function(e){return"boolean"==typeof e},this.isFunction=function(e){return"function"==typeof e}}));t.a=new a},92:function(e,t,n){"use strict";var r=n(3),i=n(12),o=n(4);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),r)}var i,o}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this._initialized=!1,this._listeners=[]}var t,n,a;return t=e,(n=[{key:"send",value:function(e){this._initialized&&this._destinationWindow.postMessage(JSON.stringify(e),this._getOrigin())}},{key:"init",value:function(e){this._initialized||(r.a.isObject(e),r.a.notEmpty(e.targetOrigin),r.a.isNotUndefinedOrNull(e.destinationWindow),this._destinationWindow=e.destinationWindow,this._targetOrigin=e.targetOrigin,this._onMessageBound=this._onMessage.bind(this),this._getAddEventListenerParent().addEventListener("message",this._onMessageBound),this._initialized=!0)}},{key:"_onMessage",value:function(e){if(e.origin===this._getOrigin()||!o.a.isUndefinedOrNull(window.ReactNativeWebView))try{this._notify(JSON.parse(e.data))}catch(e){}}},{key:"_notify",value:function(e){return this._listeners.map((function(t){return t.apply(null,[e]),0})),0}},{key:"_getOrigin",value:function(){return this._targetOrigin||window.location.origin}},{key:"clear",value:function(){this._initialized=!1,this._getRemoveEventListenerParent().removeEventListener("message",this._onMessageBound),this._listeners.splice(0,this._listeners.length)}},{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"_getAddEventListenerParent",value:function(){return this._isAndroidMobileSDK()?document:window}},{key:"_getRemoveEventListenerParent",value:function(){return this._isAndroidMobileSDK()?document:window}},{key:"_isAndroidMobileSDK",value:function(){return(i.a.isAndroid||i.a.isAndroidTablet)&&!o.a.isUndefinedOrNull(window.ReactNativeWebView)}}])&&s(t.prototype,n),a&&s(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=c},93:function(e,t,n){"use strict";t.a={CONFIG_API_ACTION:{PRECHAT_SUBMIT:"prechatSubmit",CHAT_TRANSFERRED:"chatTransferred",CHAT_CONNECTING:"chatConnecting",CHAT_RECONCILING:"chatReconciling",WIDGET_LOADING:"widgetLoading"}}}});
//# sourceMappingURL=widget-loader.min.js.map